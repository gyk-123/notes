import{_ as s,c as a,o as n,a as l}from"./app.becd6e81.js";const A=JSON.parse('{"title":"NPM \u79C1\u670D","description":"","frontmatter":{},"headers":[{"level":2,"title":"nexus","slug":"nexus"},{"level":2,"title":"verdaccio docker","slug":"verdaccio-docker"},{"level":2,"title":"verdaccio pm2","slug":"verdaccio-pm2"}],"relativePath":"npm/repos/index.md"}'),p={name:"npm/repos/index.md"},o=l(`<h1 id="npm-\u79C1\u670D" tabindex="-1">NPM \u79C1\u670D <a class="header-anchor" href="#npm-\u79C1\u670D" aria-hidden="true">#</a></h1><h2 id="nexus" tabindex="-1">nexus <a class="header-anchor" href="#nexus" aria-hidden="true">#</a></h2><p><strong>\u5B89\u88C5</strong></p><div class="language-jsx"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nexus</span></span>
<span class="line"><span style="color:#A6ACCD;">chown </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">R </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nexus</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker search nexus</span></span>
<span class="line"><span style="color:#A6ACCD;">docker pull sonatype</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nexus3</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#F78C6C;">4873</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">8081</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">name nexus </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">e NEXUS_CONTEXT</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">nexus </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">nexus</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">nexus</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">data </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">localtime</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">localtime </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">always sonatype</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nexus3</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#F78C6C;">4873</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">8081</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">name nexus \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">e NEXUS_CONTEXT</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">nexus \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">nexus</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">nexus</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">data \\ </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">localtime</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">localtime \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">always \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  sonatype</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nexus3</span></span>
<span class="line"></span></code></pre></div><blockquote><p>--restart=always \u8DDF\u968F docker \u4E00\u8D77\u542F\u52A8</p></blockquote><p><strong>\u767B\u5F55</strong></p><p><code>http://xxxx/nexus/</code> \u5730\u5740\u8BBF\u95EE</p><p>\u7528\u6237\u540D\uFF1Aadmin\uFF0C\u5BC6\u7801\u5728 data/nexus/admin.password \u6587\u4EF6\u4E2D\u3002</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nexus</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">admin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">password</span></span>
<span class="line"></span></code></pre></div><p><strong>\u4ED3\u5E93\u914D\u7F6E</strong></p><p>create repos</p><ul><li>npm proxy</li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">taobao </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//registry.npm.taobao.org/</span></span>
<span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">npmjs  </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//registry.npmjs.org</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Negative Cache\uFF1A</span><span style="color:#F78C6C;">43200</span><span style="color:#A6ACCD;"> \uFF08</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> \u4E2A\u6708\uFF09</span></span>
<span class="line"></span></code></pre></div><ul><li>npm hosted</li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">hosted</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Deployment policy\uFF1AAllow redeploy</span></span>
<span class="line"></span></code></pre></div><ul><li>npm group</li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">public</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u914D\u7F6E\u4F18\u5148\u7EA7\uFF1A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">hosted</span></span>
<span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">taobao</span></span>
<span class="line"><span style="color:#A6ACCD;">npm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">npmjs</span></span>
<span class="line"></span></code></pre></div><p><strong>\u5B89\u5168\u914D\u7F6E</strong></p><p>Security\uFF1A</p><p>Realms \uFF0C\u9009\u4E2D npm Bearer Token Realm</p><p><strong>\u6D4B\u8BD5</strong></p><p>\u4E0A\u4F20\u64CD\u4F5C\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm login \u2013</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">registry</span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//registry.yueluo.club/nexus/repository/npm-hosted/</span></span>
<span class="line"><span style="color:#A6ACCD;">npm publish \u2013</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">registry</span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//registry.yueluo.club/nexus/repository/npm-hosted/</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528\u4ED3\u5E93</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">nrm add yueluo </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//registry.yueluo.club/nexus/repository/npm-public/</span></span>
<span class="line"><span style="color:#A6ACCD;">nrm use yueluo</span></span>
<span class="line"></span></code></pre></div><h2 id="verdaccio-docker" tabindex="-1">verdaccio docker <a class="header-anchor" href="#verdaccio-docker" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker pull verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">touch confg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">yaml</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># /data/verdaccio/conf/confg.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">storage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">../storage</span></span>
<span class="line"><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">../plugins</span></span>
<span class="line"><span style="color:#F07178;">auth</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">htpasswd</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./htpasswd</span></span>
<span class="line"><span style="color:#F07178;">uplinks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">npmjs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">taobao</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npm.taobao.org/</span></span>
<span class="line"><span style="color:#F07178;">packages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@*/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">access</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$all</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">publish</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$authenticated</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">proxy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">taobao</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">**</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">access</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$all</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">proxy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">taobao</span></span>
<span class="line"><span style="color:#F07178;">logs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pretty</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">name verdaccio \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#F78C6C;">4873</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">4873</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">conf</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">storage</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">storage \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#FFCB6B;">plugins</span><span style="color:#89DDFF;">:/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">plugins \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span></span>
<span class="line"></span></code></pre></div><h2 id="verdaccio-pm2" tabindex="-1">verdaccio pm2 <a class="header-anchor" href="#verdaccio-pm2" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">g verdaccio</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v14</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">8.0</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">linux</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">x64</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span></span>
<span class="line"><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v14</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">8.0</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">linux</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">x64</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">lib</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node_modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span></span>
<span class="line"></span></code></pre></div><p><strong>\u5EFA\u7ACB\u8F6F\u8FDE\u63A5</strong></p><p><strong>\u5B89\u88C5</strong></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ln </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">s </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">v14</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">8.0</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">linux</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">x64</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span></span>
<span class="line"></span></code></pre></div><p>\u4EFB\u610F\u76EE\u5F55\u6267\u884C verdaccio \u547D\u4EE4\uFF0C\u53EF\u4EE5\u542F\u52A8 verdaccio\u3002</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span></span>
<span class="line"></span></code></pre></div><p><strong>\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6</strong></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">storage </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">verdaccio</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">plugins</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># This is the default config file. It allows all users to do anything,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># so don&#39;t use it on production systems.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Look here for more config file examples:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># https://github.com/verdaccio/verdaccio/tree/master/conf</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># path to a directory with all packages</span></span>
<span class="line"><span style="color:#F07178;">storage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/verdaccio/storage</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># path to a directory with plugins to include</span></span>
<span class="line"><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/verdaccio/plugins</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Verdaccio</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># comment out to disable gravatar support</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># gravatar: false</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># by default packages are ordercer ascendant (asc|desc)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># sort_packages: asc</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># convert your UI to the dark side</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># darkMode: true</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># logo: http://somedomain/somelogo.png</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># favicon: http://somedomain/favicon.ico | /path/favicon.ico</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># translate your registry, api i18n not available yet</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># i18n:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># list of the available translations https://github.com/verdaccio/ui/tree/master/i18n/translations</span></span>
<span class="line"><span style="color:#F07178;">il8n</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zh-CN</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">auth</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">htpasswd</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/verdaccio/conf/htpasswd</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># Maximum amount of users allowed to register, defaults to &quot;+inf&quot;.</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># You can set this to -1 to disable registration.</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># max_users: 1000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># a list of other known repositories we can talk to</span></span>
<span class="line"><span style="color:#F07178;">uplinks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">npmjs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmjs.org/</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">taobao</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npm.taobao.org/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">packages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@*/*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># scoped packages</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">access</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$all</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">publish</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$authenticated</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">unpublish</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$authenticated</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">proxy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">taobao</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">**</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># allow all users (including non-authenticated users) to read and</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># publish all packages</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># you can specify usernames/groupnames (depending on your auth plugin)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># and three keywords: &quot;$all&quot;, &quot;$anonymous&quot;, &quot;$authenticated&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">access</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># allow all known users to publish/publish packages</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># (anyone can register by default, remember?)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">publish</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$authenticated</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">unpublish</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">$authenticated</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># if package is not available locally, proxy requests to &#39;npmjs&#39; registry</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">proxy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">taobao</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># You can specify HTTP/1.1 server keep alive timeout in seconds for incoming connections.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># A value of 0 makes the http server behave similarly to Node.js versions prior to 8.0.0, which did not have a keep-alive timeout.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># WORKAROUND: Through given configuration you can workaround following issue https://github.com/verdaccio/verdaccio/issues/301. Set to 0 in case 60 is not enough.</span></span>
<span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">keepAliveTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">middlewares</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">audit</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">enabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># log settings</span></span>
<span class="line"><span style="color:#F07178;">logs</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pretty</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#experiments:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  # support for npm token command</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  token: false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  # disable writing body size to logs, read more on ticket 1912</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  bytesin_off: false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  # enable tarball URL redirect for hosting tarball with a different server, the tarball_url_redirect can be a template string</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  tarball_url_redirect: &#39;https://mycdn.com/verdaccio/\${packageName}/\${filename}&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  # the tarball_url_redirect can be a function, takes packageName and filename and returns the url, when working with a js configuration file</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  tarball_url_redirect(packageName, filename) {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    const signedUrl = // generate a signed url</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    return signedUrl;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># This affect the web and api (not developed yet)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#i18n:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#web: en-US</span></span>
<span class="line"></span></code></pre></div><p><strong>\u6D4B\u8BD5\u4F7F\u7528</strong></p><p>\u63A8\u8350\u672C\u5730\u4F7F\u7528 nrm\u3002</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">nrm add yueluo </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//registry.yueluo.club/</span></span>
<span class="line"><span style="color:#A6ACCD;">nrm use yueluo</span></span>
<span class="line"></span></code></pre></div><p>\u521B\u5EFA\u7528\u6237</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm adduser</span></span>
<span class="line"></span></code></pre></div><p>\u53D1\u5E03</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm publish</span></span>
<span class="line"></span></code></pre></div><p><strong>pm2 \u542F\u52A8</strong></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">pm2 start verdaccio </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">registry_service</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div>`,53),e=[o];function c(t,r,y,D,i,C){return n(),a("div",null,e)}var d=s(p,[["render",c]]);export{A as __pageData,d as default};
