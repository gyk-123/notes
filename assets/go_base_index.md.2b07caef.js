import{_ as s,c as n,o as a,a as l}from"./app.6235d8aa.js";const p="/assets/go.7cb387fd.png",o="/assets/go_history.2f92e14f.png",e="/assets/install.c62b8cf8.png",t="/assets/semantic.c4e8e915.png",c="/assets/multi_version.16b5e0df.png",r="/assets/multi_version02.ccb8d4fc.png",D="/assets/init.bb117a51.png",y="/assets/go_use.0c26d19e.png",F="/assets/store_main.0c3112aa.png",A="/assets/declare.9fdeb50e.png",C="/assets/choose.59242abd.png",i="/assets/layer.5f0cc5f9.png",d="/assets/identifier.f41adce7.png",B=JSON.parse('{"title":"Go \u8BED\u8A00\u7B2C\u4E00\u8BFE","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u63A8\u8350\u5165\u5751\u7406\u7531","slug":"\u63A8\u8350\u5165\u5751\u7406\u7531","link":"#\u63A8\u8350\u5165\u5751\u7406\u7531","children":[]},{"level":2,"title":"01\u3001GO \u5386\u53F2\u4E0E\u73B0\u72B6","slug":"_01\u3001go-\u5386\u53F2\u4E0E\u73B0\u72B6","link":"#_01\u3001go-\u5386\u53F2\u4E0E\u73B0\u72B6","children":[{"level":3,"title":"Go \u8BED\u8A00\u662F\u600E\u6837\u8BDE\u751F\u7684","slug":"go-\u8BED\u8A00\u662F\u600E\u6837\u8BDE\u751F\u7684","link":"#go-\u8BED\u8A00\u662F\u600E\u6837\u8BDE\u751F\u7684","children":[]},{"level":3,"title":"\u201C\u4E09\u4EBA\u884C\u201D \u5230 \u201D\u4F17\u4EBA\u62FE\u67F4\u201C","slug":"\u201C\u4E09\u4EBA\u884C\u201D-\u5230-\u201D\u4F17\u4EBA\u62FE\u67F4\u201C","link":"#\u201C\u4E09\u4EBA\u884C\u201D-\u5230-\u201D\u4F17\u4EBA\u62FE\u67F4\u201C","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3","link":"#\u603B\u7ED3","children":[]}]},{"level":2,"title":"02\u3001Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66","slug":"_02\u3001go-\u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66","link":"#_02\u3001go-\u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66","children":[{"level":3,"title":"\u8BBE\u8BA1\u54F2\u5B66","slug":"\u8BBE\u8BA1\u54F2\u5B66","link":"#\u8BBE\u8BA1\u54F2\u5B66","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-1","link":"#\u603B\u7ED3-1","children":[]},{"level":3,"title":"\u6280\u672F\u62D3\u5C55","slug":"\u6280\u672F\u62D3\u5C55","link":"#\u6280\u672F\u62D3\u5C55","children":[]}]},{"level":2,"title":"03\u3001\u73AF\u5883\u914D\u7F6E","slug":"_03\u3001\u73AF\u5883\u914D\u7F6E","link":"#_03\u3001\u73AF\u5883\u914D\u7F6E","children":[{"level":3,"title":"\u9009\u62E9 Go \u7248\u672C","slug":"\u9009\u62E9-go-\u7248\u672C","link":"#\u9009\u62E9-go-\u7248\u672C","children":[]},{"level":3,"title":"\u5B89\u88C5 Go","slug":"\u5B89\u88C5-go","link":"#\u5B89\u88C5-go","children":[]},{"level":3,"title":"\u914D\u7F6E Go","slug":"\u914D\u7F6E-go","link":"#\u914D\u7F6E-go","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-2","link":"#\u603B\u7ED3-2","children":[]}]},{"level":2,"title":"04\u3001Go \u7A0B\u5E8F\u7684\u7ED3\u6784","slug":"_04\u3001go-\u7A0B\u5E8F\u7684\u7ED3\u6784","link":"#_04\u3001go-\u7A0B\u5E8F\u7684\u7ED3\u6784","children":[{"level":3,"title":"\u201Chello world\u201D","slug":"\u201Chello-world\u201D","link":"#\u201Chello-world\u201D","children":[]},{"level":3,"title":"\u7A0B\u5E8F\u5982\u4F55\u7F16\u8BD1","slug":"\u7A0B\u5E8F\u5982\u4F55\u7F16\u8BD1","link":"#\u7A0B\u5E8F\u5982\u4F55\u7F16\u8BD1","children":[]},{"level":3,"title":"\u590D\u6742\u9879\u76EE\u7F16\u8BD1","slug":"\u590D\u6742\u9879\u76EE\u7F16\u8BD1","link":"#\u590D\u6742\u9879\u76EE\u7F16\u8BD1","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-3","link":"#\u603B\u7ED3-3","children":[]},{"level":3,"title":"\u6280\u672F\u62D3\u5C55","slug":"\u6280\u672F\u62D3\u5C55-1","link":"#\u6280\u672F\u62D3\u5C55-1","children":[]}]},{"level":2,"title":"05\u3001Go \u9879\u76EE\u7684\u5E03\u5C40\u6807\u51C6","slug":"_05\u3001go-\u9879\u76EE\u7684\u5E03\u5C40\u6807\u51C6","link":"#_05\u3001go-\u9879\u76EE\u7684\u5E03\u5C40\u6807\u51C6","children":[{"level":3,"title":"\u201C\u521B\u4E16\u9879\u76EE\u201D \u7ED3\u6784","slug":"\u201C\u521B\u4E16\u9879\u76EE\u201D-\u7ED3\u6784","link":"#\u201C\u521B\u4E16\u9879\u76EE\u201D-\u7ED3\u6784","children":[]},{"level":3,"title":"\u5178\u578B\u7ED3\u6784\u5E03\u5C40","slug":"\u5178\u578B\u7ED3\u6784\u5E03\u5C40","link":"#\u5178\u578B\u7ED3\u6784\u5E03\u5C40","children":[]},{"level":3,"title":"\u65E9\u671F Go \u53EF\u6267\u884C\u7A0B\u5E8F","slug":"\u65E9\u671F-go-\u53EF\u6267\u884C\u7A0B\u5E8F","link":"#\u65E9\u671F-go-\u53EF\u6267\u884C\u7A0B\u5E8F","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-4","link":"#\u603B\u7ED3-4","children":[]}]},{"level":2,"title":"06\u3001\u6784\u5EFA\u6A21\u5F0F\uFF1A\u5305\u4F9D\u8D56\u7BA1\u7406\u95EE\u9898","slug":"_06\u3001\u6784\u5EFA\u6A21\u5F0F\uFF1A\u5305\u4F9D\u8D56\u7BA1\u7406\u95EE\u9898","link":"#_06\u3001\u6784\u5EFA\u6A21\u5F0F\uFF1A\u5305\u4F9D\u8D56\u7BA1\u7406\u95EE\u9898","children":[{"level":3,"title":"Go \u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u8FC7\u7A0B","slug":"go-\u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u8FC7\u7A0B","link":"#go-\u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u8FC7\u7A0B","children":[]},{"level":3,"title":"\u521B\u5EFA Go  Module","slug":"\u521B\u5EFA-go-module","link":"#\u521B\u5EFA-go-module","children":[]},{"level":3,"title":"\u6DF1\u5165 Go Module \u6784\u5EFA\u6A21\u5F0F","slug":"\u6DF1\u5165-go-module-\u6784\u5EFA\u6A21\u5F0F","link":"#\u6DF1\u5165-go-module-\u6784\u5EFA\u6A21\u5F0F","children":[]},{"level":3,"title":"\u5404\u7248\u672C\u6784\u5EFA\u6A21\u5F0F\u673A\u5236\u548C\u5207\u6362","slug":"\u5404\u7248\u672C\u6784\u5EFA\u6A21\u5F0F\u673A\u5236\u548C\u5207\u6362","link":"#\u5404\u7248\u672C\u6784\u5EFA\u6A21\u5F0F\u673A\u5236\u548C\u5207\u6362","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-5","link":"#\u603B\u7ED3-5","children":[]}]},{"level":2,"title":"07\u3001Go Module \u5E38\u89C4\u64CD\u4F5C","slug":"_07\u3001go-module-\u5E38\u89C4\u64CD\u4F5C","link":"#_07\u3001go-module-\u5E38\u89C4\u64CD\u4F5C","children":[{"level":3,"title":"\u6DFB\u52A0\u4F9D\u8D56","slug":"\u6DFB\u52A0\u4F9D\u8D56","link":"#\u6DFB\u52A0\u4F9D\u8D56","children":[]},{"level":3,"title":"\u5347\u7EA7/\u964D\u7EA7\u4F9D\u8D56","slug":"\u5347\u7EA7-\u964D\u7EA7\u4F9D\u8D56","link":"#\u5347\u7EA7-\u964D\u7EA7\u4F9D\u8D56","children":[]},{"level":3,"title":"\u79FB\u9664\u4F9D\u8D56","slug":"\u79FB\u9664\u4F9D\u8D56","link":"#\u79FB\u9664\u4F9D\u8D56","children":[]},{"level":3,"title":"\u7279\u6B8A\u60C5\u51B5\uFF1A\u4F7F\u7528 vendor","slug":"\u7279\u6B8A\u60C5\u51B5\uFF1A\u4F7F\u7528-vendor","link":"#\u7279\u6B8A\u60C5\u51B5\uFF1A\u4F7F\u7528-vendor","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-6","link":"#\u603B\u7ED3-6","children":[]}]},{"level":2,"title":"08\u3001\u5165\u53E3\u51FD\u6570\u4E0E\u5305\u521D\u59CB\u5316","slug":"_08\u3001\u5165\u53E3\u51FD\u6570\u4E0E\u5305\u521D\u59CB\u5316","link":"#_08\u3001\u5165\u53E3\u51FD\u6570\u4E0E\u5305\u521D\u59CB\u5316","children":[{"level":3,"title":"main.main \u51FD\u6570","slug":"main-main-\u51FD\u6570","link":"#main-main-\u51FD\u6570","children":[]},{"level":3,"title":"init \u51FD\u6570","slug":"init-\u51FD\u6570","link":"#init-\u51FD\u6570","children":[]},{"level":3,"title":"Go \u5305\u7684\u521D\u59CB\u5316\u987A\u5E8F","slug":"go-\u5305\u7684\u521D\u59CB\u5316\u987A\u5E8F","link":"#go-\u5305\u7684\u521D\u59CB\u5316\u987A\u5E8F","children":[]},{"level":3,"title":"init \u51FD\u6570\u5E94\u7528\u573A\u666F","slug":"init-\u51FD\u6570\u5E94\u7528\u573A\u666F","link":"#init-\u51FD\u6570\u5E94\u7528\u573A\u666F","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-7","link":"#\u603B\u7ED3-7","children":[]}]},{"level":2,"title":"09\u3001\u6784\u5EFA Web \u670D\u52A1","slug":"_09\u3001\u6784\u5EFA-web-\u670D\u52A1","link":"#_09\u3001\u6784\u5EFA-web-\u670D\u52A1","children":[{"level":3,"title":"\u7B80\u6613 Web \u670D\u52A1","slug":"\u7B80\u6613-web-\u670D\u52A1","link":"#\u7B80\u6613-web-\u670D\u52A1","children":[]},{"level":3,"title":"\u56FE\u4E66\u7BA1\u7406 API \u670D\u52A1","slug":"\u56FE\u4E66\u7BA1\u7406-api-\u670D\u52A1","link":"#\u56FE\u4E66\u7BA1\u7406-api-\u670D\u52A1","children":[]}]},{"level":2,"title":"10. \u53D8\u91CF\u58F0\u660E","slug":"_10-\u53D8\u91CF\u58F0\u660E","link":"#_10-\u53D8\u91CF\u58F0\u660E","children":[{"level":3,"title":"\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5","slug":"\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5","link":"#\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5","children":[]},{"level":3,"title":"\u5305\u7EA7\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F","slug":"\u5305\u7EA7\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F","link":"#\u5305\u7EA7\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F","children":[]},{"level":3,"title":"\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F","slug":"\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F","link":"#\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F","children":[]},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3-8","link":"#\u603B\u7ED3-8","children":[]},{"level":3,"title":"\u6280\u672F\u62D3\u5C55","slug":"\u6280\u672F\u62D3\u5C55-2","link":"#\u6280\u672F\u62D3\u5C55-2","children":[]}]},{"level":2,"title":"11. \u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF","slug":"_11-\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF","link":"#_11-\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF","children":[{"level":3,"title":"\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF","slug":"\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF","link":"#\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF","children":[]},{"level":3,"title":"\u907F\u514D\u53D8\u91CF\u906E\u853D\u7684\u539F\u5219","slug":"\u907F\u514D\u53D8\u91CF\u906E\u853D\u7684\u539F\u5219","link":"#\u907F\u514D\u53D8\u91CF\u906E\u853D\u7684\u539F\u5219","children":[]}]}],"relativePath":"go/base/index.md"}'),g={name:"go/base/index.md"},u=l('<h1 id="go-\u8BED\u8A00\u7B2C\u4E00\u8BFE" tabindex="-1">Go \u8BED\u8A00\u7B2C\u4E00\u8BFE <a class="header-anchor" href="#go-\u8BED\u8A00\u7B2C\u4E00\u8BFE" aria-hidden="true">#</a></h1><h2 id="\u63A8\u8350\u5165\u5751\u7406\u7531" tabindex="-1">\u63A8\u8350\u5165\u5751\u7406\u7531 <a class="header-anchor" href="#\u63A8\u8350\u5165\u5751\u7406\u7531" aria-hidden="true">#</a></h2><ul><li>\u5BF9\u521D\u5B66\u8005\u8DB3\u591F\u53CB\u597D\uFF0C\u80FD\u591F\u5FEB\u901F\u4E0A\u624B <ul><li>\u8BED\u6CD5\u7B80\u5355\uFF0C\u53EF\u4EE5\u5FEB\u901F\u5B66\u4E60\u8BED\u6CD5\uFF0C\u7F16\u5199\u7B80\u5355\u3001\u5B9E\u7528\u5E94\u7528</li><li>\u8BBE\u8BA1\u8005\u5728\u53D1\u5E03 Go 1.0 \u7248\u672C\u548C\u517C\u5BB9\u6027\u89C4\u8303\u540E\uFF0C\u4E3B\u8981\u7CBE\u529B\u8FD8\u662F\u6253\u78E8 Go \u5B9E\u73B0\uFF0C\u6539\u8FDB\u5468\u8FB9\u5DE5\u5177\u94FE</li></ul></li><li>\u751F\u4EA7\u529B\u4E0E\u6027\u80FD\u7684\u6700\u4F73\u7EC4\u5408 <ul><li>\u521B\u5EFA\u6700\u521D\u76EE\u7684\uFF0C\u5C31\u662F\u6784\u5EFA\u6D41\u884C\u7684\u3001\u9AD8\u6027\u80FD\u7684\u670D\u52A1\u7AEF\u7F16\u7A0B\u8BED\u8A00</li><li>\u6027\u80FD\u4E5F\u6709\u660E\u663E\u4F18\u52BF\uFF0C\u4E0E\u4E0D\u5E26 GC \u7684\u9759\u6001\u7F16\u7A0B\u8BED\u8A00\uFF08C/C++\uFF09\u4E4B\u95F4\u4E5F\u6CA1\u6709\u6570\u91CF\u7EA7\u7684\u5DEE\u8DDD</li><li>\u5BF9\u4E8E\u52A8\u6001\u8BED\u8A00\u7528\u6237\u53CB\u597D\uFF0C\u5E76\u4E14\u548C\u52A8\u6001\u8BED\u8A00\u76F8\u6BD4\uFF0C\u53EF\u4EE5\u5728\u4FDD\u6301\u751F\u4EA7\u529B\u7684\u540C\u65F6\uFF0C\u5927\u5E45\u5EA6\u63D0\u9AD8\u6027\u80FD</li><li>\u5728\u4E91\u539F\u751F\u57FA\u7840\u8BBE\u65BD\u3001\u4E2D\u95F4\u4EF6\u4E0E\u4E91\u670D\u52A1\u9886\u57DF\u5927\u653E\u5F02\u5F69</li><li>\u53EF\u4EE5\u5E94\u7528\u5728 DevOps/SRE\u3001\u533A\u5757\u94FE\u3001\u547D\u4EE4\u884C\u4EA4\u4E92\u7A0B\u5E8F\uFF08CLI\uFF09\u3001Web \u670D\u52A1\uFF0C\u6570\u636E\u5904\u7406\u65B9\u9762</li></ul></li><li>\u5FEB\u4E50\u4E14\u5177\u6709\u524D\u666F <ul><li>\u76F8\u5BF9\u4E8E C/C++\u3001Java\uFF0CGo \u5728\u5F00\u53D1\u4F53\u9A8C\u4E0A\u6709\u5F88\u591A\u63D0\u5347\uFF0C\u5305\u62EC\u7B80\u5355\u7684\u8BED\u6CD5\u3001\u5F97\u5FC3\u5E94\u624B\u7684\u5DE5\u5177\u94FE\u3001\u4E30\u5BCC\u548C\u5065\u58EE\u7684\u6807\u51C6\u5E93\uFF0C\u751F\u4EA7\u529B\u4E0E\u6027\u80FD\u7684\u5B8C\u7F8E\u7ED3\u5408\uFF0C\u514D\u9664\u5185\u5B58\u7BA1\u7406\u7684\u5FC3\u667A\u8D1F\u62C5\uFF0C\u5BF9\u5E76\u53D1\u8BBE\u8BA1\u7684\u539F\u751F\u652F\u6301\u7B49\u7B49</li><li>\u53EF\u4EE5\u4F7F\u7528 Go \u4F53\u73B0\u81EA\u8EAB\u4EF7\u503C\uFF0C\u6709\u975E\u5E38\u5E7F\u6CDB\u7684\u5E94\u7528\u573A\u666F</li></ul></li></ul><h2 id="_01\u3001go-\u5386\u53F2\u4E0E\u73B0\u72B6" tabindex="-1">01\u3001GO \u5386\u53F2\u4E0E\u73B0\u72B6 <a class="header-anchor" href="#_01\u3001go-\u5386\u53F2\u4E0E\u73B0\u72B6" aria-hidden="true">#</a></h2><h3 id="go-\u8BED\u8A00\u662F\u600E\u6837\u8BDE\u751F\u7684" tabindex="-1">Go \u8BED\u8A00\u662F\u600E\u6837\u8BDE\u751F\u7684 <a class="header-anchor" href="#go-\u8BED\u8A00\u662F\u600E\u6837\u8BDE\u751F\u7684" aria-hidden="true">#</a></h3><p>Go \u8BED\u8A00\u7684\u521B\u59CB\u4EBA\u6709\u4E09\u4F4D\uFF0C\u5206\u522B\u662F\u56FE\u7075\u5956\u83B7\u5F97\u8005\u3001C \u8BED\u8A00\u8054\u5408\u53D1\u660E\u4EBA\u3001Unix \u4E4B\u7236\u80AF\xB7\u6C64\u666E\u68EE\uFF08Ken Thompson \uFF09\uFF0CPlan 9 \u64CD\u4F5C\u7CFB\u7EDF\u9886\u5BFC\u8005\u3001UTF - 8 \u7F16\u7801\u7684\u6700\u521D\u8BBE\u8BA1\u8005\u7F57\u4F2F\xB7\u6D3E\u514B\uFF08Rob Pike\uFF09\uFF0C\u4EE5\u53CA Java \u7684 HotSpot \u865A\u62DF\u673A\u548C Chrome \u6D4F\u89C8\u5668\u7684 JavaScript V8 \u5F15\u64CE\u7684\u8BBE\u8BA1\u8005\u4E4B\u4E00\u7F57\u4F2F\u7279\xB7\u683C\u745E\u53F2\u83AB\uFF08Robert Griesemer\uFF09\u3002</p><p>\u4ED6\u4EEC\u4E09\u4E2A\u4EBA\u5728 2007 \u5E74 9 \u6708 20 \u65E5\u4E0B\u5348\u7684\u4E00\u6B21\u666E\u901A\u8BA8\u8BBA\uFF0C\u6210\u4E86\u8BA1\u7B97\u673A\u7F16\u7A0B\u8BED\u8A00\u9886\u57DF\u7684\u4E00\u6B21\u8457\u540D\u5386\u53F2\u4E8B\u4EF6\uFF0C\u5F00\u542F\u4E86\u4E00\u4E2A\u65B0\u7F16\u7A0B\u8BED\u8A00\u7684\u5386\u53F2\u3002</p><p>\u5728\u8C37\u6B4C\u5C71\u666F\u57CE\u603B\u90E8\u7684\u529E\u516C\u5BA4\u91CC\uFF0C\u7F57\u4F2F \xB7 \u6D3E\u514B\u542F\u52A8\u4E86\u4E00\u4E2A C++ \u5DE5\u7A0B\u7684\u6784\u5EFA\uFF0C\u6839\u636E\u4EE5\u5F80\u7684\u7ECF\u9A8C\uFF0C\u8FD9\u6B21\u6784\u5EFA\u5927\u7EA6\u9700\u8981\u4E00\u4E2A\u5C0F\u65F6\u3002\u5229\u7528\u8FD9\u6BB5\u65F6\u95F4\uFF0C\u7F57\u4F2F\xB7\u6D3E\u514B\u548C\u7F57\u4F2F\u7279\xB7\u683C\u745E\u53F2\u83AB\u3001\u80AF\xB7\u6C64\u666E\u68EE\u5750\u5728\u4E00\u8D77\uFF0C\u4EA4\u6362\u4E86\u5173\u4E8E\u8BBE\u8BA1\u4E00\u95E8\u65B0\u7F16\u7A0B\u8BED\u8A00\u7684\u60F3\u6CD5\u3002</p><p>\u4E4B\u6240\u4EE5\u4EA7\u751F\u8FD9\u79CD\u60F3\u6CD5\uFF0C\u662F\u56E0\u4E3A\u5F53\u65F6\u8C37\u6B4C\u5185\u90E8\u4E3B\u8981\u9002\u7528 C++ \u8BED\u8A00\u6784\u5EFA\u5404\u79CD\u7CFB\u7EDF\uFF0C\u4F46 C++ \u7684\u5DE8\u5927\u590D\u6742\u6027\uFF0C\u7F16\u8BD1\u6784\u5EFA\u901F\u5EA6\u6162\u4EE5\u53CA\u5728\u7F16\u5199\u670D\u52A1\u7AEF\u7A0B\u5E8F\u65F6\u5BF9\u5E76\u53D1\u652F\u6301\u7684\u4E0D\u8DB3\uFF0C\u8BA9\u4E09\u4F4D\u5927\u4F6C\u89C9\u5F97\u975E\u5E38\u4E0D\u4FBF\uFF0C\u4E8E\u662F\u4ED6\u4EEC\u5C31\u60F3\u7740\u8BBE\u8BA1\u4E00\u95E8\u65B0\u7684\u8BED\u8A00\u3002\u5728\u4ED6\u4EEC\u7684\u521D\u6B65\u6784\u60F3\u4E2D\uFF0C\u8FD9\u95E8\u65B0\u8BED\u8A00\u5E94\u8BE5\u662F\u80FD\u591F\u7ED9\u7A0B\u5E8F\u5458\u5E26\u6765\u5FEB\u4E50\u3001\u5339\u914D\u672A\u6765\u786C\u4EF6\u53D1\u5C55\u8D8B\u52BF\u5E76\u9002\u5408\u7528\u6765\u5F00\u53D1\u8C37\u6B4C\u5927\u89C4\u6A21\u7F51\u7EDC\u670D\u52A1\u7A0B\u5E8F\u7684\u3002</p><p>\u5728\u4E00\u5929\u7684\u7B80\u77ED\u8BA8\u8BBA\u540E\uFF0C\u7B2C\u4E8C\u5929\u4E09\u4F4D\u5927\u4F6C\u5177\u4F53\u8BA8\u8BBA\u4E86\u8FD9\u95E8\u65B0\u8BED\u8A00\u7684\u8BBE\u8BA1\u3002\u4F1A\u540E\u7F57\u4F2F\u7279\xB7\u683C\u745E\u53F2\u53D1\u51FA\u7535\u90AE\uFF0C\u5BF9\u8FD9\u95E8\u65B0\u7F16\u7A0B\u8BED\u8A00\u7684\u529F\u80FD\u7279\u6027\u505A\u4E86\u521D\u6B65\u5F52\u7EB3\u603B\u7ED3\u3002\u4E3B\u8981\u601D\u8DEF\u662F\uFF0C\u5728 C \u8BED\u8A00\u7684\u57FA\u7840\u4E0A\uFF0C\u4FEE\u6B63\u4E00\u4E9B\u660E\u663E\u7684\u7F3A\u9677\uFF0C\u5220\u9664\u4E00\u4E9B\u88AB\u8BDF\u75C5\u8F83\u591A\u7684\u7279\u6027\uFF0C\u589E\u52A0\u4E00\u4E9B\u7F3A\u5931\u7684\u529F\u80FD\u3002\u4F8B\u5982\uFF0C\u4F7F\u7528 import \u66FF\u4EE3 include\u3001\u53BB\u6389\u5B8F\u3001\u589E\u52A0\u5783\u573E\u56DE\u6536\u3001\u652F\u6301\u63A5\u53E3\u7B49\u3002\u8FD9\u5C01\u7535\u90AE\u6210\u4E3A\u8FD9\u95E8\u65B0\u8BED\u8A00\u7684\u7B2C\u4E00\u7248\u7279\u6027\u8BBE\u8BA1\u7A3F\uFF0C\u4E09\u4F4D\u5927\u4F6C\u5728\u8FD9\u95E8\u8BED\u8A00\u7684\u4E00\u4E9B\u57FA\u7840\u8BED\u6CD5\u7279\u6027\u4E0A\u8FBE\u6210\u521D\u6B65\u4E00\u81F4\u3002</p><p>9 \u6708 25 \u65E5\uFF0C\u7F57\u4F2F\xB7\u6D3E\u514B\u5728\u4E00\u5C01\u56DE\u590D\u7535\u90AE\u4E2D\u628A\u8FD9\u95E8\u65B0\u7F16\u7A0B\u8BED\u8A00\u547D\u540D\u4E3A \u201Cgo\u201D\u3002\u5728\u7F57\u4F2F \xB7 \u6D3E\u514B\u7684\u5FC3\u76EE\u4E2D\uFF0C\u201Cgo\u201D \u8FD9\u4E2A\u5355\u8BCD\u77ED\u5C0F\u3001\u5BB9\u6613\u8F93\u5165\u5E76\u4E14\u5728\u7EC4\u5408\u5176\u4ED6\u5B57\u6BCD\u540E\u4FBF\u53EF\u4EE5\u7528\u6765\u547D\u540D Go \u76F8\u5173\u7684\u5DE5\u5177\uFF0C\u6BD4\u5982\u7F16\u8BD1\u5668\uFF08goc\uFF09\u3001\u6C47\u7F16\u5668\uFF08goa\uFF09\u3001\u94FE\u63A5\u5668\uFF08gol\uFF09\u7B49\u3002</p><blockquote><p>go \u65E9\u671F\u7248\u672C\u66FE\u5982\u6B64\u547D\u540D go \u5DE5\u5177\u94FE\uFF0C\u4F46\u540E\u7EED\u7248\u672C\u64A4\u9500\u4E86\u8FD9\u79CD\u547D\u540D\u65B9\u5F0F\uFF0C\u4EC5\u4FDD\u7559 go \u8FD9\u4E00\u7EDF\u4E00\u7684\u5DE5\u5177\u94FE\u540D\u79F0\u3002</p></blockquote><p>\u53E6\u5916\uFF0C\u5F88\u591A Go \u8BED\u8A00\u521D\u5B66\u8005\u7ECF\u5E38\u79F0\u8FD9\u95E8\u8BED\u8A00\u4E3A Golang\uFF0C\u5176\u5B9E\u8FD9\u662F\u4E0D\u5BF9\u7684\uFF1A\u201CGolang\u201D \u4EC5\u5E94\u7528\u4E8E\u547D\u540D Go \u8BED\u8A00\u5B98\u7F51\u7F51\u7AD9\uFF0C\u6CA1\u6709\u4F7F\u7528 <a href="http://go.com" target="_blank" rel="noreferrer">go.com</a> \u7EAF\u7CB9\u662F\u56E0\u4E3A\u8FD9\u4E2A\u57DF\u540D\u88AB\u5360\u7528\u4E86\u800C\u5DF2\u3002</p><h3 id="\u201C\u4E09\u4EBA\u884C\u201D-\u5230-\u201D\u4F17\u4EBA\u62FE\u67F4\u201C" tabindex="-1">\u201C\u4E09\u4EBA\u884C\u201D \u5230 \u201D\u4F17\u4EBA\u62FE\u67F4\u201C <a class="header-anchor" href="#\u201C\u4E09\u4EBA\u884C\u201D-\u5230-\u201D\u4F17\u4EBA\u62FE\u67F4\u201C" aria-hidden="true">#</a></h3><p>\u7ECF\u8FC7\u65E9\u671F\u8BA8\u8BBA\uFF0CGo \u8BED\u8A00\u7684\u4E09\u4F4D\u4F5C\u8005\u5728\u8BED\u8A00\u8BBE\u8BA1\u8FBE\u6210\u521D\u6B65\u4E00\u81F4\u540E\uFF0C\u4FBF\u5F00\u542F\u4E86 Go \u8BED\u8A00\u8FED\u4EE3\u8BBE\u8BA1\u548C\u5B9E\u73B0\u7684\u8FC7\u7A0B\u3002</p><p>2008 \u5E74\u521D\uFF0CUnix \u4E4B\u7236\u80AF\xB7\u6C64\u666E\u68EE\u5B9E\u73B0\u4E86\u7B2C\u4E00\u7248 Go \u7F16\u8BD1\u5668\uFF0C\u7528\u4E8E\u9A8C\u8BC1\u4E4B\u524D\u7684\u8BBE\u8BA1\u3002\u8FD9\u4E2A\u7F16\u8BD1\u5668\u5148\u5C06 Go \u4EE3\u7801\u8F6C\u6362\u4E3A C \u4EE3\u7801\uFF0C\u518D\u7531 C \u7F16\u8BD1\u5668\u7F16\u8BD1\u6210\u4E8C\u8FDB\u5236\u6587\u4EF6\u3002</p><p>2008 \u5E74\u5E74\u4E2D\uFF0CGo \u7684\u7B2C\u4E00\u7248\u8BBE\u8BA1\u5C31\u57FA\u672C\u7ED3\u675F\u4E86\u3002\u8FD9\u662F\uFF0C\u540C\u6837\u5728\u8C37\u6B4C\u5DE5\u4F5C\u7684\u4F0A\u6069\xB7\u6CF0\u52D2\uFF08Ian Lance Taylor\uFF09\u4E3A Go \u8BED\u8A00\u5B9E\u73B0\u4E86\u4E00\u4E2A gcc \u7684\u524D\u7AEF\uFF0C\u8FD9\u4E5F\u662F Go \u8BED\u8A00\u7684\u7B2C\u4E8C\u4E2A\u7F16\u8BD1\u5668\u3002\u4F0A\u6069\xB7\u6CF0\u52D2\u7684\u6210\u672C\u4E0D\u4EC5\u4EC5\u662F\u4E00\u79CD\u9F13\u52B1\uFF0C\u4E5F\u8BC1\u660E\u4E86 Go \u8FD9\u4E00\u65B0\u8BED\u8A00\u7684\u53EF\u884C\u6027\u3002\u968F\u540E\uFF0C\u4F0A\u6069\xB7\u6CF0\u52D2\u4EE5\u56E2\u961F\u7B2C\u56DB\u4F4D\u6210\u5458\u7684\u8EAB\u4EFD\u6B63\u5F0F\u52A0\u5165 Go \u8BED\u8A00\u5F00\u53D1\u56E2\u961F\uFF0C\u540E\u9762\u4E5F\u6210\u4E86 Go \u8BED\u8A00\uFF0C\u4EE5\u53CA\u5176\u5DE5\u5177\u8BBE\u8BA1\u548C\u5B9E\u73B0\u7684\u6838\u5FC3\u4EBA\u7269\u4E4B\u4E00\u3002</p><blockquote><p>\u4E00\u4E2A\u7F16\u8BD1\u5668\u7684\u5B8C\u6574\u7F16\u8BD1\u8FC7\u7A0B\u5305\u62EC\uFF1A\u8BCD\u6CD5\u5206\u6790\u3001\u8BED\u6CD5\u5206\u6790\u3001\u7C7B\u578B\u68C0\u67E5\u3001\u4E2D\u95F4\u4EE3\u7801\u751F\u6210\u3001\u4EE3\u7801\u4F18\u5316\u3001\u76EE\u6807\u4EE3\u7801\u751F\u6210\u3001\u76EE\u6807\u4EE3\u7801\u4F18\u5316\u7B49\u51E0\u4E2A\u9636\u6BB5\u3002\u4ECE\u8BCD\u6CD5\u5206\u6790\u5230\u4E2D\u95F4\u4EE3\u7801\u751F\u6210\uFF0C\u8FD9\u5C31\u662F\u7F16\u8BD1\u5668\u524D\u7AEF\u6240\u8981\u8D1F\u8D23\u7684\u4E8B\u60C5\u3002\u4EE3\u7801\u4F18\u5316\u548C\u76EE\u6807\u4EE3\u7801\u751F\u6210\uFF0C\u5219\u662F\u7F16\u8BD1\u5668\u540E\u7AEF\u7684\u804C\u8D23\u3002</p><p>\u4E0A\u9762\u6240\u8BF4\u7684\u5B9E\u73B0 gcc \u7684\u524D\u7AEF\uFF0C\u5C31\u662F\u5B9E\u73B0\u4E00\u4E2A\u7A0B\u5E8F\uFF0C\u8FD9\u4E2A\u7A0B\u5E8F\u53EF\u4EE5\u8BFB\u53D6 go \u6E90\u7801\u5E76\u901A\u8FC7\u8BCD\u6CD5\u5206\u6790\u3001\u8BED\u6CD5\u5206\u6790\u3001\u7C7B\u578B\u68C0\u67E5\uFF0C\u6700\u7EC8\u751F\u6210\u4E2D\u95F4\u4EE3\u7801\uFF0C\u800C\u8FD9\u4E2A\u4E2D\u95F4\u4EE3\u7801\u53EF\u4EE5\u88AB gcc \u540E\u7AEF\u6240\u8BC6\u522B\u5E76\u751F\u6210\u6700\u7EC8\u76EE\u6807\u4EE3\u7801\u3002</p></blockquote><p>\u7F57\u65AF\xB7\u8003\u514B\u65AF\uFF08Russ Cox\uFF09\u662F Go \u6838\u5FC3\u5F00\u53D1\u56E2\u961F\u7684\u7B2C\u4E94\u4F4D\u6210\u5458\uFF0C\u4E5F\u662F\u5728 2008 \u5E74\u52A0\u5165\u3002\u968F\u540E\uFF0C\u7F57\u65AF\xB7\u8003\u514B\u65AF\u5229\u7528\u51FD\u6570\u662F \u201C\u4E00\u7B49\u516C\u6C11\u201D\uFF0C\u5E76\u4E14\u5B83\u4E5F\u53EF\u4EE5\u62E5\u6709\u81EA\u5DF1\u7684\u65B9\u6CD5\u8FD9\u4E00\u7279\u6027\u8BBE\u8BA1\u51FA\u4E86 http \u5305\u7684 HandlerFunc \u7C7B\u578B\u3002\u8FD9\u6837\uFF0C\u6211\u4EEC\u901A\u8FC7\u663E\u5F0F\u8F6C\u578B\u5C31\u53EF\u4EE5\u8BA9\u4E00\u4E2A\u666E\u901A\u51FD\u6570\u79F0\u4E3A\u6EE1\u8DB3 http.Handler \u63A5\u53E3\u7684\u7C7B\u578B\u3002</p><blockquote><p>\u5728 Go \u4E2D\uFF0C\u5982\u679C\u4E00\u4E2A\u53D8\u91CF\u7684\u7C7B\u578B\u4E3A int\uFF0C\u5982\u679C\u6211\u4EEC\u8981\u5C06\u5176\u4E0E\u53E6\u4E00\u4E2A int 64 \u7C7B\u578B\u7684\u53D8\u91CF\u8FDB\u884C\u52A0\u6CD5\u8FD0\u7B97\uFF0C\u6211\u4EEC\u4E0D\u80FD\u76F4\u63A5\u5C06\u5B83\u4EEC\u76F8\u52A0\uFF0C\u6211\u4EEC\u5FC5\u987B\u5C06\u5B83\u4EEC\u663E\u793A\u7684\u8F6C\u6362\u4E3A\u540C\u4E00\u7C7B\u578B\u540E\u624D\u80FD\u60F3\u5BB6\uFF0C\u8FD9\u91CC\u7684\u8F6C\u6362\u8FC7\u7A0B\u5C31\u7B80\u79F0\u4E3A\u663E\u5F0F\u8F6C\u578B\u3002</p></blockquote><p>\u4E0D\u4EC5\u5982\u6B64\uFF0C\u7F57\u65AF\xB7\u8003\u514B\u65AF\u8FD8\u5728\u5F53\u65F6\u8BBE\u8BA1\u7684\u57FA\u7840\u4E0A\u63D0\u51FA\u4E00\u4E9B\u66F4\u6CDB\u5316\u7684\u60F3\u6CD5\uFF0C\u6BD4\u5982 io.Reader \u548C io.Writer \u63A5\u53E3\uFF0C\u8FD9\u5C31\u5960\u5B9A\u4E86 Go \u8BED\u8A00\u7684 I/O \u7ED3\u6784\u6A21\u578B\u3002\u540E\u6765\uFF0C\u7F57\u65AF\xB7\u8003\u514B\u65AF\u6210\u4E3A Go \u6838\u5FC3\u6280\u672F\u56E2\u961F\u7684\u8D1F\u8D23\u4EBA\uFF0C\u63A8\u52A8 Go \u8BED\u8A00\u7684\u6301\u7EED\u6F14\u5316\u3002</p><p>\u81F3\u6B64\uFF0CGo \u8BED\u8A00\u6700\u521D\u7684\u6838\u5FC3\u56E2\u961F\u5F62\u6210\uFF0CGo \u8BED\u8A00\u8FC8\u4E0A\u7A33\u5B9A\u6F14\u5316\u7684\u9053\u8DEF\u3002</p><p>2009 \u5E74 10 \u6708 30 \u65E5\uFF0C\u7F57\u4F2F\xB7\u6D3E\u514B\u5728 Google Techtalk \u4E0A\u505A\u4E86\u4E00\u6B21\u6709\u5173 Go \u8BED\u8A00\u7684\u6F14\u8BB2\uFF0C\u201CThe Go Programming Language\u201D\uFF0C\u8FD9\u662F Go \u8BED\u8A00\u7B2C\u4E00\u6B21\u516C\u4E4B\u4E8E\u4F17\u3002\u5341\u5929\u540E\uFF0C2009 \u5E74 11 \u6708 10 \u65E5\uFF0C\u8C37\u6B4C\u5B98\u65B9\u5BA3\u5E03 Go \u8BED\u8A00\u9879\u76EE\u5F00\u6E90\uFF0C\u4E4B\u540E\u8FD9\u4E00\u5929\u4E5F\u88AB Go \u5B98\u65B9\u786E\u5B9A\u4E3A Go \u8BED\u8A00\u7684\u8BDE\u751F\u65E5\u3002</p><p>\u5728 Go \u8BED\u8A00\u9879\u76EE\u5F00\u6E90\u540E\uFF0CGo \u8BED\u8A00\u4E5F\u8FCE\u6765\u4E86\u81EA\u5DF1\u7684 \u201C\u5409\u7965\u7269\u201D\uFF0C\u662F\u4E00\u53EA\u7531\u7F57\u4F2F\xB7\u6D3E\u514B\u592B\u4EBA\u82AE\u59AE\xB7\u5F17\u4F26\u5947\uFF08Renee French\uFF09\u8BBE\u8BA1\u7684\u5730\u9F20\uFF0C\u4ECE\u6B64\u5730\u9F20\uFF08gopher\uFF09\u4E5F\u5C31\u6210\u4E3A\u4E86\u4E16\u754C\u5404\u5730 Go \u7A0B\u5E8F\u5458\u7684\u8C61\u5F81\uFF0CGo \u7A0B\u5E8F\u5458\u4E5F\u88AB\u6635\u79F0\u4E3A Gopher\u3002</p><img src="'+p+'"><p>Go \u8BED\u8A00\u9879\u76EE\u7684\u5F00\u6E90\u5438\u5F15\u4E86\u5168\u4E16\u754C\u5F00\u53D1\u8005\u7684\u76EE\u5149\uFF0C\u518D\u52A0\u4E0A Go \u4E09\u4F4D\u4F5C\u8005\u5728\u4E1A\u754C\u7684\u5F71\u54CD\u529B\u4EE5\u53CA\u8C37\u6B4C\u8FD9\u5EA7\u5927\u6811\u7684\u52A0\u6301\uFF0C\u66F4\u591A\u6709\u624D\u534E\u7684\u7A0B\u5E8F\u5458\u52A0\u5165\u5230 Go \u6838\u5FC3\u5F00\u53D1\u56E2\u961F\u4E2D\uFF0C\u66F4\u591A\u8D21\u732E\u8005\u5F00\u59CB\u4E3A Go \u8BED\u8A00\u9879\u76EE\u6DFB\u7816\u52A0\u74E6\u3002\u4E8E\u662F\uFF0CGo \u5728\u5BA3\u5E03\u5F00\u6E90\u7684\u5F53\u5E74\uFF0C\u5C31\u6210\u4E3A\u4E86\u8457\u540D\u7F16\u7A0B\u6392\u884C\u699C TIOBE \u7684\u5E74\u5EA6\u7F16\u7A0B\u8BED\u8A00\u3002</p><p>2012 \u5E74 3 \u6708 28 \u65E5\uFF0CGo 1.0 \u7248\u672C\u6B63\u5F0F\u53D1\u5E03\uFF0C\u540C\u65F6 Go \u5B98\u65B9\u53D1\u5E03\u4E86 \u201CGo 1 \u517C\u5BB9\u6027\u201D \u627F\u8BFA\uFF1A\u53EA\u8981\u7B26\u5408 Go 1 \u8BED\u8A00\u89C4\u8303\u7684\u6E90\u4EE3\u7801\uFF0CGo \u7F16\u8BD1\u5668\u5C06\u4FDD\u8BC1\u5411\u540E\u517C\u5BB9\uFF08backwards compatible\uFF09\uFF0C\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u4F7F\u7528\u65B0\u7248\u7F16\u8BD1\u5668\u4E5F\u53EF\u4EE5\u6B63\u786E\u7F16\u8BD1\u7528\u8001\u7248\u672C\u8BED\u6CD5\u7F16\u5199\u7684\u4EE3\u7801\u3002</p><p>\u4ECE\u6B63\u5F0F\u5F00\u6E90\u5230\u73B0\u5728\uFF0CGo \u8BED\u8A00\u53D1\u5E03\u4E86\u591A\u4E2A\u5927\u7248\u672C\u66F4\u65B0\uFF0C\u9010\u6E10\u6210\u719F\u3002\u4E0B\u9762\u68B3\u7406\u4E86\u8FC4\u4ECA\u4E3A\u6B62 Go \u8BED\u8A00\u7684\u91CD\u5927\u7248\u672C\u66F4\u65B0\uFF0C\u5E0C\u671B\u53EF\u4EE5\u5E2E\u52A9\u4F60\u5FEB\u901F\u4E86\u89E3 Go \u8BED\u8A00\u7684\u6F14\u5316\u5386\u53F2\u3002</p><img src="'+o+`"><p>\u7ECF\u8FC7\u5341\u4F59\u5E74\u7684\u6253\u78E8\u4E0E\u4F18\u5316\uFF0C\u5982\u4F55\u7684 Go \u8BED\u8A00\u5DF2\u7ECF\u9010\u6E10\u6210\u4E3A\u4E91\u8BA1\u7B97\u65F6\u4EE3\u57FA\u7840\u8BBE\u65BD\u7684\u7F16\u7A0B\u8BED\u8A00\u3002\u4F60\u80FD\u60F3\u5230\u7684\u73B0\u4EE3\u4E91\u8BA1\u7B97\u57FA\u7840\u8BBE\u65BD\u8F6F\u4EF6\u7684\u5927\u90E8\u5206\u6D41\u884C\u548C\u53EF\u9760\u7684\u4F5C\u54C1\uFF0C\u90FD\u662F\u7528 Go \u7F16\u5199\u7684\uFF0C\u6BD4\u5982\uFF1ADocker\u3001Kubernetes\u3001Prometheus\u3001Ethereum\uFF08\u4EE5\u592A\u574A\uFF09\u3001lstio\u3001CockroachDB\u3001InfluxDB\u3001Terraform\u3001Etcd\u3001Consul \u7B49\u7B49\uFF0C\u53EF\u4EE5\u770B Go \u8BED\u8A00\u7684\u5F71\u54CD\u529B\u5DF2\u7ECF\u5341\u5206\u5F3A\u5927\u3002</p><h3 id="\u603B\u7ED3" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a></h3><p>\u4E00\u95E8\u7F16\u7A0B\u8BED\u8A00\u7684\u5386\u53F2\u548C\u73B0\u72B6\uFF0C\u53EF\u4EE5\u7ED9\u4F60\u5E26\u6765\u5B66\u4E60\u7684 \u201C\u5B89\u5168\u611F\u201D\uFF0C\u76F8\u4FE1\u5B83\u53EF\u4EE5\u63D0\u5347\u4F60\u7684\u4E2A\u4EBA\u4EF7\u503C\uFF0C\u4E5F\u4F1A\u8BA9\u4F60\u83B7\u5F97\u4E30\u5BCC\u7684\u56DE\u62A5\u3002\u4F60\u4E5F\u4F1A\u66F4\u52A0\u6E05\u695A\u5730\u8BA4\u8BC6\u5230\uFF1A\u81EA\u5DF1\u4E3A\u4EC0\u4E48\u8981\u5B66\u4E60\u5B83\uFF1F\u5B83\u672A\u6765\u7684\u53D1\u5C55\u8D8B\u52BF\u53C8\u662F\u600E\u6837\u7684\uFF1F\u5F53\u8FD9\u95E8\u8BED\u8A00\u7684\u73B0\u72B6\u80FD\u7ED9\u4E88\u4F60\u6781\u5927 \u201C\u5B89\u5168\u611F\u201D \u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u624D\u4F1A \u201C\u6B7B\u5FC3\u584C\u5730\u201D \u5730\u5B66\u4E60\u548C\u94BB\u7814\u8FD9\u95E8\u6280\u672F\uFF0C\u4E0D\u4F1A\u6709\u592A\u591A\u7684\u540E\u987E\u4E4B\u5FE7\u3002</p><p>\u4ECE Go \u672C\u8EAB\u7684\u53D1\u5C55\u6765\u770B\uFF0C\u548C\u591A\u6570\u7F16\u7A0B\u8BED\u8A00\u4E00\u6837\uFF0CGo \u8BED\u8A00\u5728\u8BDE\u751F\u540E\uFF0C\u5EA6\u8FC7\u4E86\u4E00\u4E2A\u8F83\u957F \u201C\u6280\u672F\u840C\u82BD\u671F\u201D\u3002\u7136\u540E\uFF0C\u5B9E\u73B0\u4E86\u81EA\u4E3E\uFF0C\u53D1\u5E03\u5BF9 GC \u5EF6\u8FDF\u8FDB\u884C\u5927\u5E45\u4F18\u5316\u7684 Go 1.5 \u7248\u672C\uFF0C\u6210\u4E3A Go \u8BED\u8A00\u6F14\u5316\u8FC7\u7A0B\u4E2D\u7684\u7B2C\u4E00\u4E2A \u201C\u5F15\u7206\u70B9\u201D\uFF0C\u63A8\u52A8 Go \u8BED\u8A00\u8FDB\u5165 \u201C\u6280\u672F\u81A8\u80C0\u671F\u201D\u3002</p><p>\u4E5F\u6B63\u662F\u5728\u8FD9\u6BB5\u65F6\u95F4\u5185\uFF0CGo \u8BED\u8A00\u63A8\u51FA\u4E86\u4EE5 Docker\u3001Kubernetes \u4E3A\u5178\u578B\u4EE3\u8868\u7684 \u201C\u6740\u624B\u7EA7\u5E94\u7528\u201D\uFF0C\u5145\u5206\u5C55\u793A\u4E86\u5B9E\u529B\uFF0C\u5728\u4E16\u754C\u8303\u56F4\u6536\u83B7\u4E86\u767E\u4E07\u7C89\u4E1D\uFF0C\u8FF8\u53D1\u51FA\u6781\u9AD8\u7684\u6F5C\u529B\u548C\u6301\u7EED\u7684\u6D3B\u529B\u3002</p><h2 id="_02\u3001go-\u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66" tabindex="-1">02\u3001Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66 <a class="header-anchor" href="#_02\u3001go-\u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66" aria-hidden="true">#</a></h2><p>\u5F88\u591A\u7F16\u7A0B\u8BED\u8A00\u7684\u521D\u5B66\u8005\u5728\u5B66\u4E60\u521D\u671F\uFF0C\u53EF\u80FD\u90FD\u4F1A\u9047\u5230\u8FD9\u6837\u7684\u95EE\u9898\uFF1A\u6700\u521D\u5174\u81F4\u52C3\u52C3\u5730\u5F00\u59CB\u5B66\u4E60\u4E00\u95E8\u7F16\u7A0B\u8BED\u8A00\uFF0C\u5B66\u7740\u5B66\u7740\u5C31\u53D1\u73B0\u5F88\u591A \u201C\u522B\u626D\u201D \u7684\u5730\u65B9\uFF0C\u6BD4\u5982\u60F3\u8981\u7684\u8BED\u8A00\u7279\u6027\u7F3A\u5931\u3001\u8BED\u6CD5\u98CE\u683C\u504F\u907F\u4E0E\u4E3B\u6D41\u8BED\u8A00\u5DEE\u5F02\u5927\u3001\u8BED\u8A00\u7684\u4E0D\u540C\u7248\u672C\u4E4B\u95F4\u65E0\u6CD5\u517C\u5BB9\u3001\u8BED\u8A00\u7684\u8BED\u6CD5\u7279\u6027\u8FC7\u591A\u5BFC\u81F4\u5B66\u4E60\u66F2\u7EBF\u9661\u5CED\u3001\u8BED\u8A00\u7684\u5DE5\u5177\u94FE\u652F\u6301\u8F83\u5DEE\uFF0C\u7B49\u7B49\u3002</p><p>\u4EE5\u4E0A\u7684\u8FD9\u4E9B\u95EE\u9898\uFF0C\u672C\u8D28\u4E0A\u90FD\u4E0E\u8BED\u8A00\u8BBE\u8BA1\u8005\u7684\u8BBE\u8BA1\u54F2\u5B66\u6709\u5173\u3002\u6240\u8C13\u7F16\u7A0B\u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66\uFF0C\u5C31\u662F\u6307\u51B3\u5B9A\u8FD9\u95E8\u8BED\u8A00\u6F14\u5316\u8FDB\u7A0B\u7684\u9AD8\u7EA7\u539F\u5219\u548C\u4F9D\u636E\u3002</p><p>\u8BBE\u8BA1\u54F2\u5B66\u4E4B\u4F59\u7F16\u7A0B\u8BED\u8A00\uFF0C\u5C31\u597D\u6BD4\u4E00\u4E2A\u4EBA\u7684\u4EF7\u503C\u89C2\u4E4B\u4F59\u8FD9\u4E2A\u4EBA\u7684\u884C\u4E3A\u3002\u5982\u679C\u4E0D\u8BA4\u540C\u8FD9\u4E2A\u4EBA\u7684\u4EF7\u503C\u89C2\uFF0C\u90A3\u4F60\u5C31\u5F88\u96BE\u4E0E\u4E4B\u6301\u7EED\u4EA4\u5F80\u4E0B\u53BB\u3002\u540C\u7406\uFF0C\u5982\u679C\u4F60\u4E0D\u8BA4\u540C\u4E00\u95E8\u7F16\u7A0B\u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66\uFF0C\u90A3\u4E48\u5927\u6982\u7387\u4F60\u4F1A\u5728\u540E\u7EED\u7684\u8BED\u8A00\u5B66\u4E60\u4E2D\uFF0C\u5C31\u4F1A\u9047\u5230\u4E0A\u9762\u63D0\u5230\u7684\u95EE\u9898\uFF0C\u800C\u4E14\u53EF\u80FD\u4F1A\u8BA9\u4F60\u5931\u53BB\u7EE7\u7EED\u5B66\u4E60\u7684\u7CBE\u795E\u52A8\u529B\u3002</p><p>\u56E0\u6B64\uFF0C\u5728\u6B63\u5F0F\u5B66\u4E60 Go \u8BED\u6CD5\u548C\u7F16\u7801\u4E4B\u524D\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u5148\u6765\u4E86\u89E3\u4E00\u4E0B Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66\u3002</p><h3 id="\u8BBE\u8BA1\u54F2\u5B66" tabindex="-1">\u8BBE\u8BA1\u54F2\u5B66 <a class="header-anchor" href="#\u8BBE\u8BA1\u54F2\u5B66" aria-hidden="true">#</a></h3><p>Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66\u53EF\u4EE5\u603B\u7ED3\u4E3A\u4E94\u70B9\uFF1A\u7B80\u5355\u3001\u663E\u5F0F\u3001\u7EC4\u5408\u3001\u5E76\u53D1\u548C\u9762\u5411\u5DE5\u7A0B\u3002</p><h4 id="\u7B80\u5355" tabindex="-1">\u7B80\u5355 <a class="header-anchor" href="#\u7B80\u5355" aria-hidden="true">#</a></h4><p>Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u8005\u4EEC\u5728\u8BED\u8A00\u8BBE\u8BA1\u4E4B\u521D\uFF0C\u5C31\u62D2\u7EDD\u8D70\u8BED\u8A00\u7279\u6027\u878D\u5408\u7684\u9053\u8DEF\uFF0C\u9009\u62E9 \u201C\u505A\u51CF\u6CD5\u201D \u5E76\u81F4\u529B\u4E8E\u6253\u9020\u4E00\u95E8\u7B80\u5355\u7684\u7F16\u7A0B\u8BED\u8A00\u3002</p><p>\u8FD9\u4E5F\u5C31\u610F\u5473\u7740 Go \u4E0D\u4F1A\u50CF C++\u3001Java \u90A3\u6837\u5C06\u5176\u4ED6\u7F16\u7A0B\u8BED\u8A00\u7684\u65B0\u7279\u6027\u517C\u84C4\u5E76\u6536\uFF0C\u6240\u4EE5\u4F60\u5728 Go \u8BED\u8A00\u4E2D\u770B\u4E0D\u5230\u4F20\u7EDF\u7684\u9762\u5411\u5BF9\u8C61\u7684\u7C7B\u3001\u6784\u9020\u51FD\u6570\u4E0E\u7EE7\u627F\uFF0C\u770B\u4E0D\u5230\u7ED3\u6784\u5316\u7684\u5F02\u5E38\u5904\u7406\uFF0C\u4E5F\u770B\u4E0D\u5230\u672C\u5C5E\u4E8E\u51FD\u6570\u7F16\u7A0B\u8303\u5F0F\u7684\u8BED\u6CD5\u5143\u7D20\u3002</p><p>\u4E0D\u8FC7\uFF0CGo \u8BED\u4E5F\u6CA1\u5B83\u770B\u8D77\u6765\u90A3\u4E48\u7B80\u5355\uFF0C\u81EA\u8EAB\u5B9E\u73B0\u8D77\u6765\u4E5F\u5E76\u4E0D\u5BB9\u6613\uFF0C\u4F46\u8FD9\u4E9B\u590D\u6742\u6027\u90FD\u88AB Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u8005\u4EEC \u201C\u9690\u85CF\u201D \u4E86\uFF0C\u6240\u4EE5 Go \u8BED\u6CD5\u5C42\u9762\u4E0A\u5448\u73B0\u8FD9\u6837\u7684\u72B6\u6001\uFF1A</p><ul><li>\u4EC5\u6709 25 \u4E2A\u5173\u952E\u5B57\uFF0C\u4E3B\u6D41\u7F16\u7A0B\u8BED\u8A00\u5F88\u5C11\uFF1B</li><li>\u5185\u7F6E\u5783\u573E\u6536\u96C6\uFF0C\u964D\u4F4E\u5F00\u53D1\u4EBA\u5458\u5185\u5B58\u7BA1\u7406\u7684\u5FC3\u667A\u8D1F\u62C5\uFF1B</li><li>\u9996\u5B57\u6BCD\u5927\u5C0F\u5199\u51B3\u5B9A\u53EF\u89C1\u6027\uFF0C\u65E0\u9700\u901A\u8FC7\u989D\u5916\u5173\u952E\u5B57\u4FEE\u9970\uFF1B</li><li>\u53D8\u91CF\u521D\u59CB\u4E3A\u7C7B\u578B\u96F6\u503C\uFF0C\u907F\u514D\u4EE5\u968F\u673A\u503C\u4F5C\u4E3A\u521D\u503C\u7684\u95EE\u9898\uFF1B</li><li>\u5185\u7F6E\u6570\u7EC4\u8FB9\u754C\u68C0\u67E5\uFF0C\u6781\u5927\u51CF\u5C11\u8D8A\u754C\u8BBF\u95EE\u5E26\u6765\u7684\u5B89\u5168\u9690\u60A3\uFF1B</li><li>\u5185\u7F6E\u5E76\u53D1\u652F\u6301\uFF0C\u7B80\u5316\u5E76\u53D1\u7A0B\u5E8F\u8BBE\u8BA1\uFF1B</li><li>\u5185\u7F6E\u63A5\u53E3\u7C7B\u578B\uFF0C\u4E3A\u7EC4\u5408\u7684\u8BBE\u8BA1\u54F2\u5B66\u5960\u5B9A\u57FA\u7840\uFF1B</li><li>\u539F\u751F\u63D0\u4F9B\u5B8C\u5584\u7684\u5DE5\u5177\u94FE\uFF0C\u5F00\u7BB1\u5373\u7528\uFF1B</li><li>... ...</li></ul><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 Go \u8BBE\u8BA1\u8005\u9009\u62E9\u7684 \u201C\u7B80\u5355\u201D\uFF0C\u5176\u5B9E\u662F\u7AD9\u5728\u5DE8\u4EBA\u80A9\u8180\u4E0A\uFF0C\u53BB\u9664\u6216\u4F18\u5316\u4E86\u4EE5\u5F80\u8BED\u8A00\u4E2D\uFF0C\u5DF2\u7ECF\u88AB\u5F00\u53D1\u8005\u8BC1\u660E\u4E3A\u4F53\u9A8C\u4E0D\u597D\u6216\u96BE\u4EE5\u9A7E\u9A6D\u7684\u8BED\u6CD5\u5143\u7D20\u548C\u8BED\u8A00\u673A\u5236\uFF0C\u5E76\u63D0\u51FA\u81EA\u5DF1\u7684\u4E00\u4E9B\u521B\u65B0\u6027\u7684\u8BBE\u8BA1\u3002\u6BD4\u5982\uFF0C\u9996\u5B57\u6BCD\u5927\u5C0F\u5199\u51B3\u5B9A\u53EF\u89C1\u6027\u3001\u53D8\u91CF\u521D\u59CB\u4E3A\u7C7B\u578B\u96F6\u503C\u3001\u5185\u7F6E\u4EE5 go \u5173\u952E\u5B57\u5B9E\u73B0\u7684\u5E76\u53D1\u652F\u6301\u7B49\u3002</p><p>\u7B80\u5355\u610F\u5473\u7740\u53EF\u4EE5\u4F7F\u7528\u66F4\u5C11\u7684\u4EE3\u7801\u5B9E\u73B0\u76F8\u540C\u7684\u529F\u80FD\uFF0C\u7B80\u5355\u610F\u5473\u7740\u4EE3\u7801\u5177\u6709\u66F4\u597D\u7684\u53EF\u8BFB\u6027\uFF0C\u53EF\u8BFB\u6027\u597D\u7684\u4EE3\u7801\u901A\u5E38\u610F\u5473\u7740\u66F4\u597D\u7684\u53EF\u7EF4\u62A4\u6027\u4EE5\u53CA\u53EF\u9760\u6027\u3002</p><p>\u7B80\u5355\u7684\u8BBE\u8BA1\u54F2\u5B66\u662F Go \u751F\u4EA7\u529B\u7684\u6E90\u6CC9\u3002</p><h4 id="\u663E\u5F0F" tabindex="-1">\u663E\u5F0F <a class="header-anchor" href="#\u663E\u5F0F" aria-hidden="true">#</a></h4><p>\u9996\u5148\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E00\u6BB5 C \u7A0B\u5E8F\uFF0C\u770B\u4E0B \u201C\u9690\u5F0F\u201D \u4EE3\u7801\u7684\u884C\u4E3A\u7279\u6027\u3002</p><p>\u5728 C \u8BED\u8A00\u4E2D\uFF0C\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u53EF\u4EE5\u6B63\u5E38\u7F16\u8BD1\u5E76\u8F93\u51FA\u6B63\u786E\u7ED3\u679C\uFF1A</p><div class="language-c"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"><span style="color:#89DDFF;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">stdio.h</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">short</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">long</span><span style="color:#F07178;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    c </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> a </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%ld</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> c</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4E0A\u9762\u8FD9\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u53D8\u91CF a\u3001b \u548C c \u7684\u7C7B\u578B\u5747\u4E0D\u76F8\u540C\uFF0CC \u8BED\u8A00\u7F16\u8BD1\u5668\u5728\u7F16\u8BD1 c = a + b \u8FD9\u4E00\u884C\u65F6\uFF0C\u4F1A\u81EA\u52A8\u5C06\u77ED\u6574\u578B\u53D8\u91CF a \u548C\u6574\u578B\u53D8\u91CF b\uFF0C\u5148\u8F6C\u6362\u6210 long \u7C7B\u578B\u7136\u540E\u76F8\u52A0\uFF0C\u5E76\u5C06\u6240\u6709\u7ED3\u679C\u5B58\u50A8\u5728 long \u7C7B\u578B\u53D8\u91CF c \u4E2D\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#C792EA;">int16</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#C792EA;">int64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> b</span></span>
<span class="line"><span style="color:#A6ACCD;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%d</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5C06\u4E0A\u9762\u7684 C \u7A0B\u5E8F\u8F6C\u6362\u4E3A\u7B49\u4EF7\u7684 Go \u4EE3\u7801\uFF0C\u5F53\u7F16\u8BD1\u7A0B\u5E8F\u65F6\uFF0C\u4F1A\u5F97\u5230\u8FD9\u6837\u7684\u7F16\u8BD1\u5668\u9519\u8BEF\uFF1A\u201Cinvalid operation\uFF1Aa + b\uFF08mismatched types int16 and in\uFF09\u201D\u3002\u6211\u4EEC\u80FD\u770B\u5230 Go \u4E0E C \u8BED\u8A00\u7684\u9690\u5F0F\u81EA\u52A8\u7C7B\u578B\u8F6C\u6362\u4E0D\u540C\uFF0CGo \u4E0D\u5141\u8BB8\u4E0D\u540C\u7C7B\u578B\u7684\u6574\u578B\u53D8\u91CF\u8FDB\u884C\u6DF7\u5408\u8BA1\u7B97\uFF0C\u5B83\u540C\u6837\u4E5F\u4E0D\u4F1A\u5BF9\u5176\u8FDB\u884C\u9690\u5F0F\u7684\u81EA\u52A8\u8F6C\u6362\u3002</p><p>\u56E0\u6B64\uFF0C\u5982\u679C\u8981\u4F7F\u8FD9\u6BB5\u4EE3\u7801\u901A\u8FC7\u7F16\u8BD1\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u5BF9\u53D8\u91CF a \u548C b \u8FDB\u884C\u663E\u5F0F\u8F6C\u578B\uFF0C\u5C31\u50CF\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">int64</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">int64</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%d</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5176\u5B9E\u5C31\u662F Go \u8BED\u8A00\u663E\u5F0F\u8BBE\u8BA1\u54F2\u5B66\u7684\u4F53\u73B0\u3002</p><p>\u5728 Go \u8BED\u8A00\u4E2D\uFF0C\u4E0D\u540C\u7C7B\u578B\u53D8\u91CF\u662F\u4E0D\u80FD\u5728\u4E00\u8D77\u8FDB\u884C\u6DF7\u5408\u8BA1\u7B97\u7684\uFF0C\u8FD9\u662F\u56E0\u4E3A Go \u5E0C\u671B\u5F00\u53D1\u4EBA\u5458\u660E\u786E\u77E5\u9053\u81EA\u5DF1\u5728\u505A\u4EC0\u4E48\uFF0C\u4F60\u9700\u8981\u4EE5\u663E\u5F0F\u7684\u65B9\u5F0F\u901A\u8FC7\u8F6C\u578B\u7EDF\u4E00\u53C2\u4E0E\u8BA1\u7B97\u5404\u4E2A\u53D8\u91CF\u7684\u7C7B\u578B\u3002</p><p>\u521D\u6B21\u4E4B\u5916\uFF0CGo \u8BBE\u8BA1\u8005\u6240\u5D07\u5C1A\u7684\u663E\u5F0F\u54F2\u5B66\u8FD8\u76F4\u63A5\u51B3\u5B9A\u4E86 Go \u8BED\u8A00\u9519\u8BEF\u5904\u7406\u7684\u5F62\u6001\uFF1AGo \u8BED\u8A00\u91C7\u7528\u663E\u5F0F\u7684\u57FA\u4E8E\u503C\u7684\u9519\u8BEF\u5904\u7406\u65B9\u6848\uFF0C\u51FD\u6570/\u65B9\u6CD5\u4E2D\u7684\u9519\u8BEF\u90FD\u4F1A\u901A\u8FC7 return \u8BED\u53E5\u663E\u5F0F\u5730\u8FD4\u56DE\uFF0C\u5E76\u4E14\u901A\u5E38\u8C03\u7528\u8005\u4E0D\u80FD\u5FFD\u7565\u5BF9\u8FD4\u56DE\u7684\u9519\u8BEF\u8FDB\u884C\u5904\u7406\u3002</p><h4 id="\u7EC4\u5408" tabindex="-1">\u7EC4\u5408 <a class="header-anchor" href="#\u7EC4\u5408" aria-hidden="true">#</a></h4><p>\u8FD9\u4E2A\u8BBE\u8BA1\u54F2\u5B66\u548C\u6211\u4EEC\u7684\u5404\u4E2A\u7A0B\u5E8F\u4E4B\u95F4\u7684\u8026\u5408\u6709\u5173\uFF0CGo \u8BED\u8A00\u4E0D\u50CF C++\u3001Java \u7B49\u4E3B\u6D41\u9762\u5411\u5BF9\u8C61\u8BED\u8A00\uFF0C\u6211\u4EEC\u5728 Go \u4E2D\u89C1\u4E0D\u5230\u7ECF\u5178\u7684\u9762\u5411\u5BF9\u8C61\u8BED\u6CD5\u5143\u7D20\u3001\u7C7B\u578B\u4F53\u7CFB\u548C\u7EE7\u627F\u673A\u5236\uFF0CGo \u5D07\u5C1A\u7684\u662F\u7EC4\u5408\u7684\u8BBE\u8BA1\u54F2\u5B66\u3002</p><p>\u5728 Go \u8BED\u8A00\u8BBE\u8BA1\u5C42\u9762\uFF0CGo \u8BBE\u8BA1\u8005\u4E3A\u5F00\u53D1\u8005\u4EEC\u63D0\u4F9B\u6B63\u4EA4\u7684\u8BED\u6CD5\u5143\u7D20\uFF0C\u4EE5\u4F9B\u540E\u7EED\u7EC4\u5408\u4F7F\u7528\uFF0C\u5305\u62EC\uFF1A</p><ul><li>Go \u8BED\u8A00\u65E0\u7C7B\u578B\u5C42\u6B21\u4F53\u7CFB\uFF0C\u5404\u7C7B\u578B\u4E4B\u95F4\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\uFF0C\u6CA1\u6709\u5B50\u7C7B\u578B\u7684\u6982\u5FF5\uFF1B</li><li>\u6BCF\u4E2A\u7C7B\u578B\u90FD\u53EF\u4EE5\u6709\u81EA\u5DF1\u7684\u65B9\u6CD5\u96C6\u5408\uFF0C\u7C7B\u578B\u5B9A\u4E49\u4E0E\u65B9\u6CD5\u5B9E\u73B0\u662F\u6B63\u4EA4\u72EC\u7ACB\u7684\uFF1B</li><li>\u5B9E\u73B0\u67D0\u4E2A\u63A5\u53E3\u65F6\uFF0C\u65E0\u9700\u50CF Java \u90A3\u6837\u91C7\u7528\u7279\u5B9A\u5173\u952E\u5B57\u4FEE\u9970\uFF1B</li><li>\u5305\u4E4B\u95F4\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\uFF0C\u6CA1\u6709\u5B50\u5305\u7684\u6982\u5FF5\u3002</li></ul><blockquote><p>\u6B63\u4EA4\u6307\u76F8\u4E92\u72EC\u7ACB\uFF0C\u4E0D\u53EF\u66FF\u4EE3\uFF0C\u5E76\u4E14\u7EC4\u5408\u8D77\u6765\u53EF\u5B9E\u73B0\u5176\u5B83\u529F\u80FD\u3002</p></blockquote><p>\u65E0\u8BBA\u662F\u5305\u3001\u63A5\u53E3\u8FD8\u662F\u5177\u4F53\u7C7B\u578B\u5B9A\u4E49\uFF0CGO \u8BED\u8A00\u5176\u5B9E\u4E3A\u6211\u4EEC\u5448\u73B0\u8FD9\u6837\u7684\u4E00\u5E45\u56FE\u666F\uFF1A\u4E00\u5EA7\u5EA7\u6CA1\u6709\u5173\u8054\u7684 \u201C\u5B64\u5C9B\u201D\uFF0C\u4F46\u6BCF\u4E2A\u5C9B\u5185\u53C8\u5F88\u7CBE\u5F69\u3002Go \u91C7\u7528\u7EC4\u5408\u7684\u65B9\u5F0F\u5728\u8FD9\u4E9B\u5B64\u5C9B\u4E4B\u95F4\u5EFA\u7ACB\u5173\u8054\uFF0C\u5F62\u6210\u4E00\u4E2A\u6574\u4F53\u3002</p><p>Go \u8BED\u8A00\u4E3A\u652F\u6491\u7EC4\u5408\u7684\u8BBE\u8BA1\u63D0\u4F9B\u4E86\u7C7B\u578B\u5D4C\u5165\uFF08Type Embedding\uFF09\u3002\u901A\u8FC7\u7C7B\u578B\u5D4C\u5165\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u5DF2\u5B9E\u73B0\u7684\u529F\u80FD\u5D4C\u5165\u5230\u65B0\u7C7B\u578B\u4E2D\uFF0C\u4EE5\u5FEB\u901F\u6EE1\u8DB3\u65B0\u7C7B\u578B\u7684\u529F\u80FD\u9700\u6C42\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u6709\u70B9\u7C7B\u4F3C\u9762\u5411\u5BF9\u8C61\u8BED\u8A00\u4E2D\u7684 \u201C\u7EE7\u627F\u201D \u673A\u5236\uFF0C\u4F46\u5728\u539F\u7406\u4E0A\u5B8C\u5168\u4E0D\u540C\uFF0C\u8FD9\u662F\u4E00\u79CD Go \u8BBE\u8BA1\u8005\u4EEC\u7CBE\u5FC3\u8BBE\u8BA1\u7684 \u201C\u8BED\u6CD5\u7CD6\u201D\u3002</p><p>\u88AB\u5D4C\u5165\u7684\u7C7B\u578B\u548C\u65B0\u7C7B\u578B\u4E24\u8005\u4E4B\u95F4\u6CA1\u6709\u4EFB\u4F55\u5173\u7CFB\uFF0C\u751A\u81F3\u76F8\u4E92\u5B8C\u5168\u4E0D\u77E5\u9053\u5BF9\u65B9\u7684\u5B58\u5728\uFF0C\u6CA1\u6709\u9762\u5411\u5BF9\u8C61\u8BED\u8A00\u4E2D\u7684\u90A3\u79CD\u7236\u7C7B\u3001\u5B50\u7C7B\u7684\u5173\u7CFB\uFF0C\u4EE5\u53CA\u5411\u4E0A\u3001\u5411\u4E0B\u8F6C\u578B\uFF08Type Casting\uFF09\u3002\u901A\u8FC7\u65B0\u7C7B\u578B\u5B9E\u4F8B\u8C03\u7528\u65B9\u6CD5\u65F6\uFF0C\u65B9\u6CD5\u7684\u5339\u914D\u4E3B\u8981\u53D6\u51B3\u4E8E\u65B9\u6CD5\u540D\u5B57\uFF0C\u800C\u4E0D\u662F\u7C7B\u578B\u3002\u8FD9\u79CD\u7EC4\u5408\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u79F0\u4E4B\u4E3A\u5782\u76F4\u7EC4\u5408\uFF0C\u5373\u901A\u8FC7\u7C7B\u578B\u5D4C\u5165\uFF0C\u5FEB\u901F\u8BA9\u4E00\u4E2A\u65B0\u7C7B\u578B \u201C\u590D\u7528\u201D \u5176\u4ED6\u7C7B\u578B\u5DF2\u7ECF\u5B9E\u73B0\u7684\u80FD\u529B\uFF0C\u5B9E\u73B0\u529F\u80FD\u7684\u5782\u76F4\u6269\u5C55\u3002</p><p>\u4E0B\u9762\u662F Go \u6807\u51C6\u5E93\u4E2D\u7684\u4E00\u6BB5\u4F7F\u7528\u7C7B\u578B\u5D4C\u5165\u7EC4\u5408\u65B9\u5F0F\u7684\u4EE3\u7801\u6BB5\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// $GOROOT/src/sync/pool.go</span></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">poolLocal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    private </span><span style="color:#89DDFF;">interface{}</span><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">    shared  </span><span style="color:#89DDFF;">[]interface{}</span></span>
<span class="line"><span style="color:#A6ACCD;">    Mutex               </span></span>
<span class="line"><span style="color:#A6ACCD;">    pad     </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">128</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">byte</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4EE3\u7801\u6BB5\u4E2D\uFF0C\u6211\u4EEC\u5728 poolLocal \u8FD9\u4E2A\u7ED3\u6784\u4F53\u7C7B\u578B\u4E2D\u5D4C\u5165\u7C7B\u578B Mutex\uFF0C\u8FD9\u4F7F\u5F97 poolLocal \u8FD9\u4E2A\u7C7B\u578B\u5177\u6709\u4E92\u65A5\u540C\u6B65\u7684\u80FD\u529B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 poolLocal \u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u76F4\u63A5\u8C03\u7528 Mutex \u7C7B\u578B\u7684\u65B9\u6CD5 Lock \u6216 Unlock\u3002</p><p>\u53E6\u5916\uFF0C\u6211\u4EEC\u5728\u6807\u51C6\u5E93\u4E2D\u8FD8\u4F1A\u770B\u5230\u7C7B\u4F3C\u5982\u4E0B\u5B9A\u4E49\u63A5\u53E3\u7C7B\u578B\u7684\u4EE3\u7801\u6BB5\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// $GOROOT/src/io/io.go</span></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReadWriter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    Reader</span></span>
<span class="line"><span style="color:#A6ACCD;">    Writer</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\uFF0C\u6807\u51C6\u5E93\u901A\u8FC7\u5D4C\u5165\u63A5\u53E3\u7C7B\u578B\u7684\u65B9\u5F0F\u6765\u5B9E\u73B0\u63A5\u53E3\u884C\u4E3A\u7684\u805A\u5408\uFF0C\u7EC4\u6210\u5927\u63A5\u53E3\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u5728\u6807\u51C6\u5E93\u4E2D\u5C24\u4E3A\u5E38\u7528\uFF0C\u5E76\u4E14\u5DF2\u7ECF\u6210\u4E3A Go \u8BED\u8A00\u7684\u4E00\u79CD\u60EF\u7528\u6CD5\u3002</p><p>\u5782\u76F4\u7EC4\u5408\u672C\u8D28\u4E0A\u662F\u4E00\u79CD \u201C\u80FD\u529B\u7EE7\u627F\u201D\uFF0C\u91C7\u7528\u5D4C\u5165\u65B9\u5F0F\u5B9A\u4E49\u7684\u65B0\u7C7B\u578B\u7EE7\u627F\u5D4C\u5165\u7C7B\u578B\u7684\u80FD\u529B\u3002Go \u8FD8\u6709\u4E00\u79CD\u5E38\u89C1\u7684\u7EC4\u5408\u65B9\u5F0F\uFF0C\u53EB\u6C34\u5E73\u7EC4\u5408\u3002\u548C\u5782\u76F4\u7EC4\u5408\u7684\u80FD\u529B\u7EE7\u627F\u4E0D\u540C\uFF0C\u6C34\u5E73\u7EC4\u5408\u662F\u4E00\u79CD\u80FD\u529B\u59D4\u6258\uFF08Delegate\uFF09\uFF0C\u6211\u4EEC\u901A\u5E38\u4F7F\u7528\u63A5\u53E3\u7C7B\u578B\u6765\u5B9E\u73B0\u6C34\u5E73\u7EC4\u5408\u3002</p><p>Go \u8BED\u8A00\u4E2D\u7684\u63A5\u53E3\u662F\u4E00\u4E2A\u521B\u5EFA\u8BBE\u8BA1\uFF0C\u5B83\u77E5\u8BC6\u65B9\u6CD5\u96C6\u5408\uFF0C\u5E76\u4E14\u5B83\u4E0E\u5B9E\u73B0\u8005\u4E4B\u95F4\u7684\u5173\u7CFB\u65E0\u9700\u901A\u8FC7\u663E\u5F0F\u5173\u952E\u5B57\u4FEE\u9970\uFF0C\u5B83\u8BA9\u7A0B\u5E8F\u5185\u90E8\u5404\u90E8\u5206\u4E4B\u95F4\u7684\u8026\u5408\u964D\u81F3\u6700\u4F4E\uFF0C\u540C\u65F6\u5B83\u4E5F\u662F\u8FDE\u63A5\u7A0B\u5E8F\u5404\u4E2A\u90E8\u5206\u4E4B\u95F4\u7684 \u201C\u7EBD\u5E26\u201D\u3002</p><p>\u6C34\u5E73\u7EC4\u5408\u7684\u6A21\u5F0F\u6709\u5F88\u591A\uFF0C\u6BD4\u5982\u4E00\u79CD\u5E38\u89C1\u65B9\u6CD5\u5C31\u662F\uFF0C\u901A\u8FC7\u63A5\u53D7\u63A5\u53E3\u7C7B\u578B\u53C2\u6570\u7684\u666E\u901A\u51FD\u6570\u8FDB\u884C\u7EC4\u5408\uFF0C\u5982\u4EE5\u4E0B\u4EE3\u7801\u6240\u793A\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// $GOROOT/src/io/ioutil/ioutil.go</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ReadAll</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">r io</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Reader</span><span style="color:#89DDFF;">)([]</span><span style="color:#C792EA;">byte</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// $GOROOT/src/io/io.go</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Copy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dst Writer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> src Reader</span><span style="color:#89DDFF;">)(</span><span style="color:#A6ACCD;">written </span><span style="color:#C792EA;">int64</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u51FD\u6570 ReadAll \u901A\u8FC7 io.Reader \u8FD9\u4E2A\u63A5\u53E3\uFF0C\u5C06 io.Reader \u7684\u5B9E\u73B0\u4E0E ReadAll \u6240\u5728\u7684\u5305\u4F4E\u8026\u5408\u5730\u6C34\u5E73\u7EC4\u5408\u5728\u4E00\u8D77\uFF0C\u4ECE\u800C\u8FBE\u5230\u4ECE\u4EFB\u610F\u5B9E\u73B0 io.Reader \u7684\u6570\u636E\u6E90\u8BFB\u53D6\u6240\u6709\u6570\u636E\u7684\u76EE\u7684\u3002\u7C7B\u4F3C\u7684\u6C34\u5E73\u7EC4\u5408 \u201C\u6A21\u5F0F\u201D \u8FD8\u6709\u70B9\u7F00\u5668\u3001\u4E2D\u95F4\u4EF6\u7B49\u3002</p><p>\u6B64\u5916\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u5C06 Go \u8BED\u8A00\u5185\u7F6E\u7684\u5E76\u53D1\u80FD\u529B\u8FDB\u884C\u7075\u6D3B\u7EC4\u5408\u4EE5\u5B9E\u73B0\uFF0C\u6BD4\u5982\uFF0C\u901A\u8FC7 goroutine + channel \u7684\u7EC4\u5408\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u7C7B\u4F3C Unix Pipe \u7684\u80FD\u529B\u3002</p><p>\u603B\u4E4B\uFF0C\u7EC4\u5408\u539F\u5219\u7684\u5E94\u7528\u5B9E\u8D28\u4E0A\u662F\u5851\u9020 Go \u7A0B\u5E8F\u7684\u9AA8\u67B6\u7ED3\u6784\u3002\u7C7B\u578B\u5D4C\u5165\u4E3A\u7C7B\u578B\u63D0\u4F9B\u4E86\u5782\u76F4\u6269\u5C55\u80FD\u529B\uFF0C\u800C\u63A5\u53E3\u662F\u6C34\u5E73\u7EC4\u5408\u7684\u5173\u952E\uFF0C\u5B83\u597D\u6BD4\u7A0B\u5E8F\u808C\u4F53\u4E0A\u7684 \u201C\u5173\u8282\u201D\uFF0C\u7ED9\u4E88\u8FDE\u63A5 \u201C\u5173\u8282\u201D \u7684\u4E24\u4E2A\u90E8\u5206\u5404\u81EA \u201C\u81EA\u7531\u6D3B\u52A8\u201D \u7684\u80FD\u529B\uFF0C\u800C\u6574\u4F53\u4E0A\u53C8\u5B9E\u73B0\u67D0\u79CD\u529F\u80FD\u3002\u5E76\u4E14\uFF0C\u7EC4\u5408\u4E5F\u8BA9\u9075\u5FAA \u201C\u7B80\u5355\u201D \u539F\u5219\u7684 Go \u8BED\u8A00\uFF0C\u5728\u8868\u73B0\u529B\u4E0A\u4E1D\u6BEB\u4E0D\u900A\u8272\u4E8E\u5176\u4ED6\u590D\u6742\u7684\u4E3B\u6D41\u7F16\u7A0B\u8BED\u8A00\u3002</p><h4 id="\u5E76\u53D1" tabindex="-1">\u5E76\u53D1 <a class="header-anchor" href="#\u5E76\u53D1" aria-hidden="true">#</a></h4><p>\u201C\u5E76\u53D1\u201D \u8FD9\u4E2A\u8BBE\u8BA1\u54F2\u5B66\u7684\u51FA\u73B0\u4E5F\u6709\u6709\u5B83\u7684\u80CC\u666F\uFF0CCPU \u90FD\u662F\u9760\u63D0\u9AD8\u4E3B\u9891\u6765\u6539\u8FDB\u6027\u80FD\u7684\uFF0C\u4F46\u662F\u8FD9\u4E2A\u505A\u6CD5\u5DF2\u7ECF\u9047\u5230\u74F6\u9888\u3002\u4E3B\u9891\u63D0\u9AD8\u5BFC\u81F4 CPU \u7684\u529F\u8017\u548C\u53D1\u70ED\u91CF\u5267\u589E\uFF0C\u53CD\u8FC7\u6765\u5236\u7EA6 CPU \u6027\u80FD\u7684\u8FDB\u4E00\u6B65\u63D0\u9AD8\u30022007 \u5E74\u5F00\u59CB\uFF0C\u5904\u7406\u5668\u5382\u5546\u7684\u7ADE\u4E89\u7126\u70B9\u4ECE\u4E3B\u9891\u8F6C\u5411\u4E86\u591A\u6838\u3002</p><p>\u5728\u8FD9\u79CD\u5927\u80CC\u666F\u4E0B\uFF0CGo \u7684\u8BBE\u8BA1\u8005\u5728\u51B3\u5B9A\u521B\u5EFA\u4E00\u95E8\u65B0\u8BED\u8A00\u7684\u65F6\u5019\uFF0C\u679C\u65AD\u5C06\u9762\u5411\u591A\u6838\u3001\u539F\u751F\u652F\u6301\u5E76\u53D1\u4F5C\u4E3A\u65B0\u8BED\u8A00\u7684\u8BBE\u8BA1\u539F\u5219\u4E4B\u4E00\u3002\u5E76\u4E14\uFF0CGo \u653E\u5F03\u4E86\u4F20\u7EDF\u7684\u57FA\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u7EBF\u7A0B\u7684\u5E76\u53D1\u6A21\u578B\uFF0C\u91C7\u7528\u7528\u6237\u5C42\u8F7B\u91CF\u7EA7\u7EBF\u7A0B\uFF0CGo \u5C06\u4E4B\u79F0\u4E4B\u4E3A goroutine\u3002</p><p>goroutine \u5360\u7528\u7684\u8D44\u6E90\u975E\u5E38\u5C0F\uFF0CGo \u8FD0\u884C\u65F6\u9ED8\u8BA4\u4E3A\u6BCF\u4E2A goroutine \u5206\u914D\u7684\u5360\u7A7A\u95F4\u4EC5 2 KB\u3002goroutine \u8C03\u5EA6\u7684\u5207\u6362\u4E5F\u4E0D\u7528\u9677\u5165\uFF08trap\uFF09\u64CD\u4F5C\u7CFB\u7EDF\u5185\u6838\u5C42\u5B8C\u6210\uFF0C\u4EE3\u4EF7\u5F88\u4F4E\u3002\u56E0\u6B64\uFF0C\u4E00\u4E2A Go \u7A0B\u5E8F\u4E2D\u53EF\u4EE5\u521B\u5EFA\u6210\u5343\u4E0A\u4E07\u4E2A\u5E76\u53D1\u7684 goroutine\u3002\u800C\u4E14\uFF0C\u6240\u6709\u7684 Go \u4EE3\u7801\u90FD\u5728 goroutine \u4E2D\u6267\u884C\uFF0C\u54EA\u6015\u662F go \u8FD0\u884C\u65F6\u7684\u4EE3\u7801\u4E5F\u4E0D\u4F8B\u5916\u3002</p><p>\u5728\u63D0\u4F9B\u4E86\u5F00\u9500\u8F83\u4F4E\u7684 goroutine \u7684\u540C\u65F6\uFF0CGo \u8FD8\u5728\u8BED\u8A00\u5C42\u9762\u4E0A\u5185\u7F6E\u4E86\u8F85\u52A9\u5E76\u53D1\u8BBE\u8BA1\u7684\u539F\u8BED\uFF1Achannel \u548C select\u3002\u5F00\u53D1\u8005\u53EF\u4EE5\u901A\u8FC7\u8BED\u8A00\u5185\u7F6E\u7684 channel \u4F20\u9012\u6D88\u606F\u6216\u5B9E\u73B0\u540C\u6B65\uFF0C\u5E76\u901A\u8FC7 select \u5B9E\u73B0\u591A\u8DEF channel \u7684\u5E76\u53D1\u63A7\u5236\u3002\u76F8\u8F83\u4E8E\u4F20\u7EDF\u590D\u6742\u7684\u7EBF\u7A0B\u5E76\u53D1\u6A21\u578B\uFF0CGo \u4E0E\u5E76\u53D1\u7684\u539F\u751F\u652F\u6301\u5C06\u5927\u5927\u964D\u4F4E\u5F00\u53D1\u4EBA\u5458\u5728\u5F00\u53D1\u5E76\u53D1\u7A0B\u5E8F\u65F6\u7684\u5FC3\u667A\u8D1F\u62C5\u3002</p><p>\u6B64\u5916\uFF0C\u5E76\u53D1\u7684\u8BBE\u8BA1\u54F2\u5B66\u4E0D\u4EC5\u4EC5\u8BA9 Go \u5728\u8BED\u6CD5\u5C42\u9762\u63D0\u4F9B\u4E86\u5E76\u53D1\u539F\u8BED\u652F\u6301\uFF0C\u5BF9 Go \u5E94\u7528\u7A0B\u5E8F\u8BBE\u8BA1\u7684\u5F71\u54CD\u66F4\u4E3A\u91CD\u8981\u3002\u5E76\u53D1\u662F\u4E00\u79CD\u7A0B\u5E8F\u7ED3\u6784\u8BBE\u8BA1\u7684\u65B9\u6CD5\uFF0C\u4F7F\u5F97\u5E76\u884C\u6210\u4E3A\u53EF\u80FD\u3002</p><p>\u91C7\u7528\u5E76\u53D1\u65B9\u6848\u8BBE\u8BA1\u7684\u7A0B\u5E8F\u5728\u5355\u6838\u5904\u7406\u5668\u4E5F\u662F\u53EF\u4EE5\u6B63\u5E38\u8FD0\u884C\u7684\uFF0C\u4E5F\u8BB8\u5728\u5355\u6838\u4E0A\u7684\u5904\u7406\u6027\u80FD\u53EF\u80FD\u4E0D\u5982\u975E\u5E76\u53D1\u65B9\u6848\u3002\u4F46\u968F\u7740\u5904\u7406\u5668\u6838\u6570\u7684\u589E\u591A\uFF0C\u5E76\u53D1\u65B9\u6848\u53EF\u4EE5\u81EA\u7136\u5730\u63D0\u9AD8\u5904\u7406\u6027\u80FD\u3002</p><p>\u800C\u4E14\uFF0C\u5E76\u53D1\u4E0E\u7EC4\u5408\u7684\u54F2\u5B66\u662F\u4E00\u8109\u76F8\u627F\u7684\uFF0C\u5E76\u53D1\u662F\u4E00\u4E2A\u66F4\u5927\u7684\u7EC4\u5408\u6982\u5FF5\uFF0C\u5B83\u5728\u7A0B\u5E8F\u8BBE\u8BA1\u7684\u5168\u5C40\u5C42\u9762\u5BF9\u7A0B\u5E8F\u8FDB\u884C\u62C6\u89E3\u7EC4\u5408\uFF0C\u518D\u6620\u5C04\u5230\u7A0B\u5E8F\u6267\u884C\u5C42\u9762\u4E0A\uFF1Agoroutines \u5404\u81EA\u6267\u884C\u7279\u5B9A\u7684\u5DE5\u4F5C\uFF0C\u901A\u8FC7 channel + select \u5C06 goroutines \u7EC4\u5408\u8FDE\u63A5\u8D77\u6765\u3002\u5E76\u53D1\u7684\u5B58\u5728\u9F13\u52B1\u7A0B\u5E8F\u5458\u5728\u7A0B\u5E8F\u8BBE\u8BA1\u65F6\u8FDB\u884C\u72EC\u7ACB\u8BA1\u7B97\u7684\u5206\u89E3\uFF0C\u800C\u5BF9\u5E76\u53D1\u7684\u539F\u751F\u652F\u6301\u8BA9 Go \u8BED\u8A00\u66F4\u9002\u5408\u73B0\u4EE3\u8BA1\u7B97\u73AF\u5883\u3002</p><h4 id="\u9762\u5411\u5DE5\u7A0B" tabindex="-1">\u9762\u5411\u5DE5\u7A0B <a class="header-anchor" href="#\u9762\u5411\u5DE5\u7A0B" aria-hidden="true">#</a></h4><p>Go \u8BED\u8A00\u8BBE\u8BA1\u7684\u521D\u8877\uFF0C\u5C31\u662F\u9762\u5411\u89E3\u51B3\u771F\u5B9E\u4E16\u754C\u4E2D Google \u5185\u90E8\u5927\u89C4\u6A21\u8F6F\u4EF6\u5F00\u53D1\u4E2D\u5B58\u5728\u7684\u5404\u79CD\u95EE\u9898\uFF0C\u4E3A\u8FD9\u4E9B\u95EE\u9898\u63D0\u4F9B\u7B54\u6848\uFF0C\u4F8B\u5982\uFF1A\u7A0B\u5E8F\u6784\u5EFA\u6162\u3001\u4F9D\u8D56\u7BA1\u7406\u5931\u63A7\u3001\u4EE3\u7801\u96BE\u4E8E\u7406\u89E3\u3001\u8DE8\u8BED\u8A00\u6784\u5EFA\u96BE\u7B49\u3002</p><p>Go\u8BED\u8A00\u6700\u521D\u8BBE\u8BA1\u9636\u6BB5\u5C31\u5C06\u89E3\u51B3\u5DE5\u7A0B\u95EE\u9898\u4F5C\u4E3A Go \u7684\u8BBE\u8BA1\u539F\u5219\u4E4B\u4E00\uFF0C\u53BB\u8003\u8651 Go \u8BED\u6CD5\u3001\u5DE5\u5177\u94FE\u4E0E\u6807\u51C6\u5E93\u7684\u8BBE\u8BA1\uFF0C\u8FD9\u4E5F\u662F Go \u4E0E\u5176\u4ED6\u504F\u5B66\u9662\u6D3E\u3001\u504F\u7814\u7A76\u578B\u7684\u7F16\u7A0B\u8BED\u8A00\u5728\u8BBE\u8BA1\u601D\u8DEF\u4E0A\u7684\u4E00\u4E2A\u91CD\u8981\u5DEE\u5F02\u3002</p><p>\u8BED\u6CD5\u662F\u7F16\u7A0B\u8BED\u8A00\u7684\u7528\u6237\u63A5\u53E3\uFF0C\u5B83\u76F4\u63A5\u5F71\u54CD\u5F00\u53D1\u4EBA\u5458\u5BF9\u8FD9\u95E8\u8BED\u8A00\u7684\u4F7F\u7528\u4F53\u9A8C\u3002\u5728\u9762\u5411\u5DE5\u7A0B\u8BBE\u8BA1\u54F2\u5B66\u7684\u9A71\u4F7F\u4E0B\uFF0CGo \u5728\u8BED\u6CD5\u8BBE\u8BA1\u7EC6\u8282\u4E0A\u505A\u4E86\u7CBE\u5FC3\u6253\u78E8\u3002</p><ul><li>\u91CD\u65B0\u8BBE\u8BA1\u7F16\u8BD1\u5355\u5143\u548C\u76EE\u6807\u6587\u4EF6\u683C\u5F0F\uFF0C\u5B9E\u73B0 Go \u6E90\u7801\u5FEB\u901F\u6784\u5EFA\uFF0C\u4F7F\u5927\u5DE5\u7A0B\u7684\u6784\u5EFA\u65F6\u95F4\u7F29\u77ED\u5230\u7C7B\u4F3C\u52A8\u6001\u8BED\u8A00\u7684\u4EA4\u4E92\u5F0F\u89E3\u91CA\u7684\u7F16\u8BD1\u901F\u5EA6\uFF1B</li><li>\u5982\u679C\u6E90\u6587\u4EF6\u5BFC\u5165\u5B83\u4E0D\u4F7F\u7528\u7684\u5305\uFF0C\u7A0B\u5E8F\u5C06\u65E0\u6CD5\u7F16\u8BD1\u3002\u8FD9\u53EF\u4EE5\u5145\u5206\u4FDD\u8BC1\u4EFB\u4F55 Go \u7A0B\u5E8F\u7684\u4F9D\u8D56\u6811\u662F\u7CBE\u786E\u7684\uFF0C\u4E5F\u53EF\u4EE5\u4FDD\u8BC1\u6784\u5EFA\u7A0B\u5E8F\u65F6\u4E0D\u4F1A\u7F16\u8BD1\u989D\u5916\u7684\u4EE3\u7801\uFF0C\u4ECE\u800C\u6700\u5927\u9650\u5EA6\u5730\u7F29\u77ED\u7F16\u8BD1\u65F6\u95F4\uFF1B</li><li>\u53BB\u9664\u5305\u7684\u5FAA\u73AF\u4F9D\u8D56\uFF0C\u5FAA\u73AF\u4F9D\u8D56\u4F1A\u5728\u5927\u89C4\u6A21\u7684\u4EE3\u7801\u4E2D\u5F15\u53D1\u95EE\u9898\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u8981\u6C42\u7F16\u8BD1\u5668\u540C\u65F6\u5904\u7406\u66F4\u5927\u7684\u6E90\u6587\u4EF6\u96C6\uFF0C\u8FD9\u4F1A\u51CF\u6162\u589E\u91CF\u6784\u5EFA\uFF1B</li><li>\u5305\u8DEF\u5F84\u662F\u552F\u4E00\u7684\uFF0C\u5305\u540D\u4E0D\u5FC5\u552F\u4E00\u3002\u5BFC\u5165\u8DEF\u5F84\u5FC5\u987B\u552F\u4E00\u6807\u8BC6\u8981\u5BFC\u5165\u7684\u5305\uFF0C\u540D\u79F0\u53EA\u662F\u5305\u7684\u4F7F\u7528\u8005\u5982\u4F55\u5F15\u7528\u5176\u5185\u5BB9\u7684\u7EA6\u5B9A\u3002\u201C\u5305\u540D\u79F0\u4E0D\u5FC5\u662F\u552F\u4E00\u7684\u201D \u8FD9\u4E2A\u7EA6\u5B9A\uFF0C\u53EF\u4EE5\u5927\u5927\u964D\u4F4E\u5F00\u53D1\u4EBA\u5458\u7ED9\u5305\u8D77\u552F\u4E00\u540D\u5B57\u7684\u5FC3\u667A\u8D1F\u62C5\uFF1B</li><li>\u4E0D\u652F\u6301\u9ED8\u8BA4\u51FD\u6570\u53C2\u6570\u3002\u56E0\u4E3A\u5728\u89C4\u6A21\u5DE5\u7A0B\u4E2D\uFF0C\u5F88\u591A\u5F00\u53D1\u8005\u5229\u7528\u9ED8\u8BA4\u51FD\u6570\u53C2\u6570\u673A\u5236\uFF0C\u5411\u51FD\u6570\u6DFB\u52A0\u8FC7\u591A\u7684\u53C2\u6570\u4EE5\u5F25\u8865\u51FD\u6570 API \u7684\u8BBE\u8BA1\u7F3A\u9677\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u51FD\u6570\u62E5\u6709\u592A\u591A\u7684\u53C2\u6570\uFF0C\u964D\u4F4E\u6E05\u6670\u5EA6\u548C\u53EF\u8BFB\u6027\uFF1B</li><li>\u589E\u52A0\u7C7B\u578B\u522B\u540D\uFF08type alias\uFF09\uFF0C\u652F\u6301\u5927\u89C4\u6A21\u4EE3\u7801\u5E93\u91CD\u6784\u3002</li></ul><p>\u5728\u6807\u51C6\u5E93\u65B9\u9762\uFF0CGo \u8BED\u8A00\u6807\u51C6\u5E93\u529F\u80FD\u4E30\u5BCC\uFF0C\u591A\u6570\u529F\u80FD\u4E0D\u9700\u8981\u4F9D\u8D56\u5916\u90E8\u7684\u7B2C\u4E09\u65B9\u5305\u6216\u5E93\u3002Go \u5728\u6807\u51C6\u5E93\u4E2D\u63D0\u4F9B\u4E86\u5404\u79CD\u9AD8\u8D28\u91CF\u4E14\u6027\u80FD\u4F18\u826F\u7684\u529F\u80FD\u5305\uFF0C\u5176\u4E2D net/http\u3001crypto\u3001encoding \u7B49\u5305\u5145\u5206\u8FCE\u5408\u4E86\u4E91\u539F\u751F\u65F6\u4EE3\u7684\u5173\u4E8E API/RPC Web \u670D\u52A1\u5668\u7684\u6784\u5EFA\u9700\u6C42\uFF0CGo \u5F00\u53D1\u8005\u53EF\u4EE5\u76F4\u63A5\u57FA\u4E8E\u6807\u51C6\u5E93\u63D0\u4F9B\u7684\u5305\u5B9E\u73B0\u4E00\u4E2A\u6EE1\u8DB3\u751F\u4EA7\u8981\u6C42\u7684 API \u670D\u52A1\uFF0C\u4ECE\u800C\u51CF\u5C11\u5BF9\u5916\u90E8\u7B2C\u4E09\u65B9\u5305\u6216\u5E93\u7684\u4F9D\u8D56\uFF0C\u964D\u4F4E\u5DE5\u7A0B\u4EE3\u7801\u4F9D\u8D56\u7BA1\u7406\u7684\u590D\u6742\u6027\uFF0C\u964D\u4F4E\u5F00\u53D1\u4EBA\u5458\u5B66\u4E60\u7B2C\u4E09\u65B9\u5E93\u7684\u5FC3\u7406\u8D1F\u62C5\u3002</p><p>\u9664\u6B64\u4E4B\u5916\uFF0CGo \u8BED\u8A00\u8FD8\u63D0\u4F9B\u4E86\u5B8C\u5584\u7684\u5DE5\u5177\u94FE\u652F\u6301\uFF0C\u6DB5\u76D6\u4E86\u7F16\u8BD1\u6784\u5EFA\u3001\u4EE3\u7801\u683C\u5F0F\u5316\u3001\u5305\u4F9D\u8D56\u7BA1\u7406\u3001\u9759\u6001\u4EE3\u7801\u68C0\u67E5\u3001\u6D4B\u8BD5\u3001\u6587\u6863\u751F\u6210\u4E0E\u67E5\u770B\u3001\u6027\u80FD\u5256\u6790\u3001\u8BED\u8A00\u670D\u52A1\u5668\u3001\u8FD0\u884C\u65F6\u7A0B\u5E8F\u8DDF\u8E2A\u7B49\u65B9\u65B9\u9762\u9762\u3002</p><p>\u503C\u5F97\u91CD\u70B9\u4ECB\u7ECD\u7684\u662F gofmt\uFF0C\u5B83\u53EF\u4EE5\u7EDF\u4E00 Go \u8BED\u8A00\u7684\u4EE3\u7801\u98CE\u683C\uFF0C\u4F7F\u5F00\u53D1\u8005\u53EF\u4EE5\u66F4\u52A0\u4E13\u6CE8\u4E8E\u4E1A\u52A1\u3002\u540C\u65F6\uFF0C\u76F8\u540C\u7684\u4EE3\u7801\u98CE\u683C\u53EF\u4EE5\u8BA9\u5F00\u53D1\u8005\u7684\u4EE3\u7801\u9605\u8BFB\u3001\u7406\u89E3\u548C\u8BC4\u5BA1\u5DE5\u4F5C\u53D8\u5F97\u66F4\u52A0\u5BB9\u6613\u3002Go \u7684\u8FD9\u79CD\u7EDF\u4E00\u4EE3\u7801\u98CE\u683C\u601D\u8DEF\u4E5F\u5F00\u59CB\u5F71\u54CD\u540E\u7EED\u65B0\u7F16\u7A0B\u8BED\u8A00\u7684\u8BBE\u8BA1\uFF0C\u5E76\u4E14\u4E00\u4E9B\u73B0\u6709\u7684\u4E3B\u6D41\u7F16\u7A0B\u8BED\u8A00\u4E5F\u5728\u501F\u9274 Go \u7684\u4E00\u4E9B\u8BBE\u8BA1\u3002</p><p>\u5728\u63D0\u4F9B\u4E30\u5BCC\u5DE5\u5177\u94FE\u7684\u540C\u65F6\uFF0CGo \u5728\u6807\u51C6\u5E93\u4E2D\u8FD8\u63D0\u4F9B\u4E86\u5B98\u65B9\u7684\u8BCD\u6CD5\u5206\u6790\u5668\u3001\u8BED\u6CD5\u89E3\u6790\u5668\u548C\u7C7B\u578B\u68C0\u67E5\u5668\u76F8\u5173\u5305\uFF0C\u5F00\u53D1\u8005\u53EF\u4EE5\u57FA\u4E8E\u8FD9\u4E9B\u5305\u5FEB\u901F\u6784\u5EFA\u5E76\u6269\u5C55 Go \u5DE5\u5177\u94FE\u3002</p><h3 id="\u603B\u7ED3-1" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-1" aria-hidden="true">#</a></h3><p>\u8FD9\u7BC7\u6587\u7AE0\u6211\u4EEC\u4E86\u89E3\u4E86 Go \u8BED\u8A00\u7684\u8BBE\u8BA1\u54F2\u5B66\uFF1A\u7B80\u5355\u3001\u663E\u5F0F\u3001\u7EC4\u5408\u3001\u5E76\u53D1\u548C\u9762\u5411\u5DE5\u7A0B\u3002</p><ul><li>\u7B80\u5355\u662F\u6307 Go \u8BED\u8A00\u7279\u6027\u59CB\u7EC8\u4FDD\u6301\u5728\u5C11\u4E14\u8DB3\u591F\u7684\u6C34\u5E73\uFF0C\u4E0D\u8D70\u8BED\u8A00\u7279\u6027\u878D\u5408\u7684\u9053\u8DEF\uFF0C\u4F46\u53C8\u4E0D\u7F3A\u4E4F\u751F\u4EA7\u529B\u3002\u7B80\u5355\u662F Go \u751F\u4EA7\u529B\u7684\u6E90\u6CC9\uFF0C\u4E5F\u662F Go \u5BF9\u5F00\u53D1\u8005\u7684\u6700\u5927\u5438\u5F15\u529B\uFF1B</li><li>\u663E\u5F0F\u662F\u6307\u4EFB\u4F55\u4EE3\u7801\u884C\u4E3A\u90FD\u9700\u8981\u5F00\u53D1\u8005\u660E\u786E\u77E5\u6653\uFF0C\u4E0D\u5B58\u5728\u56E0\u9690\u5F0F\u8F6C\u578B\u5BFC\u81F4\u53EF\u7EF4\u62A4\u6027\u964D\u4F4E\u548C\u4E0D\u5B89\u5168\u7684\u7ED3\u679C\uFF1B</li><li>\u7EC4\u5408\u662F\u6784\u5EFA Go \u7A0B\u5E8F\u9AA8\u67B6\u7684\u4E3B\u8981\u65B9\u5F0F\uFF0C\u5B83\u53EF\u4EE5\u5927\u5E45\u5EA6\u964D\u4F4E\u7A0B\u5E8F\u5143\u7D20\u95F4\u7684\u8026\u5408\uFF0C\u63D0\u9AD8\u7A0B\u5E8F\u7684\u53EF\u6269\u5C55\u6027\u548C\u7075\u6D3B\u6027\uFF1B</li><li>\u5E76\u53D1\u662F Go \u628A\u63E1 CPU \u5411\u591A\u6838\u65B9\u5411\u53D1\u5C55\u8D8B\u52BF\u7684\u4EA7\u7269\uFF0C\u53EF\u4EE5\u8BA9\u90A3\u4E2A\u5F00\u53D1\u4EBA\u5458\u66F4\u5BB9\u6613\u5199\u51FA\u5145\u5206\u5229\u7528\u7CFB\u7EDF\u8D44\u6E90\u3001\u652F\u6301\u6027\u80FD\u968F CPU \u6838\u6570\u589E\u52A0\u800C\u81EA\u7136\u63D0\u5347\u7684\u5E94\u7528\u7A0B\u5E8F\uFF1B</li><li>\u9762\u5411\u8FC7\u7A0B\u662F Go \u8BED\u8A00\u5728\u8BED\u8A00\u8BBE\u8BA1\u4E0A\u7684\u4E00\u4E2A\u91CD\u5927\u521B\u65B0\uFF0C\u5B83\u5C06\u8BED\u8A00\u8981\u89E3\u51B3\u7684\u95EE\u9898\u57DF\u6269\u5C55\u5230\u90A3\u4E9B\u539F\u672C\u5E76\u4E0D\u662F\u7531\u7F16\u7A0B\u8BED\u8A00\u53BB\u89E3\u51B3\u7684\u9886\u57DF\uFF0C\u4ECE\u800C\u8986\u76D6\u66F4\u591A\u5F00\u53D1\u8005\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u7684 \u201C\u75DB\u70B9\u201D\uFF0C\u4E3A\u5F00\u53D1\u8005\u63D0\u4F9B\u66F4\u597D\u7684\u4F7F\u7528\u4F53\u9A8C\u3002</li></ul><h3 id="\u6280\u672F\u62D3\u5C55" tabindex="-1">\u6280\u672F\u62D3\u5C55 <a class="header-anchor" href="#\u6280\u672F\u62D3\u5C55" aria-hidden="true">#</a></h3><p><strong>\u5173\u4E8E \u201C\u7C7B\u578B\u522B\u540D\u201D \u7684\u6E10\u8FDB\u5F0F\u4EE3\u7801\u4FEE\u590D\uFF08Gradual code repair\uFF09</strong></p><p><a href="https://github.com/golang/proposal/blob/master/design/18130-type-alias.md" target="_blank" rel="noreferrer">https://github.com/golang/proposal/blob/master/design/18130-type-alias.md</a></p><p>\u5B83\u4E5F\u662F Go \u9762\u5411\u5DE5\u7A0B\u8BBE\u8BA1\u54F2\u5B66\u7684\u4F53\u73B0\uFF0C\u53E6\u5916 type alias \u5BF9\u57FA\u4E8E\u73B0\u6709\u5B9E\u73B0\u8FDB\u884C\u6269\u5C55\u5E76\u505A\u51FA\u65B0\u7684\u5C01\u88C5\u65B9\u9762\u4E5F\u6709 \u201C\u5947\u6548\u201D\u3002</p><h2 id="_03\u3001\u73AF\u5883\u914D\u7F6E" tabindex="-1">03\u3001\u73AF\u5883\u914D\u7F6E <a class="header-anchor" href="#_03\u3001\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a></h2><p>\u8FD9\u4E00\u7BC7\u6587\u7AE0\u4E3B\u8981\u4ECB\u7ECD\u5982\u4F55\u5B89\u88C5\u548C\u914D\u7F6E Go \u8BED\u8A00\u5F00\u53D1\u73AF\u5883\u3002</p><h3 id="\u9009\u62E9-go-\u7248\u672C" tabindex="-1">\u9009\u62E9 Go \u7248\u672C <a class="header-anchor" href="#\u9009\u62E9-go-\u7248\u672C" aria-hidden="true">#</a></h3><p>\u6311\u9009\u7248\u672C\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u770B Go \u8BED\u8A00\u7684\u7248\u672C\u53D1\u5E03\u7B56\u7565\u3002</p><p>Go \u56E2\u961F\u76EE\u524D\u5DF2\u7ECF\u5C06\u7248\u672C\u53D1\u5E03\u8282\u594F\u7A33\u5B9A\u5728\u6BCF\u5E74\u53D1\u5E03\u4E24\u6B21\u5927\u7248\u672C\uFF0C\u901A\u5E38\u662F\u4E8C\u6708\u4EFD\u548C\u516B\u6708\u4EFD\u3002Go \u56E2\u961F\u627F\u8BFA\u5BF9\u6700\u65B0\u7684\u4E24\u4E2A Go \u7A33\u5B9A\u5927\u7248\u672C\u63D0\u4F9B\u652F\u6301\uFF0C\u6BD4\u5982\u76EE\u524D\u7684\u6700\u65B0\u7684\u5927\u7248\u672C\u662F Go 1.19\uFF0C\u90A3\u4E48 Go \u56E2\u961F\u5C31\u4F1A\u4E3A Go 1.19 \u548C Go 1.18 \u7248\u672C\u63D0\u4F9B\u652F\u6301\u3002\u5982\u679C Go 1.20 \u7248\u672C\u53D1\u5E03\uFF0C\u90A3\u652F\u6301\u7684\u7248\u672C\u5C06\u7F16\u7A0B Go 1.20 \u548C Go 1.19\u3002\u652F\u6301\u7684\u8303\u56F4\u4E3B\u8981\u5305\u62EC\u4FEE\u590D\u7248\u672C\u4E2D\u5B58\u5728\u7684\u91CD\u8981\u95EE\u9898\u3001\u6587\u6863\u53D8\u66F4\u4EE5\u53CA\u5B89\u5168\u95EE\u9898\u66F4\u65B0\u7B49\u3002</p><p>\u57FA\u4E8E\u8FD9\u6837\u7684\u7248\u672C\u53D1\u5E03\u7B56\u7565\uFF0C\u6211\u4EEC\u5728\u9009\u62E9\u7248\u672C\u65F6\u53EF\u4EE5\u53C2\u8003\u8FD9\u51E0\u79CD\u601D\u8DEF\uFF1A</p><p>\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u6700\u65B0\u7248\u672C\u3002\u56E0\u4E3A Go \u56E2\u961F\u53D1\u5E03\u7684 Go \u8BED\u8A00\u7A33\u5B9A\u7248\u672C\u7684\u5E73\u5747\u8D28\u91CF\u4E00\u76F4\u662F\u5F88\u9AD8\u7684\uFF0C\u5F88\u5C11\u6709\u5F71\u54CD\u4F7F\u7528\u7684\u91CD\u5927 bug\u3002\u6211\u4EEC\u4E5F\u4E0D\u5FC5\u62C5\u5FC3\u65B0\u7248\u672C\u7684\u652F\u6301\u95EE\u9898\uFF0CGoogle \u7684\u81EA\u6709\u4EA7\u54C1\uFF0C\u6BD4\u5982 Google App Engine \u652F\u6301\u90FD\u4F1A\u5F88\u5FEB\uFF0C\u4E00\u822C\u5728 Go \u65B0\u7248\u672C\u53D1\u5E03\u4E0D\u4E45\u540E\uFF0CGAE \u4FBF\u4F1A\u652F\u6301\u6700\u65B0\u7248\u672C\u7684 Go\u3002</p><p>\u4F60\u8FD8\u53EF\u4EE5\u6839\u636E\u4E0D\u540C\u5B9E\u9645\u9879\u76EE\u9700\u8981\u6216\u5F00\u6E90\u793E\u533A\u7684\u60C5\u51B5\u4F7F\u7528\u4E0D\u540C\u7248\u672C\u3002</p><p>\u6709\u7684\u5F00\u6E90\u9879\u76EE\u91C7\u7EB3 Go \u56E2\u961F\u5EFA\u8BAE\uFF0C\u5728 Go \u6700\u65B0\u7248\u672C\u53D1\u5E03\u4E0D\u4E45\u5C31\u5C06\u5F53\u524D\u9879\u76EE\u7684 Go \u7F16\u8BD1\u5668\u5347\u7EA7\u5230\u6700\u65B0\u7248\uFF0C\u4F8B\u5982 kubernets \u9879\u76EE\uFF1B\u6709\u7684\u5F00\u6E90\u9879\u76EE\uFF0C\u4F8B\u5982 docker \u5219\u6BD4\u8F83\u8C28\u614E\uFF0C\u8FD9\u4E9B\u9879\u76EE\u53EF\u80FD\u4F1A\u4F7F\u7528\u4E24\u4E2A\u53D1\u5E03\u5468\u671F\u4E4B\u524D\u7684\u7248\u672C\u3002\u591A\u6570\u9879\u76EE\u5904\u4E8E\u4E24\u8005\u4E4B\u95F4\uFF0C\u4E5F\u5C31\u662F\u4F7F\u7528\u6B21\u65B0\u7248\uFF0C\u5373\u6700\u65B0\u7248\u672C\u4E4B\u524D\u7684\u90A3\u4E2A\u7248\u672C\u3002</p><p>\u56E0\u4E3A\u6211\u4EEC\u662F Go \u8BED\u8A00\u5B66\u4E60\uFF0C\u6240\u4EE5\u63A8\u8350\u76F4\u63A5\u4F7F\u7528 Go \u6700\u65B0\u53D1\u5E03\u7248\u3002\u8FD9\u6837\u6211\u4EEC\u53EF\u4EE5\u4F53\u9A8C\u5230 Go \u7684\u6700\u65B0\u8BED\u8A00\u7279\u6027\uFF0C\u5E94\u7528\u5230\u6807\u51C6\u5E93\u7684\u6700\u65B0 API \u4EE5\u53CA Go \u5DE5\u5177\u94FE\u7684\u6700\u65B0\u529F\u80FD\u3002</p><p>\u9009\u5B9A Go \u7248\u672C\u540E\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u5C31\u6765\u770B\u770B\u51E0\u79CD\u5E38\u89C1\u7684 Go \u5B89\u88C5\u65B9\u6CD5\u3002</p><h3 id="\u5B89\u88C5-go" tabindex="-1">\u5B89\u88C5 Go <a class="header-anchor" href="#\u5B89\u88C5-go" aria-hidden="true">#</a></h3><p>\u5728 Mac \u4E0A\u6211\u4EEC\u53EF\u4EE5\u5728\u56FE\u5F62\u754C\u9762\u7684\u5F15\u5BFC\u4E0B\u8FDB\u884C Go \u7684<a href="https://go.dev/dl/" target="_blank" rel="noreferrer">\u5B89\u88C5</a>\u3002</p><p>\u9996\u5148\u6211\u4EEC\u9700\u8981\u4E0B\u8F7D\u9002\u7528\u4E8E Mac \u7684 Go \u5B89\u88C5\u5305\uFF08\u8FD9\u91CC\u4EE5 arm \u4E3A\u4F8B\uFF09\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">wget -c https://go.dev/dl/go1.19.4.darwin-arm64.pkg</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5B89\u88C5\u5305\u4E0B\u8F7D\u5B8C\u6BD5\u540E\uFF0C\u53CC\u51FB\u5B89\u88C5\u5305\uFF0C\u5C31\u53EF\u4EE5\u6253\u5F00\u6807\u51C6\u7684 Mac \u8F6F\u4EF6\u5B89\u88C5\u754C\u9762\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><img src="`+e+`"><p>\u6309\u7167\u8F6F\u4EF6\u5B89\u88C5\u5411\u5BFC\u63D0\u793A\uFF0C\u4E00\u8DEF\u70B9\u51FB \u201C\u7EE7\u7EED\u201D\uFF0C\u6211\u4EEC\u4FBF\u53EF\u4EE5\u5B8C\u6210 Go \u5728 Mac \u4E0A\u7684\u5B89\u88C5\u3002</p><p>Mac \u4E0A\u7684 Go \u5B89\u88C5\u5305\u9ED8\u8BA4\u4E5F\u4F1A\u5C06 Go \u5B89\u88C5\u5230 /usr/local/go \u8DEF\u5F84\u4E0B\u9762\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u8981\u5728\u4EFB\u610F\u8DEF\u5F84\u4E0B\u4F7F\u7528 Go\uFF0C\u6211\u4EEC\u4E5F\u9700\u5C06\u8FD9\u4E2A\u8DEF\u5F84\u52A0\u5165\u5230\u7528\u6237\u7684\u73AF\u5883\u53D8\u91CF PATH \u4E2D\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">export PATH=$PATH:/usr/local/go/bin</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6700\u540E\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u901A\u8FC7 go version \u547D\u4EE4\u9A8C\u8BC1\u8FD9\u6B21\u5B89\u88C5\u662F\u5426\u6210\u529F\u3002\u9664\u6B64\u4E4B\u5916\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u4F7F\u7528 brew \u5B89\u88C5 Go\u3002</p><h3 id="\u914D\u7F6E-go" tabindex="-1">\u914D\u7F6E Go <a class="header-anchor" href="#\u914D\u7F6E-go" aria-hidden="true">#</a></h3><p>Go \u5728\u5B89\u88C5\u540E\u662F\u5F00\u7BB1\u5373\u7528\u7684\uFF0C\u8FD9\u4E5F\u610F\u5473\u7740\u6211\u4EEC\u5728\u4F7F\u7528 Go \u4E4B\u524D\u65E0\u9700\u505A\u4EFB\u4F55\u914D\u7F6E\u3002\u4F46\u4E3A\u4E86\u66F4\u597D\u5730\u4E86\u89E3\u548C\u5B66\u4E60 Go\uFF0C\u6211\u4EEC\u8FD8\u662F\u8981\u8BA4\u8BC6\u4E00\u4E9B Go \u81EA\u5E26\u7684\u5E38\u7528\u914D\u7F6E\u9879\u3002Go \u7684\u914D\u7F6E\u9879\u662F\u4EE5\u73AF\u5883\u53D8\u91CF\u7684\u5F62\u5F0F\u5B58\u5728\u7684\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u8FD9\u4E2A\u547D\u4EE4\u67E5\u770B Go \u7684\u8FD9\u4E9B\u914D\u7F6E\u9879\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go env</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E0B\u9762\u603B\u7ED3\u4E86\u4E00\u4E9B\u5E38\u7528\u914D\u7F6E\u9879\uFF1A</p><table><thead><tr><th>\u540D\u79F0</th><th>\u4F5C\u7528</th><th>\u503C</th></tr></thead><tbody><tr><td>GOARCH</td><td>\u7528\u4E8E\u6307\u793A Go \u7F16\u8BD1\u5668\u751F\u6210\u4EE3\u7801\u6240\u9488\u5BF9\u7684\u5E73\u53F0 CPU \u67B6\u6784</td><td>\u4E3B\u8981\u503C\u662F AMD64\u3001Arm \u7B49\uFF0C\u9ED8\u8BA4\u503C\u662F\u672C\u673A\u7684 CPU \u67B6\u6784</td></tr><tr><td>GOOS</td><td>\u7528\u4E8E\u6307\u793A Go \u7F16\u8BD1\u5668\u751F\u6210\u4EE3\u7801\u6240\u9488\u5BF9\u7684\u64CD\u4F5C\u7CFB\u7EDF</td><td>\u4E3B\u8981\u503C\u662F Linux\u3001Darwin\u3001Windows \u7B49\uFF0C\u9ED8\u8BA4\u503C\u662F\u672C\u673A\u7684\u64CD\u4F5C\u7CFB\u7EDF</td></tr><tr><td>GO111MODULE</td><td>\u5B83\u7684\u503C\u51B3\u5B9A\u5F53\u524D\u4F7F\u7528\u7684\u6784\u5EFA\u6A21\u5F0F\u662F\u4F20\u7EDF\u7684 GOPATH \u6A21\u5F0F\u8FD8\u662F\u65B0\u5F15\u5165\u7684 GO Module \u6A21\u5F0F</td><td>\u5728 Go 1.16 \u7248\u672C Go Module \u6784\u5EFA\u6A21\u5F0F\u9ED8\u8BA4\u5F00\u542F\uFF0C\u8BE5\u53D8\u91CF\u503C\u9ED8\u8BA4\u4E3A on\uFF0C\u6D4B\u8BD5 Go 1.19 \u7248\u672C\u9ED8\u8BA4\u4E3A \u201C\u201D</td></tr><tr><td>GOCACHE</td><td>\u7528\u4E8E\u6307\u793A\u5B58\u50A8\u6784\u5EFA\u7ED3\u679C\u7F13\u5B58\u7684\u8DEF\u5F84\uFF0C\u8FD9\u4E9B\u7F13\u5B58\u53EF\u80FD\u4F1A\u88AB\u540E\u7EED\u7684\u6784\u5EFA\u6240\u4F7F\u7528</td><td>\u5728\u4E0D\u540C\u7684\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\uFF0CGOCACHE \u6709\u4E0D\u540C\u7684\u9ED8\u8BA4\u503C\u3002\u4EE5 Mac \u4E3A\u4F8B\uFF0C\u6211\u4EEC\u4F7F\u7528 go env GOCACHE \u67E5\u770B\u5176\u503C\u4E3A\uFF1A$HOME/Library/Caches/go-build</td></tr><tr><td>GOMODCACHE</td><td>\u7528\u4E8E\u6307\u793A\u5B58\u653E Go Module \u7684\u8DEF\u5F84</td><td>\u5728\u4E0D\u540C\u7684\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\uFF0CGOMODCACHE \u6709\u4E0D\u540C\u7684\u9ED8\u8BA4\u503C\u3002\u4EE5 Mac \u4E3A\u4F8B\uFF0C\u6211\u4EEC\u4F7F\u7528 go env GOOMODCACHE \u67E5\u770B\u5176\u503C\u4E3A\uFF1A$HOME/go/pkg/mod</td></tr><tr><td>GOPROXY</td><td>\u7528\u6765\u914D\u7F6E Go Module proxy \u670D\u52A1</td><td>\u9ED8\u8BA4\u503C\u4E3A \u201C<a href="https://proxy.golang.org" target="_blank" rel="noreferrer">https://proxy.golang.org</a>,direct\u201D\u3002\u4E2D\u56FD\u5927\u9646\u5730\u533A\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u5927\u9646\u5730\u533A\u63D0\u4F9B\u7684 module proxy \u670D\u52A1\u4EE5\u52A0\u901F Go Module \u7684\u83B7\u53D6\u901F\u5EA6\uFF0C\u503C\u4E3A \u201C<a href="https://goproxy.cn" target="_blank" rel="noreferrer">https://goproxy.cn</a>,direct\u201D\u3002</td></tr><tr><td>GOPATH</td><td>\u5728\u4F20\u7EDF\u7684 GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u7528\u4E8E\u6307\u793A Go \u5305\u641C\u7D22\u8DEF\u5F84\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u5728 Go module \u673A\u5236\u542F\u7528\u4E4B\u524D\u662F Go \u6838\u5FC3\u914D\u7F6E\u9879\u3002Go 1.8 \u7248\u672C\u4E4B\u524D\u9700\u8981\u624B\u52A8\u914D\u7F6E\uFF0CGo 1.8 \u7248\u672C\u5F15\u5165\u4E86\u9ED8\u8BA4\u7684 GOPATH\uFF08$HOME/go\uFF09\u3002\u5728 Go Module \u6A21\u5F0F\u6B63\u5F0F\u4E0A\u4F4D\u540E\uFF0C\u5F88\u53EF\u80FD\u4F1A\u88AB\u79FB\u9664\u3002</td><td></td></tr><tr><td>GOROOT</td><td>\u6307\u793A Go \u5B89\u88C5\u8DEF\u5F84\u3002Go 1.10 \u7248\u672C\u5F15\u5165\u9ED8\u8BA4 GOROOT\uFF0C\u5F00\u53D1\u8005\u65E0\u9700\u663E\u5F0F\u8BBE\u7F6E\uFF0CGo \u7A0B\u5E8F\u4F1A\u81EA\u52A8\u6839\u636E\u81EA\u5DF1\u6240\u5728\u8DEF\u5F84\u63A8\u5BFC\u51FA GOROOT \u7684\u8DEF\u5F84\u3002</td><td></td></tr></tbody></table><p>\u5982\u679C\u4F60\u8FD8\u60F3\u4E86\u89E3\u66F4\u591A\u5173\u4E8E Go \u914D\u7F6E\u9879\u7684\u8BF4\u660E\uFF0C\u53EF\u4EE5\u901A\u8FC7 go help environment \u547D\u4EE4\u67E5\u770B\u3002</p><h3 id="\u603B\u7ED3-2" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-2" aria-hidden="true">#</a></h3><p>\u5728\u8FD9\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u8BB2\u89E3\u4E09\u79CD Go \u7248\u672C\u7684\u9009\u62E9\u7B56\u7565\uFF1A</p><ul><li>\u7B2C\u4E00\u79CD\uFF0C\u4E5F\u662F\u6BD4\u8F83\u63A8\u8350\u7684\u4E00\u79CD\uFF0C\u90A3\u5C31\u662F\u4F7F\u7528 Go \u6700\u65B0\u7248\u672C\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u4F53\u9A8C\u5230 Go \u7684\u6700\u65B0\u8BED\u8A00\u7279\u6027\uFF0C\u5E94\u7528\u5230\u6807\u51C6\u5E93\u7684\u6700\u65B0 API \u4EE5\u53CA Go \u5DE5\u5177\u94FE\u7684\u6700\u65B0\u529F\u80FD\uFF0C\u5E76\u4E14\u5F88\u591A\u8001\u7248\u672C\u4E2D\u7684 bug \u5728\u6700\u65B0\u7248\u672C\u4E2D\u90FD\u4F1A\u5F97\u5230\u53CA\u65F6\u4FEE\u590D\uFF1B</li><li>\u5982\u679C\u4F60\u5BF9\u6700\u65B0\u7248\u672C\u7684\u7A33\u5B9A\u6027\u5B58\u5728\u987E\u8651\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u9009\u62E9\u4F7F\u7528\u6B64\u65B0\u7248\uFF1B</li><li>\u6700\u540E\uFF0C\u5982\u679C\u4F60\u8981\u8003\u8651\u73B0\u5B58\u751F\u4EA7\u9879\u76EE\u6216\u5F00\u6E90\u9879\u76EE\uFF0C\u53EA\u9700\u8981\u4E8E\u9009\u62E9\u9879\u76EE\u4FDD\u6301\u4E00\u81F4\u5C31\u53EF\u4EE5\u3002</li></ul><p>\u786E\u8BA4\u5B8C Go \u7248\u672C\u540E\uFF0C\u6211\u4EEC\u4ECB\u7ECD\u4E86\u5982\u679C\u5B89\u88C5 Go\u3002\u6700\u540E\uFF0C\u6211\u4EEC\u8BB2\u89E3\u4E86 Go \u7684\u4E00\u4E9B\u5E38\u7528\u914D\u7F6E\u9879\u3002</p><p>\u6709\u4E86 Go \u5F00\u53D1\u73AF\u5883\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u5C31\u5F00\u59CB\u5B66\u4E60\u5982\u4F55\u7F16\u5199 Go \u4EE3\u7801\u3002</p><h2 id="_04\u3001go-\u7A0B\u5E8F\u7684\u7ED3\u6784" tabindex="-1">04\u3001Go \u7A0B\u5E8F\u7684\u7ED3\u6784 <a class="header-anchor" href="#_04\u3001go-\u7A0B\u5E8F\u7684\u7ED3\u6784" aria-hidden="true">#</a></h2><p>\u6B63\u5F0F\u5F00\u59CB\u4E4B\u524D\uFF0C\u9996\u5148\u8BF4\u660E\u4E00\u4E0B\uFF0C\u8FD9\u8282\u8BFE\u5BF9\u4E8E\u5F00\u53D1 Go \u7A0B\u5E8F\u6240\u4F7F\u7528\u7684\u7F16\u8F91\u5668\u5DE5\u5177\u6CA1\u6709\u4EFB\u4F55\u8981\u6C42\u3002</p><p>\u5982\u679C\u4F60\u559C\u6B22\u4F7F\u7528\u67D0\u4E2A\u96C6\u6210\u5F00\u53D1\u73AF\u5883\uFF08Integrated Development Environment\uFF0CIDE\uFF09\uFF0C\u90A3\u4E48\u5C31\u7528\u4F60\u559C\u6B22\u7684 IDE \u5C31\u597D\u3002</p><p>\u5728\u8FD9\u91CC\u53EA\u63A8\u8350\u4E24\u6B3E\u597D\u7528\u7684 IDE\uFF0CGoLand \u6216 Visual Studio Code\uFF08\u7B80\u79F0 VS Code\uFF09\u3002GoLand \u662F\u77E5\u540D IDE \u51FA\u54C1\u516C\u53F8 JetBrains \u51C6\u5BF9 Go \u8BED\u8A00\u63A8\u51FA\u7684 IDE \u4EA7\u54C1\uFF0C\u4E5F\u662F\u76EE\u524D\u5E02\u9762\u4E0A\u6700\u597D\u7528\u7684 Go IDE\uFF1BVS Code \u5219\u662F\u5FAE\u8F6F\u5F00\u6E90\u7684\u8DE8\u8BED\u8A00\u6E90\u7801\u7F16\u8F91\u5668\uFF0C\u901A\u8FC7\u96C6\u6210\u8BED\u8A00\u63D2\u4EF6\uFF08Go \u5F00\u53D1\u8005\u53EF\u4EE5\u4F7F\u7528 Go \u5B98\u7F51\u7EF4\u62A4\u7684 vscode-go \u63D2\u4EF6\uFF09\uFF0C\u53EF\u4EE5\u8BA9\u5B83\u53D8\u6210\u7C7B IDE \u7684\u5DE5\u5177\u3002</p><p>\u5982\u679C\u4F60\u6709\u9ED1\u5BA2\u60C5\u6000\uFF0C\u559C\u6B22\u4F18\u96C5\u9AD8\u6548\u5730\u4F7F\u7528\u547D\u4EE4\u884C\uFF0C\u90A3\u4E48\u50CF Vim\u3001Emacs \u8FD9\u6837\u7684\u57FA\u4E8E\u7EC8\u7AEF\u7684\u7F16\u8F91\u5668\u540C\u6837\u53EF\u4EE5\u7528\u4E8E\u7F16\u5199 Go \u6E90\u7801\u3002\u4EE5 Vim \u4E3A\u4F8B\uFF0C\u7ED3\u5408 vim-go\u3001coc.nvim\uFF08\u4EE3\u7801\u8865\u5168\uFF09\u4EE5\u53CA Go \u5B98\u65B9\u7EF4\u62A4\u7684 gopls \u8BED\u8A00\u670D\u52A1\u5668\uFF0C\u5728\u7F16\u5199 Go \u4EE3\u7801\u65F6\u4E5F\u53EF\u4EE5\u4F53\u4F1A\u5230 \u201C\u98DE\u4E00\u822C\u201D \u7684\u611F\u89C9\u3002</p><h3 id="\u201Chello-world\u201D" tabindex="-1">\u201Chello world\u201D <a class="header-anchor" href="#\u201Chello-world\u201D" aria-hidden="true">#</a></h3><p>\u65B0\u5EFA\u4E00\u4E2A helloworld \u6587\u4EF6\u5939\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir helloworld</span></span>
<span class="line"><span style="color:#A6ACCD;">cd helloworld</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u9996\u5148\uFF0C\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A main.go \u7684\u6E90\u6587\u4EF6\u3002</p><p>\u8FD9\u91CC\u8BF4\u4E0B Go \u7684\u547D\u540D\u89C4\u5219\u3002Go \u6E90\u6587\u4EF6\u603B\u662F\u4EE5\u5168\u5C0F\u5199\u5B57\u6BCD\u5F62\u5F0F\u7684\u77ED\u5C0F\u5355\u8BCD\u547D\u540D\uFF0C\u5E76\u4E14\u4EE5 .go \u6269\u5C55\u540D\u7ED3\u5C3E\u3002</p><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u6253\u5F00\u521A\u624D\u521B\u5EFA\u7684 main.go \u6587\u4EF6\uFF0C\u7F16\u5199\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, world</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7F16\u5199\u5B8C\u6210\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u7F16\u8BD1\u548C\u8FD0\u884C\u8FD9\u4E2A\u6587\u4EF6\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build main.go</span></span>
<span class="line"><span style="color:#A6ACCD;">./main</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5230\u8FD9\u91CC\u4F60\u5E94\u8BE5\u53EF\u4EE5\u770B\u5230\u7EC8\u7AEF\u8F93\u51FA \u201Chello, world\u201D \u5B57\u7B26\u4E32\u3002</p><p>\u73B0\u5728\uFF0C\u8BA9\u6211\u4EEC\u6765\u5206\u6790\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u3002\u9996\u5148\u503C\u5F97\u6CE8\u610F\u7684\u90E8\u5206\u662F\u8FD9\u4E2A\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E00\u884C\u4EE3\u7801\u5B9A\u4E49\u4E86 Go \u4E2D\u7684\u4E00\u4E2A\u5305 package\u3002\u5305\u662F Go \u8BED\u8A00\u7684\u57FA\u672C\u7EC4\u6210\u5355\u5143\uFF0C\u901A\u5E38\u4F7F\u7528\u5355\u4E2A\u7684\u5C0F\u5199\u5355\u8BCD\u547D\u540D\uFF0C\u4E00\u4E2A Go \u7A0B\u5E8F\u672C\u8D28\u4E0A\u5C31\u662F\u4E00\u7EC4\u5305\u7684\u96C6\u5408\u3002\u6240\u6709 Go \u4EE3\u7801\u90FD\u6709\u81EA\u5DF1\u96B6\u5C5E\u7684\u5305\uFF0C\u8FD9\u91CC\u6211\u4EEC\u7684 \u201Chello, world\u201D \u793A\u4F8B\u7684\u6240\u6709\u4EE3\u7801\u90FD\u5728\u4E00\u4E2A\u540D\u4E3A main \u7684\u5305\u4E2D\u3002main \u5305\u5728 Go \u4E2D\u662F\u4E00\u4E2A\u7279\u6B8A\u7684\u5305\uFF0C\u6574\u4E2A Go \u7A0B\u5E8F\u4E2D\u4EC5\u5141\u8BB8\u5B58\u50A8\u4E00\u4E2A\u540D\u4E3A main \u7684\u5305\u3002</p><p>main \u5305\u4E2D\u7684\u4E3B\u8981\u4EE3\u7801\u662F\u4E00\u4E2A\u540D\u4E3A main \u7684\u51FD\u6570\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, world</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\u7684 main \u51FD\u6570\u4E5F\u6BD4\u8F83\u7279\u6B8A\uFF1A\u5F53\u4F60\u8FD0\u884C\u4E00\u4E2A\u53EF\u6267\u884C\u7684 Go \u7A0B\u5E8F\u7684\u65F6\u5019\uFF0C\u6240\u6709\u7684\u5E26\u554A\u5417\u90FD\u4F1A\u4ECE\u8FD9\u4E2A\u5165\u53E3\u51FD\u6570\u5F00\u59CB\u8FD0\u884C\u3002\u8FD9\u6BB5\u4EE3\u7801\u7684\u7B2C\u4E00\u884C\u58F0\u660E\u4E86\u4E00\u4E2A\u540D\u4E3A main \u7684\u3001\u6CA1\u6709\u4EFB\u4F55\u53C2\u6570\u548C\u8FD4\u56DE\u503C\u7684\u51FD\u6570\u3002\u5982\u679C\u4F60\u60F3\u7ED9\u51FD\u6570\u58F0\u660E\u53C2\u6570\uFF0C\u5FC5\u987B\u653E\u5230\u62EC\u53F7\u4E2D\u3002</p><p>\u53E6\u5916\uFF0C\u82B1\u62EC\u53F7 {} \u7528\u6765\u6807\u8BB0\u51FD\u6570\u4F53\uFF0CGo \u8981\u6C42\u6240\u6709\u7684\u51FD\u6570\u4F53\u90FD\u8981\u88AB\u82B1\u62EC\u53F7\u5305\u88F9\u8D77\u6765\u3002\u6211\u4EEC\u63A8\u8350\u628A\u5DE6\u82B1\u62EC\u53F7\u4E0E\u51FD\u6570\u58F0\u660E\u7F6E\u4E8E\u540C\u4E00\u884C\u5E76\u4EE5\u7A7A\u683C\u5206\u5272\u3002Go \u8BED\u8A00\u5185\u7F6E\u4E86\u4E00\u5957 Go \u793E\u533A\u7EA6\u5B9A\u4FD7\u6210\u7684\u4EE3\u7801\u98CE\u683C\uFF0C\u5E76\u968F\u5B89\u88C5\u5305\u63D0\u4F9B\u4E86\u4E00\u4E2A\u540D\u4E3A Gofmt \u7684\u5DE5\u5177\uFF0C\u8FD9\u4E2A\u5DE5\u5177\u53EF\u4EE5\u5E2E\u52A9\u4F60\u5C06\u4EE3\u7801\u81EA\u52A8\u683C\u5F0F\u5316\u4E3A\u7EA6\u5B9A\u7684\u98CE\u683C\u3002</p><p>Gofmt \u662F Go \u8BED\u8A00\u5728\u89E3\u51B3\u89C4\u6A21\u5316\uFF08scale\uFF09\u95EE\u9898\u4E0A\u7684\u4E00\u4E2A\u6700\u4F73\u5B9E\u8DF5\uFF0C\u5E76\u6210\u4E86 Go \u8BED\u8A00\u5438\u5F15\u5176\u4ED6\u8BED\u6CD5\u5F00\u53D1\u8005\u7684\u4E00\u5927\u5356\u70B9\u3002\u5F88\u591A\u5176\u4ED6\u4E3B\u6D41\u8BED\u8A00\u4E5F\u5728\u6548\u4EFF Go \u8BED\u8A00\u63A8\u51FA\u81EA\u5DF1\u7684 format \u5DE5\u5177\uFF0C\u4F8B\u5982\uFF1AJava formatter\u3001Clang formatter\u3001Dartfmt \u7B49\u3002\u56E0\u6B64\uFF0C\u4F5C\u4E3A Go \u5F00\u53D1\u4EBA\u5458\uFF0C\u5728\u63D0\u4EA4\u4F60\u7684\u4EE3\u7801\u524D\u8981\u4F7F\u7528 Gpfmt \u683C\u5F0F\u5316\u4F60\u7684 Go \u6E90\u7801\u3002</p><p>\u6211\u4EEC\u518D\u6765\u770B\u4E00\u770B main \u51FD\u6570\u4F53\u4E2D\u7684\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, world</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E00\u884C\u4EE3\u7801\u5DF2\u7ECF\u5B8C\u6210\u6574\u4E2A\u793A\u4F8B\u7A0B\u5E8F\u7684\u6240\u6709\u5DE5\u4F5C\uFF1A\u5C06\u5B57\u7B26\u4E32\u8F93\u51FA\u5230\u7EC8\u7AEF\u7684\u6807\u51C6\u8F93\u51FA\uFF08stdout\uFF09\u4E0A\u3002\u8FD9\u91CC\u6709\u51E0\u4E2A\u7EC6\u8282\u9700\u8981\u6CE8\u610F\uFF1A</p><p><strong>\u6807\u51C6 Go \u4EE3\u7801\u98CE\u683C\u4F7F\u7528 Tab \u800C\u4E0D\u662F\u7A7A\u683C\u4F7F\u7528\u7F29\u8FDB\uFF0C\u4EE3\u7801\u98CE\u683C\u683C\u5F0F\u5316\u5DE5\u4F5C\u4E5F\u53EF\u4EE5\u4EA4\u7531 gofmt \u5B8C\u6210\u3002</strong></p><p><strong>\u6211\u4EEC\u8C03\u7528\u4E00\u4E2A\u540D\u4E3A Println \u7684\u51FD\u6570\uFF0C\u8FD9\u4E2A\u51FD\u6570\u4F4D\u4E8E Go \u6807\u51C6\u5E93\u7684 fmt \u5305\u4E2D\u3002\u8F93\u51FA \u201Chello, world\u201D \u505A\u4E86\u4E24\u90E8\u64CD\u4F5C\u3002</strong></p><p>\u7B2C\u4E00\u6B65\u662F\u5728\u6E90\u6587\u4EF6\u7684\u5F00\u59CB\u5904\u901A\u8FC7 import \u58F0\u660E\u5BFC\u5165 fmt \u5305\u7684\u5305\u8DEF\u5F84\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u7B2C\u4E8C\u6B65\u5219\u662F\u5728 main \u51FD\u6570\u4F53\u5185\uFF0C\u901A\u8FC7 fmt \u8FD9\u4E2A\u64CD\u4F5C\u7B26\uFF08Qualified Identifier\uFF09\u8C03\u7528 PrintIn \u51FD\u6570\u3002\u867D\u7136\u4E24\u5904\u90FD\u4F7F\u7528\u4E86 \u201Cfmt\u201D \u8FD9\u4E2A\u5B57\u9762\u503C\uFF0C\u4F46\u5728\u8FD9\u4E24\u5904 \u201Cfmt\u201D \u5B57\u9762\u503C\u6240\u4EE3\u8868\u7684\u542B\u4E49\u662F\u4E00\u6837\u7684\u3002</p><ul><li>import \u201Cfmt\u201D \u4E00\u884C\u4E2D\u7684 \u201Cfmt\u201D \u4EE3\u8868\u7684\u662F\u5305\u7684\u5BFC\u5165\u8DEF\u5F84\uFF08Import\uFF09\uFF0C\u5B83\u4EE3\u8868\u7684\u662F\u6807\u51C6\u5E93\u4E0B\u7684 fmt \u76EE\u5F55\uFF0C\u6574\u4E2A import \u58F0\u660E\u8BED\u53E5\u7684\u542B\u4E49\u5C31\u662F\u5BFC\u5165\u6807\u51C6\u5E93 fmt \u76EE\u5F55\u4E0B\u7684\u5305\uFF1B</li><li>fmt.PrintIn \u51FD\u6570\u8C03\u7528\u4E00\u884C\u4E2D\u7ED9\u7684 \u201Cfmt\u201D \u4EE3\u8868\u7684\u5219\u662F\u5305\u540D\u3002</li></ul><p>\u901A\u5E38\u5BFC\u5165\u8DEF\u5F84\u7684\u6700\u540E\u4E00\u4E2A\u5206\u6BB5\u540D\u4E0E\u5305\u540D\u662F\u76F8\u540C\u7684\uFF0C\u8FD9\u4E5F\u5F88\u5BB9\u6613\u8BA9\u4EBA\u8BEF\u89E3 import \u58F0\u660E\u8BED\u53E5\u4E2D\u7684 \u201Cfmt\u201D \u6307\u7684\u662F\u5305\u540D\u3002</p><p>main \u51FD\u6570\u4F53\u4E2D\u4E4B\u6240\u4EE5\u53EF\u4EE5\u8C03\u7528 fmt \u5305\u4E2D\u7684 PrintIn \u51FD\u6570\uFF0C\u8FD8\u6709\u6700\u540E\u4E00\u4E2A\u539F\u56E0\uFF0C\u90A3\u5C31\u662F PrintIn \u51FD\u6570\u7684\u9996\u5B57\u6BCD\u662F\u5927\u5199\u7684\u3002\u5728 Go \u8BED\u8A00\u4E2D\uFF0C\u53EA\u6709\u9996\u5B57\u6BCD\u4E3A\u5927\u5199\u7684\u6807\u8BC6\u7B26\u624D\u662F\u5BFC\u51FA\u7684\uFF08Exported\uFF09\uFF0C\u624D\u80FD\u5BF9\u5305\u5916\u7684\u4EE3\u7801\u53EF\u89C1\uFF1B\u5982\u679C\u9996\u5B57\u6BCD\u662F\u5C0F\u5199\u7684\uFF0C\u90A3\u4E48\u5C31\u8BF4\u660E\u8FD9\u4E2A\u6807\u8BC6\u7B26\u4EC5\u9650\u4E8E\u5728\u58F0\u660E\u5B83\u7684\u5305\u5185\u53EF\u89C1\u3002</p><p>\u53E6\u5916\uFF0C\u5728 Go \u8BED\u8A00\u4E2D\uFF0Cmain \u5305\u662F\u4E0D\u53EF\u4EE5\u50CF\u6807\u51C6\u5E93 fmt \u5305\u90A3\u6837\u5BFC\u5165\u7684\uFF0C\u5982\u679C\u5BFC\u5165 main \u5305\uFF0C\u5728\u4EE3\u7801\u7F16\u8BD1\u9636\u6BB5\u5C31\u4F1A\u6536\u5230 Go \u7F16\u8BD1\u5668\u9519\u8BEF\uFF1Aimport &quot;xx/main&quot; is a program, not an importable package\u3002</p><p>\u6700\u540E\uFF0C\u5728\u6574\u4E2A\u793A\u4F8B\u7A0B\u5E8F\u6E90\u7801\u4E2D\uFF0C\u6211\u4EEC\u90FD\u6CA1\u6709\u4F7F\u7528\u5206\u53F7\u6765\u8868\u793A\u8BED\u53E5\u7ED3\u675F\u3002\u4E0D\u8FC7\uFF0C\u5176\u5B9E Go \u8BED\u8A00\u7684\u6B63\u5F0F\u8BED\u6CD5\u89C4\u8303\u662F\u4F7F\u7528\u5206\u53F7 \u201C;\u201D \u6765\u505A\u7ED3\u5C3E\u6807\u8BC6\u7B26\u7684\u3002\u56E0\u4E3A\u5927\u591A\u6570\u5206\u53F7\u90FD\u662F\u53EF\u9009\u7684\uFF0C\u5E38\u5E38\u88AB\u7701\u7565\uFF0C\u4E0D\u8FC7\u5728\u6E90\u7801\u7F16\u8BD1\u65F6\uFF0CGo \u7F16\u8BD1\u5668\u4F1A\u81EA\u52A8\u63D2\u5165\u8FD9\u4E9B\u88AB\u7701\u7565\u7684\u5206\u53F7\u3002</p><h3 id="\u7A0B\u5E8F\u5982\u4F55\u7F16\u8BD1" tabindex="-1">\u7A0B\u5E8F\u5982\u4F55\u7F16\u8BD1 <a class="header-anchor" href="#\u7A0B\u5E8F\u5982\u4F55\u7F16\u8BD1" aria-hidden="true">#</a></h3><p>\u521A\u521A\u6211\u4EEC\u5728\u8FD0\u884C \u201Chello world\u201D \u7A0B\u5E8F\u4E4B\u524D\uFF0C\u4F7F\u7528\u4E86 go build \u547D\u4EE4\uFF0C\u8FD8\u6709\u5B83\u9644\u5E26\u7684\u6E90\u6587\u4EF6\u540D\u53C2\u6570\u6765\u7F16\u8BD1\u5B83\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build main.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5047\u8BBE\u4F60\u6709 C/C++ \u8BED\u8A00\u7684\u5F00\u53D1\u80CC\u666F\uFF0C\u4F60\u5C31\u4F1A\u53D1\u73B0\u8FD9\u4E2A\u6B65\u9AA4\u4E0E gcc \u6216 clang \u7F16\u8BD1\u5341\u5206\u76F8\u4F3C\u3002\u4E00\u65E6\u7F16\u8BD1\u6210\u529F\uFF0C\u6211\u4EEC\u5C31\u4F1A\u83B7\u5F97\u4E00\u4E2A\u4E8C\u8FDB\u5236\u7684\u53EF\u6267\u884C\u6587\u4EF6\u3002\u5728 Linux \u7CFB\u7EDF\u3001MacOS \u7CFB\u7EDF\uFF0C\u4EE5\u53CA Windows \u7CFB\u7EDF\u7684 PowerShell \u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8F93\u5165\u4E0B\u9762\u8FD9\u4E2A ls \u547D\u4EE4\u770B\u5230\u521A\u521A\u751F\u6210\u7684\u53EF\u6267\u884C\u6587\u4EF6\u3002</p><p>\u5982\u679C\u4E4B\u524D\u4F60\u66F4\u719F\u6089\u7C7B\u4F3C\u4E8E Ruby\u3001Python \u6216 JavaScript \u4E4B\u7C7B\u7684\u52A8\u6001\u8BED\u8A00\uFF0C\u4F60\u53EF\u80FD\u8FD8\u4E0D\u592A\u4E60\u60EF\u5728\u8FD0\u884C\u4E4B\u524D\u9700\u8981\u5148\u8FDB\u884C\u7F16\u8BD1\u7684\u60C5\u51B5\u3002Go \u662F\u4E00\u79CD\u7F16\u8BD1\u578B\u8BED\u8A00\uFF0C\u8FD9\u610F\u5473\u7740\u53EA\u6709\u7F16\u8BD1\u5B8C Go \u7A0B\u5E8F\u4E4B\u540E\uFF0C\u624D\u53EF\u4EE5\u5C06\u751F\u6210\u7684\u53EF\u6267\u884C\u6587\u4EF6\u4EA4\u4ED8\u7ED9\u5176\u4ED6\u4EBA\uFF0C\u5E76\u53EF\u4EE5\u8FD0\u884C\u5728\u6CA1\u6709\u5B89\u88C5 Go \u7684\u73AF\u5883\u4E2D\u3002</p><p>\u800C\u5982\u679C\u4F60\u4EA4\u4ED8\u7ED9\u5176\u4ED6\u4EBA\u7684\u662F\u4E00\u4EFD .rb\u3001.py \u6216 .js \u7684\u52A8\u6001\u8BED\u8A00\u7684\u6E90\u6587\u4EF6\uFF0C\u90A3\u4E48\u76EE\u6807\u73AF\u5883\u4E2D\u5C31\u5FC5\u987B\u8981\u62E5\u6709\u5BF9\u5E94\u7684 Ruby\u3001Python \u6216 JavaScript \u73AF\u5883\u624D\u80FD\u89E3\u91CA\u6267\u884C\u8FD9\u4E9B\u6E90\u6587\u4EF6\u3002</p><p>\u5F53\u7136\uFF0CGo \u4E5F\u501F\u9274\u4E86\u52A8\u6001\u8BED\u8A00\u4E00\u4E9B\u5BF9\u5F00\u53D1\u8005\u4F53\u9A8C\u6BD4\u8F83\u597D\u7684\u7279\u6027\uFF0C\u6BD4\u5982\u57FA\u4E8E\u6E90\u7801\u6587\u4EF6\u7684\u76F4\u63A5\u6267\u884C\uFF0CGo \u63D0\u4F9B\u4E86 run \u547D\u4EE4\u53EF\u4EE5\u76F4\u63A5\u8FD0\u884C Go \u6E90\u7801\u6587\u4EF6\uFF0C\u6BD4\u5982\u6211\u4EEC\u4E5F\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u547D\u4EE4\u76F4\u63A5\u57FA\u4E8E main.go \u8FD0\u884C\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go run main.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E0D\u8FC7\u50CF go run \u8FD9\u7C7B\u547D\u4EE4\u66F4\u591A\u5E94\u7528\u4E8E\u5F00\u53D1\u8C03\u8BD5\u9636\u6BB5\uFF0C\u5B9E\u9645\u4EA4\u4ED8\u6210\u529F\u8FD8\u662F\u9700\u8981\u4F7F\u7528 go build \u547D\u4EE4\u8FDB\u884C\u6784\u5EFA\u3002</p><p>\u5728\u6211\u4EEC\u7684\u751F\u4EA7\u73AF\u5883\u91CC\uFF0CGo \u7A0B\u5E8F\u7684\u7F16\u8BD1\u5F80\u5F80\u4E0D\u4F1A\u50CF\u6211\u4EEC\u524D\u9762\uFF0C\u57FA\u4E8E\u5355\u4E2A Go \u6E90\u6587\u4EF6\u6784\u5EFA\u8FD9\u4E48\u7B80\u5355\u3002\u8D8A\u8D34\u8FD1\u771F\u5B9E\u73AF\u5883\uFF0C\u4E5F\u5C31\u610F\u5473\u7740\u9879\u76EE\u89C4\u6A21\u8D8A\u5927\u3001\u534F\u540C\u4EBA\u5458\u8D8A\u591A\uFF0C\u9879\u76EE\u7684\u4F9D\u8D56\u548C\u4F9D\u8D56\u7684\u7248\u672C\u90FD\u4F1A\u53D8\u5F97\u590D\u6742\u3002</p><h3 id="\u590D\u6742\u9879\u76EE\u7F16\u8BD1" tabindex="-1">\u590D\u6742\u9879\u76EE\u7F16\u8BD1 <a class="header-anchor" href="#\u590D\u6742\u9879\u76EE\u7F16\u8BD1" aria-hidden="true">#</a></h3><p>\u73B0\u5728\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u65B0\u9879\u76EE \u201Chellomodule\u201D\uFF0C\u5728\u65B0\u9879\u76EE\u4E2D\u6211\u4EEC\u4F7F\u7528\u4E24\u4E2A\u7B2C\u4E09\u65B9\u5E93\uFF0Czap \u548C fasthttp\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mddir hellomodule</span></span>
<span class="line"><span style="color:#A6ACCD;">cd hellomodule</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u63A5\u4E0B\u6765\u7F16\u5199\u6E90\u7801\u6587\u4EF6\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/valyala/fasthttp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">go.uber.org/zap</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> logger </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">zap</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Logger</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	logger</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> zap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewProduction</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fastHttpHandler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ctx </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">fasthttp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">RequestCtx</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Info</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, go module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> zap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ByteString</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uri</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RequestURI</span><span style="color:#89DDFF;">()))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fasthttp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ListenAndServe</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8081</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fastHttpHandler</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u793A\u4F8B\u7528\u4E8E\u521B\u5EFA\u4E00\u4E2A\u5728 8081 \u7AEF\u53E3\u76D1\u542C\u7684 http \u670D\u52A1\uFF0C\u5F53\u6211\u4EEC\u5411\u5B83\u53D1\u8D77\u8BF7\u6C42\u540E\uFF0C\u8FD9\u4E2A\u670D\u52A1\u4F1A\u5728\u7EC8\u7AEF\u8F93\u51FA\u4E00\u6BB5\u8BBF\u95EE\u65E5\u5FD7\u3002</p><p>\u4E0D\u8FC7\uFF0C\u5F53\u6211\u4EEC\u5C1D\u8BD5\u7F16\u8BD1\u8FD9\u4E2A\u6E90\u6587\u4EF6\uFF0Cgo \u7F16\u8BD1\u5668\u7684\u8F93\u51FA\u7ED3\u679C\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">main.go:4:2: no required module provides package github.com/valyala/fasthttp: go.mod file not found in current directory or any parent directory; see &#39;go help modules&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">main.go:5:2: no required module provides package go.uber.org/zap: go.mod file not found in current directory or any parent directory; see &#39;go help modules&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230\uFF0Cmain.go \u6587\u4EF6\u7F16\u8BD1\u5931\u8D25\u4E86\u3002\u4ECE\u7F16\u8BD1\u5668\u6765\u770B\uFF0Cgo build \u9700\u8981\u627E go.mod \u7684\u6587\u4EF6\uFF0C\u6765\u89E3\u51B3\u7A0B\u5E8F\u5BF9\u7B2C\u4E09\u65B9\u5305\u7684\u4F9D\u8D56\u51B3\u7B56\u95EE\u9898\u3002</p><p>go.mod \u6587\u4EF6\u662F Go Module \u7684\u6838\u5FC3\u6587\u4EF6\uFF0C\u5728\u8FD9\u4E2A\u6587\u4EF6\u4E2D\u5B58\u50A8\u4E86\u8FD9\u4E2A module \u5BF9\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7684\u5168\u90E8\u4FE1\u606F\u3002</p><blockquote><p>Go Module \u6784\u5EFA\u6A21\u5F0F\u662F\u5728 Go 1.11 \u7248\u672C\u6B63\u5F0F\u5F15\u5165\u7684\uFF0C\u76EE\u7684\u662F\u5F7B\u5E95\u89E3\u51B3 Go \u9879\u76EE\u590D\u6742\u7248\u672C\u4F9D\u8D56\u7684\u95EE\u9898\uFF0C\u5728 Go 1.16 \u7248\u672C\u4E2D\uFF0CGo Module \u5DF2\u7ECF\u6210\u4E3A Go \u9ED8\u8BA4\u7684\u5305\u4F9D\u8D56\u7BA1\u7406\u673A\u5236\u548C Go \u6E90\u7801\u6784\u5EFA\u673A\u5236\u3002</p></blockquote><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u901A\u8FC7\u4E0B\u9762\u547D\u4EE4\u4E3A\u8FD9\u4E2A\u793A\u4F8B\u7A0B\u5E8F\u6DFB\u52A0 go.mod \u6587\u4EF6\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod init github.com/bigwhite/hellomodule</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go: creating new go.mod: module github.com/bigwhite/hellomodule</span></span>
<span class="line"><span style="color:#A6ACCD;">go: to add module requirements and sums:</span></span>
<span class="line"><span style="color:#A6ACCD;">	go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u73B0\u5728\u4F60\u5E94\u8BE5\u53EF\u4EE5\u770B\u5230\uFF0Cgo mod init \u547D\u4EE4\u7684\u6267\u884C\u7ED3\u679C\u662F\u5728\u5F53\u524D\u76EE\u5F55\u4E0B\u751F\u6210\u4E00\u4E2A go.mod \u6587\u4EF6\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">cat go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">module github.com/bigwhite/hellomodule</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go 1.19</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5176\u5B9E\uFF0C\u4E00\u4E2A module \u5C31\u662F\u4E00\u4E2A\u5305\u7684\u96C6\u5408\uFF0C\u8FD9\u4E9B\u5305\u548C module \u4E00\u8D77\u6253\u7248\u672C\u3001\u53D1\u5E03\u548C\u5206\u53D1\u3002go.mod \u6240\u5728\u76EE\u5F55\u5373 module \u6839\u76EE\u5F55\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u7684 go.mod \u6587\u4EF6\u5185\u5BB9\u8FD8\u6BD4\u8F83\u7B80\u5355\uFF0C\u7B2C\u4E00\u884C\u5185\u5BB9\u662F\u7528\u4E8E\u58F0\u660E module \u8DEF\u5F84\uFF08module path\uFF09\u7684\u3002\u800C\u4E14\uFF0Cmodule \u9690\u542B\u4E86\u4E00\u4E2A\u547D\u540D\u7A7A\u95F4\u7684\u6982\u5FF5\uFF0Cmodule \u4E0B\u6BCF\u4E2A\u5305\u7684\u5BFC\u5165\u8DEF\u5F84\u90FD\u662F\u6709 module path \u548C\u5305\u6240\u5728\u5B50\u76EE\u5F55\u7684\u540D\u5B57\u7ED3\u5408\u5728\u4E00\u8D77\u6784\u6210\u3002</p><p>\u53E6\u5916\uFF0Cgo.mod \u7684\u6700\u540E\u4E00\u884C\u662F\u4E00\u4E2A Go \u7248\u672C\u6307\u793A\u7B26\uFF0C\u7528\u4E8E\u8868\u793A\u8FD9\u4E2A module \u662F\u5728\u67D0\u4E2A\u7279\u5B9A Go \u7248\u672C\u7684 module \u8BED\u4E49\u57FA\u7840\u4E0A\u7F16\u5199\u7684\u3002</p><p>\u8981\u60F3\u6211\u4EEC\u7684\u7A0B\u5E8F\u6B63\u5E38\u8FD0\u884C\uFF0C\u8FD8\u9700\u8981\u5728 go.mod \u4E2D\u6DFB\u52A0 fasthttp \u548C zap \u8FD9\u4E24\u4E2A\u5305\u7684\u7248\u672C\u4FE1\u606F\uFF0C\u6211\u4EEC\u53EF\u4EE5\u624B\u52A8\u6DFB\u52A0\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 go mod tidy \u547D\u4EE4\uFF0C\u8BA9 Go \u5DE5\u5177\u81EA\u52A8\u6DFB\u52A0\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go: finding module for package go.uber.org/zap</span></span>
<span class="line"><span style="color:#A6ACCD;">go: finding module for package github.com/valyala/fasthttp</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/valyala/fasthttp v1.43.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading go.uber.org/zap v1.24.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: found github.com/valyala/fasthttp in github.com/valyala/fasthttp v1.43.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: found go.uber.org/zap in go.uber.org/zap v1.24.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading go.uber.org/atomic v1.7.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading go.uber.org/multierr v1.6.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/pkg/errors v0.8.1</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/stretchr/testify v1.8.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/klauspost/compress v1.15.9</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/andybalholm/brotli v1.0.4</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/valyala/bytebufferpool v1.0.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading go.uber.org/goleak v1.1.11</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading gopkg.in/yaml.v3 v3.0.1</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/davecgh/go-spew v1.1.1</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/pmezard/go-difflib v1.0.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/benbjohnson/clock v1.1.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E1B\u8F93\u51FA\u7ED3\u679C\u4E2D\uFF0C\u53EF\u4EE5\u770B\u5230 Go \u5DE5\u5177\u4E0D\u4EC5\u4E0B\u8F7D\u5E76\u6DFB\u52A0\u4E86 hellomodule \u76F4\u63A5\u4F9D\u8D56\u7684 zap \u548C fasthttp \u5305\u4FE1\u606F\uFF0C\u8FD8\u4E0B\u8F7D\u4E86\u8FD9\u4E24\u4E2A\u5305\u7684\u4F9D\u8D56\u5305\u3002</p><p>go mod tidy \u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u6211\u4EEC go.mod \u6700\u65B0\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">module github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bigwhite</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">hellomodule</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">go</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.19</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">require </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">valyala</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">fasthttp v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">43.0</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">go</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">uber</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">org</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">zap v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">24.0</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">require </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">andybalholm</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">brotli v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.4</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">	github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">klauspost</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">compress v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">15.9</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">	github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">valyala</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bytebufferpool v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">go</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">uber</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">org</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">atomic v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">7.0</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">go</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">uber</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">org</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">multierr v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">6.0</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// indirect</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u65F6\u5019\uFF0Cgo.mod \u5DF2\u7ECF\u8BB0\u5F55\u4E86 hellomodule \u76F4\u63A5\u4F9D\u8D56\u7684\u5305\u4FE1\u606F\u3002\u4E0D\u4EC5\u5982\u6B64\uFF0Chellomodule \u76EE\u5F55\u4E0B\u8FD8\u591A\u4E86\u4E00\u4E2A\u540D\u4E3A go.sum \u7684\u6587\u4EF6\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u8BB0\u5F55\u4E86 hellomodule \u7684\u76F4\u63A5\u4F9D\u8D56\u548C\u95F4\u63A5\u4F9D\u8D56\u7684\u76F8\u5173\u7248\u672C\u7684 hash \u503C\uFF0C\u7528\u6765\u6821\u9A8C\u672C\u5730\u5B9D\u7684\u771F\u5B9E\u6027\u3002\u5728\u6784\u5EFA\u7684\u65F6\u5019\uFF0C\u5982\u679C\u672C\u5730\u4F9D\u8D56\u5305\u7684 hash \u503C\u4E0E go.sum \u6587\u4EF6\u4E2D\u8BB0\u5F55\u7684\u4E0D\u4E00\u81F4\uFF0C\u5C31\u4F1A\u88AB\u62D2\u7EDD\u6784\u5EFA\u3002</p><p>\u6709\u4E86 go.mod \u4EE5\u53CA hellomodule \u4F9D\u8D56\u7684\u5305\u7248\u672C\u4FE1\u606F\u540E\uFF0C\u6211\u4EEC\u518D\u6765\u6267\u884C\u6784\u5EFA\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build main.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u6B21\u6211\u4EEC\u5C31\u53EF\u4EE5\u6210\u529F\u6784\u5EFA\u51FA\u53EF\u6267\u884C\u6587\u4EF6 main\uFF0C\u8FD0\u884C\u8FD9\u4E2A\u6587\u4EF6\uFF0C\u65B0\u5EFA\u4E00\u4E2A\u7EC8\u7AEF\u7AEF\u53E3\uFF0C\u5728\u65B0\u7A97\u53E3\u4E2D\u4F7F\u7528 curl \u547D\u4EE4\u8BBF\u95EE\u8BE5\u670D\u52A1\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u770B\u5230\u670D\u52A1\u7AEF\u8F93\u51FA\u5982\u4E0B\u65E5\u5FD7\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl localhost:8081/foo/bar</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{&quot;level&quot;:&quot;info&quot;,&quot;ts&quot;:1672627109.641545,&quot;caller&quot;:&quot;hellomodule/main.go:15&quot;,&quot;msg&quot;:&quot;hello, go module&quot;,&quot;uri&quot;:&quot;/foo/bar&quot;}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u73B0\u5728\u6211\u4EEC\u7684 \u201Chello module\u201D \u7A0B\u5E8F\u5C31\u5DF2\u7ECF\u521B\u5EFA\u6210\u529F\u3002\u6211\u4EEC\u4E5F\u53EF\u4EE5\u770B\u5230\u4F7F\u7528 Go Module \u7684\u6784\u5EFA\u6A21\u5F0F\uFF0Cgo build \u5B8C\u5168\u53EF\u4EE5\u627F\u62C5\u8D77\u6784\u5EFA\u89C4\u6A21\u8F83\u5927\u3001\u4F9D\u8D56\u590D\u6742\u7684 Go \u9879\u76EE\u7684\u91CD\u4EFB\u3002</p><h3 id="\u603B\u7ED3-3" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-3" aria-hidden="true">#</a></h3><p>\u672C\u7BC7\u6587\u7AE0\uFF0C\u6211\u4EEC\u901A\u8FC7 helloworld \u793A\u4F8B\u7A0B\u5E8F\uFF0C\u4E86\u89E3\u4E86\u4E00\u4E2A Go \u7A0B\u5E8F\u7684\u6E90\u7801\u7ED3\u679C\u4E0E\u4EE3\u7801\u98CE\u683C\u81EA\u52A8\u5316\u683C\u5F0F\u7684\u7EA6\u5B9A\u3002</p><ul><li>Go \u5305\u662F Go \u8BED\u8A00\u7684\u57FA\u672C\u7EC4\u6210\u5355\u5143\u3002\u4E00\u4E2A Go \u7A0B\u5E8F\u5C31\u662F\u4E00\u7EC4\u5305\u7684\u96C6\u5408\uFF0C\u6240\u6709 Go \u4EE3\u7801\u90FD\u4F4D\u4E8E\u5305\u4E2D\uFF1B</li><li>Go \u6E90\u7801\u53EF\u4EE5\u5BFC\u5165\u5176\u4ED6 Go \u5305\uFF0C\u5E76\u4F7F\u7528\u5176\u4E2D\u7684\u5BFC\u51FA\u8BED\u6CD5\u5143\u7D20\uFF0C\u5305\u62EC\u7C7B\u578B\u3001\u53D8\u91CF\u3001\u51FD\u6570\u3001\u65B9\u6CD5\u7B49\uFF0C\u800C\u4E14\uFF0Cmain \u51FD\u6570\u662F\u6574\u4E2A Go \u5E94\u7528\u7684\u5165\u53E3\u51FD\u6570\uFF1B</li><li>Go \u8BED\u8A00\u9700\u8981\u5148\u7F16\u8BD1\uFF0C\u7136\u540E\u518D\u5206\u53D1\u548C\u8FD0\u884C\u3002\u5982\u679C\u662F\u5355 Go \u6E90\u6587\u4EF6\u7684\u60C5\u51B5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 go build \u547D\u4EE4\u548C Go \u6E90\u6587\u4EF6\u540D\u7684\u65B9\u5F0F\u8FDB\u884C\u7F16\u8BD1\u3002\u4E0D\u8FC7\uFF0C\u5BF9\u4E8E\u590D\u6742\u7684 Go \u9879\u76EE\uFF0C\u6211\u4EEC\u9700\u8981\u5728 Go Module \u7684\u5E2E\u52A9\u4E0B\u5B8C\u6210\u9879\u76EE\u6784\u5EFA\u3002</li></ul><p>\u6700\u540E\uFF0C\u6211\u4EEC\u96C6\u5408 hellomodule \u793A\u4F8B\uFF0C\u521D\u6B65\u6B47\u606F\u4E86\u5982\u4F55\u6784\u5EFA\u66F4\u5927\u89C4\u6A21\u7684 Go \u7A0B\u5E8F\uFF0C\u5E76\u4ECB\u7ECD\u4E86 Go Module \u6D89\u53CA\u7684\u76F8\u5173\u6982\u5FF5\u3002</p><h3 id="\u6280\u672F\u62D3\u5C55-1" tabindex="-1">\u6280\u672F\u62D3\u5C55 <a class="header-anchor" href="#\u6280\u672F\u62D3\u5C55-1" aria-hidden="true">#</a></h3><p><strong>go \u5F15\u5165\u5176\u4ED6\u5305\uFF0C\u662F\u5C06\u5F15\u7528\u5305\u90FD\u7F16\u8BD1\u8FDB\u53BB\uFF0C\u8FD8\u662F\u4F1A\u5F15\u7528\u52A8\u6001\u8FDE\u63A5\u5E93\uFF1F</strong></p><p>go \u9ED8\u8BA4\u662F\u5F00\u542F CGO_ENABLED \u7684\uFF0C\u5C06 CGO_ENABLED=1\u3002\u4F46\u7F16\u8BD1\u51FA\u6765\u7684\u4E8C\u8FDB\u5236\u7A0B\u5E8F\u7A76\u7ADF\u6709\u65E0\u52A8\u6001\u8FDE\u63A5\uFF0C\u53D6\u51B3\u4E8E\u4F60\u7684\u7A0B\u5E8F\u4F7F\u7528\u4E86\u4EC0\u4E48\u5305\u3002\u5982\u679C\u53EA\u662F\u4E00\u4E2A\u7B80\u5355\u7684 hello world\uFF0C\u90A3\u4E48\u7F16\u8BD1\u51FA\u6765\u7684\u5C06\u662F\u4E00\u4E2A\u7EAF\u9759\u6001\u7A0B\u5E8F\u3002</p><p>\u5982\u679C\u4F60\u4F9D\u8D56\u4E86\u7F51\u7EDC\u5305\u6216\u4E00\u4E9B\u7CFB\u7EDF\u5305\uFF0C\u90A3\u4E48\u7F16\u8BD1\u51FA\u6765\u7684\u4E8C\u8FDB\u5236\u7A0B\u5E8F\u4E2D\u5C06\u4F1A\u662F\u4E00\u4E2A\u5305\u542B\u52A8\u6001\u94FE\u63A5\u7684\u5E93\u3002</p><p>\u539F\u56E0\u5C31\u662F\u5728\u76EE\u524D\u7684 go \u6807\u51C6\u5E93\u4E2D\uFF0C\u67D0\u4E9B\u529F\u80FD\u5177\u6709\u4E24\u4EFD\u5B9E\u73B0\uFF0C\u4E00\u4EFD\u662F c \u8BED\u8A00\u5B9E\u73B0\u7684\uFF0C\u4E00\u4EFD\u662F go \u8BED\u8A00\u5B9E\u73B0\u7684\u3002\u5728 CGO_ENABLE \u5F00\u542F\u7684\u60C5\u51B5\u4E0B\uFF0Cgo \u94FE\u63A5\u5668\u4F1A\u94FE\u63A5 c \u8BED\u8A00\u7684\u7248\u672C\uFF0C\u4E8E\u662F\u5C31\u6709\u4E86\u52A8\u6001\u8FDE\u63A5\u5E93\u7684\u60C5\u51B5\u3002\u5982\u679C\u5C06 CGO_ENABLED \u7F6E\u4E3A 0 \uFF0C\u518D\u91CD\u65B0\u7F16\u8BD1\u94FE\u63A5\uFF0C\u90A3\u4E48 go \u94FE\u63A5\u5668\u4F1A\u4F7F\u7528 go \u7248\u672C\u7684\u5B9E\u73B0\uFF0C\u8FD9\u6837\u5C31\u4F1A\u5F97\u5230\u4E00\u4E2A\u6CA1\u6709\u52A8\u6001\u94FE\u63A5\u7684\u7EAF\u9759\u6001\u4E8C\u8FDB\u5236\u7A0B\u5E8F\u3002</p><h2 id="_05\u3001go-\u9879\u76EE\u7684\u5E03\u5C40\u6807\u51C6" tabindex="-1">05\u3001Go \u9879\u76EE\u7684\u5E03\u5C40\u6807\u51C6 <a class="header-anchor" href="#_05\u3001go-\u9879\u76EE\u7684\u5E03\u5C40\u6807\u51C6" aria-hidden="true">#</a></h2><p>\u5728\u524D\u9762\u7684\u8BB2\u89E3\u4E2D\uFF0C\u6211\u4EEC\u7F16\u5199\u7684 Go \u7A0B\u5E8F\u90FD\u662F\u7B80\u5355\u7A0B\u5E8F\uFF0C\u4E00\u822C\u7531\u4E00\u4E2A\u6216\u51E0\u4E2A Go \u6E90\u7801\u6587\u4EF6\u7EC4\u6210\uFF0C\u800C\u4E14\u6240\u6709\u6E90\u7801\u6587\u4EF6\u90FD\u5728\u540C\u4E00\u4E2A\u76EE\u5F55\u4E2D\u3002\u4F46\u662F\u751F\u4EA7\u73AF\u5883\u4E2D\u8FD0\u884C\u7684\u5B9E\u7528\u7A0B\u5E8F\u5E76\u4E0D\u4F1A\u8FD9\u4E48\u7B80\u5355\uFF0C\u901A\u5E38\u5B83\u4EEC\u90FD\u6709\u590D\u6742\u7684\u9879\u76EE\u7ED3\u6784\u5E03\u5C40\u3002\u6240\u4EE5\uFF0C\u5F04\u6E05\u695A\u4E00\u4E2A\u5B9E\u7528 Go \u9879\u76EE\u7684\u9879\u76EE\u5E03\u5C40\u6807\u51C6\u662F Go \u5F00\u53D1\u8005\u8D70\u5411\u7F16\u5199\u590D\u6742 Go \u7A0B\u5E8F\u7684\u7B2C\u4E00\u6B65\uFF0C\u4E5F\u662F\u5FC5\u7ECF\u7684\u4E00\u6B65\u3002</p><p>\u4F46\u662F\uFF0CGo \u5B98\u65B9\u5230\u76EE\u524D\u4E3A\u6B62\u4E5F\u6CA1\u6709\u7ED9\u51FA\u4E00\u4E2A\u5173\u4E8E Go \u9879\u76EE\u5E03\u5C40\u6807\u51C6\u7684\u6B63\u5F0F\u5B9A\u4E49\u3002\u5728\u8FD9\u6837\u7684\u60C5\u51B5\u4E0B\uFF0CGo \u793E\u533A\u662F\u5426\u6709\u6211\u4EEC\u53EF\u4EE5\u9075\u5FAA\u7684\u53C2\u8003\u5E03\u5C40\uFF0C\u6216\u8005\u4E8B\u5B9E\u6807\u51C6\uFF1F</p><p>\u7B54\u6848\u662F\u80AF\u5B9A\u7684\uFF0C\u5728\u672C\u8282\u8BFE\u4E2D\uFF0C\u6211\u4EEC\u5C31\u6765\u5B66\u4E60\u4E00\u4E0B Go \u793E\u533A\u5E7F\u6CDB\u91C7\u7528\u7684 Go \u9879\u76EE\u5E03\u5C40\u662F\u4EC0\u4E48\u6837\u5B50\u7684\u3002</p><p>\u8981\u60F3\u4E86\u89E3 Go \u9879\u76EE\u7684\u7ED3\u6784\u5E03\u5C40\u4EE5\u53CA\u6F14\u5316\u5386\u53F2\uFF0C\u5168\u4E16\u754C\u7B2C\u4E00\u4E2A Go \u8BED\u8A00\u9879\u76EE\u662F\u4E00\u4E2A\u6700\u597D\u7684\u5207\u5165\u70B9\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u5C31\u5148\u6765\u770B\u4E00\u4E0B Go \u8BED\u8A00 \u201C\u521B\u4E16\u9879\u76EE\u201D \u7684\u7ED3\u6784\u5E03\u5C40\u662F\u4EC0\u4E48\u6837\u5B50\u3002</p><h3 id="\u201C\u521B\u4E16\u9879\u76EE\u201D-\u7ED3\u6784" tabindex="-1">\u201C\u521B\u4E16\u9879\u76EE\u201D \u7ED3\u6784 <a class="header-anchor" href="#\u201C\u521B\u4E16\u9879\u76EE\u201D-\u7ED3\u6784" aria-hidden="true">#</a></h3><p>\u6240\u8C13 \u201CGo \u8BED\u8A00\u7684\u521B\u4E16\u9879\u76EE\u201D\uFF0C\u5176\u5B9E\u5C31\u662F Go \u8BED\u8A00\u9879\u76EE\u81EA\u8EAB\uFF0C\u5B83\u662F\u5168\u4E16\u754C\u7B2C\u4E00\u4E2A Go \u8BED\u8A00\u9879\u76EE\u3002\u4E0D\u8FC7\u8FD9\u4E48\u8BF4\u4E5F\u4E0D\u591F\u7CBE\u786E\uFF0C\u56E0\u4E3A Go \u8BED\u8A00\u9879\u76EE\u8D77\u521D\u6DF7\u6742\u7740\u591A\u79CD\u8BED\u8A00\uFF0C\u4EE5 C \u548C Go \u4EE3\u7801\u4E3A\u4E3B\uFF0CGo \u8BED\u8A00\u7684\u65E9\u671F\u7248\u672C C \u4EE3\u7801\u7684\u6BD4\u4F8B\u8FD8\u4E0D\u5C0F\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 <a href="https://gitlab.com/esr/loccount" target="_blank" rel="noreferrer">loccount \u5DE5\u5177</a> \u5BF9 Go \u8BED\u8A00\u53D1\u5E03\u7684\u7B2C\u4E00\u4E2A <a href="https://github.com/golang/go/releases/tag/go1" target="_blank" rel="noreferrer">Go 1.0 \u7248\u672C</a> \u5206\u6790\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">locccount .</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">all          SLOC=460992  (100.00%)  LLOC=193045  in 2746 files</span></span>
<span class="line"><span style="color:#A6ACCD;">Go           SLOC=256321  (55.60%)  LLOC=109763  in 1983 files</span></span>
<span class="line"><span style="color:#A6ACCD;">C            SLOC=148001  (32.10%)  LLOC=73458   in 368 files</span></span>
<span class="line"><span style="color:#A6ACCD;">HTML         SLOC=25080   (5.44%)  LLOC=0       in 57 files</span></span>
<span class="line"><span style="color:#A6ACCD;">asm          SLOC=10109   (2.19%)  LLOC=0       in 133 files</span></span>
<span class="line"><span style="color:#A6ACCD;">... ...</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4F60\u4F1A\u53D1\u73B0\uFF0C\u5728 1.0 \u7248\u672C\u4E2D\uFF0CGo \u4EE3\u7801\u884C\u6570\u5360\u636E\u4E00\u534A\u4EE5\u4E0A\u6BD4\u4F8B\uFF0C\u4F46\u662F C \u8BED\u8A00\u4EE3\u7801\u884C\u6570\u4E5F\u5360\u636E 32.10% \u7684\u4EFD\u989D\u3002\u5E76\u4E14\u5728\u540E\u7EED Go \u7248\u672C\u6F14\u8FDB\u8FC7\u7A0B\u4E2D\uFF0CGo \u8BED\u8A00\u4EE3\u7801\u884C\u6570\u5360\u6BD4\u8FD8\u5728\u9010\u6B65\u63D0\u5347\uFF0C\u76F4\u5230 Go 1.5 \u7248\u672C\u5B9E\u73B0\u81EA\u4E3E\u540E\uFF0CGo \u8BED\u8A00\u4EE3\u7801\u884C\u6570\u5360\u6BD4\u8FD1 90%\uFF0CC \u8BED\u8A00\u6BD4\u4F8B\u4E0B\u964D\u4E3A\u4E0D\u5230 1%\uFF0C\u8FD9\u4E00\u6BD4\u4F8B\u4E00\u76F4\u6301\u7EED\u81F3\u4ECA\u3002</p><p>\u867D\u7136 C \u4EE3\u7801\u6BD4\u4F8B\u4E0B\u964D\uFF0CGo \u4EE3\u7801\u6BD4\u4F8B\u4E0A\u5347\uFF0C\u4F46 Go \u8BED\u8A00\u9879\u76EE\u7684\u5E03\u5C40\u7ED3\u6784\u5374\u6574\u4F53\u4FDD\u7559\u4E0B\u6765\uFF0C\u5341\u591A\u5E74\u95F4\u867D\u7136\u4E5F\u6709\u4E00\u4E9B\u5C0F\u8303\u56F4\u53D8\u52A8\uFF0C\u4F46\u6574\u4F53\u6CA1\u6709\u672C\u8D28\u53D8\u5316\u3002\u4F5C\u4E3A Go \u8BED\u8A00\u7684 \u201C\u521B\u4E16\u9879\u76EE\u201D\uFF0C\u5B83\u7684\u7ED3\u6784\u5E03\u5C40\u5BF9\u540E\u7EED Go \u793E\u533A\u7684\u9879\u76EE\u5177\u6709\u91CD\u8981\u7684\u53C2\u8003\u4EF7\u503C\uFF0C\u5C24\u5176\u662F Go \u9879\u76EE\u65E9\u671F src \u76EE\u5F55\u4E0B\u9762\u7684\u7ED3\u6784\u3002</p><p>\u4E3A\u4E86\u65B9\u4FBF\u67E5\u770B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4E0B\u8F7D Go \u8BED\u8A00\u9879\u76EE\u6E90\u7801\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">git clone https://github.com/golang/go.git</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4EE5 Go 1.3 \u7248\u672C\u4E3A\u4F8B\uFF0C\u7ED3\u679C\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">cd go // \u8FDB\u5165Go\u8BED\u8A00\u9879\u76EE\u6839\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">git checkout go1.3 // \u5207\u6362\u5230go 1.3\u7248\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">tree -LF 1 ./src // \u67E5\u770Bsrc\u76EE\u5F55\u4E0B\u7684\u7ED3\u6784\u5E03\u5C40</span></span>
<span class="line"><span style="color:#A6ACCD;">./src</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 all.bash*</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 clean.bash*</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 cmd/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 make.bash*</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 Make.dist</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pkg/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 race.bash*</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 run.bash*</span></span>
<span class="line"><span style="color:#A6ACCD;">... ...</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 sudo.bash*</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4ECE\u4E0A\u9762\u7684\u7ED3\u679C\u6765\u770B\uFF0Csrc \u76EE\u5F55\u4E0B\u7ED3\u6784\u6709\u4E09\u4E2A\u7279\u70B9\u3002</p><p>\u9996\u5148\uFF0C\u4F60\u53EF\u4EE5\u770B\u5230\uFF0C\u4EE5 all.bash \u4E3A\u4EE3\u8868\u7684\u4EE3\u7801\u6784\u5EFA\u7684\u811A\u672C\u6E90\u6587\u4EF6\u653E\u5728 src \u4E0B\u9762\u7684\u9876\u5C42\u76EE\u5F55\u3002</p><p>\u5176\u6B21\uFF0Csrc \u4E0B\u7684\u4E8C\u7EA7\u76EE\u5F55 cmd \u4E0B\u9762\u5B58\u653E Go \u76F8\u5173\u53EF\u6267\u884C\u6587\u4EF6\u7684\u76F8\u5173\u76EE\u5F55\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7EE7\u7EED\u6DF1\u5165\u67E5\u770B cmd \u76EE\u5F55\u4E0B\u7684\u7ED3\u6784\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -LF 1 ./cmd</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">./cmd</span></span>
<span class="line"><span style="color:#A6ACCD;">... ...</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 6a/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 6c/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 6g/</span></span>
<span class="line"><span style="color:#A6ACCD;">... ...</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 cc/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 cgo/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 dist/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 fix/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 gc/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 gofmt/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 ld/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 nm/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 objdump/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pack/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 yacc/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u91CC\u7684\u6BCF\u4E2A\u5B50\u76EE\u5F55\u90FD\u662F\u4E00\u4E2A Go \u5DE5\u5177\u94FE\u547D\u4EE4\u5B50\u547D\u4EE4\u5BF9\u5E94\u7684\u53EF\u6267\u884C\u6587\u4EF6\u3002\u5176\u4E2D\uFF0C6a\u30016c\u30016g \u7B49\u662F\u65E9\u671F Go \u7248\u672C\u9488\u5BF9\u7279\u5B9A\u5E73\u53F0\u7684\u6C47\u7F16\u5668\u3001\u7F16\u8BD1\u5668\u7B49\u7684\u7279\u6B8A\u547D\u540D\u65B9\u5F0F\u3002</p><p>\u6700\u540E\uFF0C\u4F60\u4F1A\u770B\u5230 src \u4E0B\u7684\u4E8C\u7EA7\u76EE\u5F55 pkg \u4E0B\u9762\u5B58\u653E\u7740\u8FD0\u884C\u65F6\u5B9E\u73B0\u3001\u6807\u51C6\u5E93\u5305\u5B9E\u73B0\uFF0C\u8FD9\u4E9B\u5305\u5373\u53EF\u4EE5\u88AB\u4E0A\u9762 cmd \u4E0B\u5404\u7A0B\u5E8F\u6240\u5BFC\u5165\uFF0C\u4E5F\u53EF\u4EE5\u88AB Go \u8BED\u8A00\u9879\u76EE\u4E4B\u5916\u7684 Go \u7A0B\u5E8F\u4F9D\u8D56\u5E76\u5BFC\u5165\u3002\u4E0B\u9762\u662F\u6211\u4EEC\u901A\u8FC7 tree \u547D\u4EE4\u67E5\u770B pkg \u4E0B\u9762\u7ED3\u6784\u7684\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -LF 1 ./pkg</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">./pkg</span></span>
<span class="line"><span style="color:#A6ACCD;">... ...</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 flag/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 fmt/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 hash/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 html/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 image/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 index/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 io/</span></span>
<span class="line"><span style="color:#A6ACCD;">... ...</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 net/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 os/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 path/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 reflect/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 regexp/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 runtime/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 sort/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 strconv/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 strings/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 sync/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 syscall/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 testing/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 text/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 time/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 unicode/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 unsafe/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u867D\u7136 Go \u8BED\u8A00\u7684\u521B\u4E16\u9879\u76EE\u7684 src \u76EE\u5F55\u4E0B\u7684\u5E03\u5C40\u7ED3\u6784\uFF0C\u8DDD\u79BB\u73B0\u5728\u5DF2\u7ECF\u6BD4\u8F83\u4E45\u8FDC\uFF0C\u4F46\u662F\u8FD9\u6837\u7684\u5E03\u5C40\u7279\u70B9\u4F9D\u7136\u5BF9\u540E\u7EED\u5F88\u591A Go \u9879\u76EE\u7684\u5E03\u5C40\u4EA7\u751F\u6BD4\u8F83\u5927\u7684\u5F71\u54CD\uFF0C\u5C24\u5176\u662F\u90A3\u4E9B Go \u8BED\u8A00\u65E9\u671F\u91C7\u7EB3\u8005\u5EFA\u7ACB\u7684 Go \u9879\u76EE\u3002\u6BD4\u5982\uFF0CGo \u8C03\u8BD5\u5668\u9879\u76EE Delve\u3001\u5F00\u542F\u4E91\u539F\u751F\u65F6\u4EE3\u7684 Go \u9879\u76EE Docker\uFF0C\u4EE5\u53CA\u4E91\u539F\u751F\u65F6\u4EE3\u7684 \u201C\u64CD\u4F5C\u7CFB\u7EDF\u201D \u9879\u76EE Kubernetes \u7B49\uFF0C\u5B83\u4EEC\u7684\u9879\u76EE\u5E03\u5C40\uFF0C\u81F3\u4ECA\u90FD\u8FD8\u4FDD\u6301\u4E0E Go \u521B\u4E16\u9879\u76EE\u65E9\u671F\u76F8\u540C\u7684\u98CE\u683C\u3002</p><p>\u5F53\u7136\uFF0C\u8FD9\u4E9B\u65E9\u671F\u7684\u5E03\u5C40\u7ED3\u6784\u4E00\u76F4\u5728\u4E0D\u65AD\u5730\u6F14\u5316\uFF0C\u7B80\u5355\u6765\u8BF4\u53EF\u4EE5\u5F52\u7EB3\u4E3A\u4E0B\u9762\u4E09\u4E2A\u6BD4\u8F83\u91CD\u8981\u7684\u6F14\u8FDB\u3002</p><p><strong>\u6F14\u8FDB\u4E00\uFF1AGo 1.4 \u7248\u672C\u5220\u9664 pkg \u8FD9\u4E00\u4E2D\u95F4\u5C42\u76EE\u5F55\u5E76\u5F15\u5165 internal \u76EE\u5F55</strong></p><p>\u51FA\u4E8E\u7B80\u5316\u6E90\u7801\u6811\u5C42\u6B21\u539F\u56E0\uFF0CGo \u8BED\u8A00\u9879\u76EE\u7684 Go 1.4 \u7248\u672C\u5BF9\u5B83\u539F\u6765\u7684 src \u76EE\u5F55\u4E0B\u7684\u5E03\u5C40\u505A\u4E86\u4E24\u5904\u8C03\u6574\u3002\u7B2C\u4E00\u5904\u662F\u5220\u9664\u4E86 Go \u6E90\u7801\u4E2D \u201Csrc/pkg/xxx\u201D \u4E2D pkg \u8FD9\u4E00\u5C42\u7EA7\u76EE\u5F55\u800C\u76F4\u63A5\u4F7F\u7528 src/xxx\u3002\u8FD9\u6837\u4E00\u6765\uFF0CGo \u8BED\u8A00\u9879\u76EE\u7684\u6E90\u7801\u6811\u6DF1\u5EA6\u51CF\u5C11\u4E00\u5C42\uFF0C\u66F4\u4FBF\u4E8E Go \u5F00\u53D1\u8005\u9605\u8BFB\u548C\u63A2\u7D22 Go \u9879\u76EE\u6E90\u7801\u3002</p><p>\u53E6\u5916\u4E00\u5904\u5C31\u662F Go 1.4 \u5F15\u5165 internal \u5305\u673A\u5236\uFF0C\u589E\u52A0\u4E86internal \u76EE\u5F55\u3002\u8FD9\u4E2A internal \u673A\u5236\u5176\u5B9E\u662F\u6240\u6709 Go \u9879\u76EE\u90FD\u53EF\u4EE5\u7528\u7684\uFF0CGo \u8BED\u8A00\u9879\u76EE\u81EA\u8EAB\u4E5F\u662F\u81EA Go 1.4 \u7248\u672C\u8D77\uFF0C\u5C31\u4F7F\u7528 internal \u673A\u5236\u3002\u6839\u636E internal \u673A\u5236\u5B9A\u4E49\uFF0C\u4E00\u4E2A Go \u9879\u76EE\u91CC\u7684 internal \u76EE\u5F55\u4E0B\u7684 Go \u5305\uFF0C\u53EA\u53EF\u4EE5\u88AB\u672C\u9879\u76EE\u5185\u90E8\u7684\u5305\u5BFC\u5165\u3002\u9879\u76EE\u5916\u90E8\u662F\u65E0\u6CD5\u5BFC\u5165\u8FD9\u4E2A internal \u76EE\u5F55\u4E0B\u9762\u7684\u5305\u7684\u3002\u53EF\u4EE5\u8BF4\uFF0Cinternal \u76EE\u5F55\u7684\u5F15\u5165\uFF0C\u8BA9\u4E00\u4E2A Go \u9879\u76EE\u4E2D Go \u5305\u7684\u5206\u7C7B\u4E0E\u7528\u9014\u53D8\u5F97\u66F4\u52A0\u6E05\u6670\u3002</p><p><strong>\u6F14\u8FDB\u4E8C\uFF1AGo 1.6 \u7248\u672C\u589E\u52A0 vendor \u76EE\u5F55</strong></p><p>\u7B2C\u4E8C\u6B21\u6F14\u8FDB\uFF0C\u5176\u5B9E\u662F\u4E3A\u4E86\u89E3\u51B3 Go \u5305\u4F9D\u8D56\u7248\u672C\u7BA1\u7406\u7684\u95EE\u9898\uFF0CGo \u6838\u5FC3\u56E2\u961F\u5728 Go 1.5 \u7248\u672C\u4E2D\u505A\u4E86\u7B2C\u4E00\u6B21\u6539\u8FDB\u3002\u589E\u52A0\u4E86 vendor \u6784\u5EFA\u673A\u5236\uFF0C\u4E5F\u5C31\u662F Go \u6E90\u7801\u7684\u7F16\u8BD1\u53EF\u4EE5\u4E0D\u5728 GOPATH \u73AF\u5883\u53D8\u91CF\u4E0B\u641C\u7D22\u4F9D\u8D56\u5305\u7684\u8DEF\u5F84\uFF0C\u800C\u5728 vendor \u76EE\u5F55\u4E0B\u67E5\u627E\u5BF9\u5E94\u7684\u4F9D\u8D56\u5305\u3002</p><p>Go \u8BED\u8A00\u9879\u76EE\u81EA\u8EAB\u4E5F\u5728 Go 1.6 \u7248\u672C\u4E2D\u589E\u52A0\u4E86 vendor \u76EE\u5F55\u4EE5\u652F\u6301 vendor \u6784\u5EFA\uFF0C\u4F46 vendor \u76EE\u5F55\u5E76\u6CA1\u6709\u5B9E\u8D28\u6027\u7F13\u5B58\u4EFB\u4F55\u7B2C\u4E09\u65B9\u5305\u3002\u76F4\u5230 Go 1.7 \u7248\u672C\uFF0CGo \u624D\u771F\u6B63\u5728 vendor \u4E0B\u7F13\u5B58\u5176\u4F9D\u8D56\u7684\u5916\u90E8\u5305\u3002\u8FD9\u4E9B\u4F9D\u8D56\u5305\u4E3B\u8981\u662F <a href="http://golang.org/x" target="_blank" rel="noreferrer">golang.org/x</a> \u4E0B\u9762\u7684\u5305\uFF0C\u8FD9\u4E9B\u5305\u540C\u6837\u662F\u7531 Go \u6838\u5FC3\u56E2\u961F\u7EF4\u62A4\u7684\uFF0C\u5E76\u4E14\u5176\u66F4\u65B0\u901F\u5EA6\u4E0D\u53D7 Go \u7248\u672C\u53D1\u5E03\u5468\u671F\u5F71\u54CD\u3002</p><p>vendor \u673A\u5236\u4E0E\u76EE\u5F55\u7684\u5F15\u5165\uFF0C\u8BA9 Go \u9879\u76EE\u7B2C\u4E00\u6B21\u5177\u6709\u53EF\u91CD\u73B0\u6784\u5EFA\uFF08Reproducible Build\uFF09\u7684\u80FD\u529B\u3002</p><blockquote><p>\u53EF\u91CD\u73B0\u6784\u5EFA\uFF0C\u5C31\u662F\u9488\u5BF9\u540C\u4E00\u4EFD go module \u6E90\u7801\u8FDB\u884C\u6784\u5EFA\uFF0C\u4E0D\u540C\u4EBA\uFF0C\u5728\u4E0D\u540C\u673A\u5668\uFF08\u540C\u4E00\u67B6\u6784\uFF09\uFF0C\u76F8\u540C os \u4E0A\uFF0C\u5728\u4E0D\u540C\u65F6\u95F4\u70B9\u90FD\u80FD\u5F97\u5230\u76F8\u540C\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u3002</p></blockquote><p><strong>\u6F14\u8FDB\u4E09\uFF1AGo 1.13 \u7248\u672C\u5F15\u5165 go.mod \u548C go.sum</strong></p><p>\u7B2C\u4E09\u6B21\u6F14\u8FDB\uFF0C\u8FD8\u662F\u4E3A\u4E86\u89E3\u51B3 Go \u5305\u4F9D\u8D56\u7248\u672C\u7BA1\u7406\u7684\u95EE\u9898\u3002\u5728 Go 1.11 \u7248\u672C\u4E2D\uFF0CGo \u6838\u5FC3\u56E2\u961F\u505A\u51FA\u4E86\u7B2C\u4E8C\u6B21\u6539\u8FDB\u5C1D\u8BD5\uFF1A\u5F15\u5165 Go Module \u6784\u5EFA\u673A\u5236\uFF0C\u4E5F\u5C31\u662F\u5728\u9879\u76EE\u5F15\u5165 go.mod \u4EE5\u53CA\u5728 go.mod \u4E2D\u660E\u786E\u9879\u76EE\u6240\u4F9D\u8D56\u7684\u7B2C\u4E09\u65B9\u5305\u548C\u7248\u672C\uFF0C\u9879\u76EE\u7684\u6784\u5EFA\u5C31\u5C06\u6446\u8131 GOPATH \u7684\u675F\u7F1A\uFF0C\u5B9E\u73B0\u7CBE\u51C6\u7684\u53EF\u91CD\u73B0\u6784\u5EFA\u3002</p><p>Go \u8BED\u8A00\u9879\u76EE\u81EA\u8EAB\u5728 Go 1.13 \u7248\u672C\u4E2D\u5F15\u5165 go.mod \u548C go.sum \u4EE5\u652F\u6301 Go Module \u6784\u5EFA\u673A\u5236\uFF0C\u4E0B\u9762\u662F Go 1.13 \u7248\u672C\u7684 go.mod \u6587\u4EF6\u5185\u5BB9\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">module std</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go 1.13</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require (</span></span>
<span class="line"><span style="color:#A6ACCD;">  golang.org/x/crypto v0.0.0-20190611184440-5c40567a22f8</span></span>
<span class="line"><span style="color:#A6ACCD;">  golang.org/x/net v0.0.0-20190813141303-74dc4d7220e7</span></span>
<span class="line"><span style="color:#A6ACCD;">  golang.org/x/sys v0.0.0-20190529130038-5219a1e1c5f8 // indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">  golang.org/x/text v0.3.2 // indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230\uFF0CGo \u8BED\u8A00\u9879\u76EE\u81EA\u8EAB\u6240\u4F9D\u8D56\u7684\u5305\u5728 go.mod \u4E2D\u90FD\u6709\u5BF9\u5E94\u7684\u4FE1\u606F\uFF0C\u800C\u539F\u672C\u8FD9\u4E9B\u4F9D\u8D56\u5305\u662F\u7F13\u5B58\u5728 vendor \u76EE\u5F55\u4E0B\u7684\u3002</p><p>\u603B\u7684\u6765\u8BF4\uFF0C\u8FD9\u4E09\u6B21\u6F14\u8FDB\u4E3B\u8981\u4F53\u73B0\u5728\u7B80\u5316\u7ED3\u6784\u5E03\u5C40\uFF0C\u4EE5\u53CA\u4F18\u5316\u5305\u4F9D\u8D56\u7BA1\u7406\u65B9\u9762\uFF0C\u8D77\u5230\u6539\u5584 Go \u5F00\u53D1\u4F53\u9A8C\u7684\u4F5C\u7528\u3002\u53EF\u4EE5\u8BF4\uFF0CGo \u521B\u4E16\u9879\u76EE\u7684\u6E90\u7801\u5E03\u5C40\u4EE5\u53CA\u6F14\u5316\u5BF9 Go \u793E\u533A\u9879\u76EE\u7684\u5E03\u5C40\u5177\u6709\u91CD\u8981\u7684\u542F\u53D1\u610F\u4E49\uFF0C\u4EE5\u81F3\u4E8E\u5728\u591A\u5E74\u7684 Go \u793E\u533A\u5B9E\u8DF5\u540E\uFF0CGo \u793E\u533A\u9010\u6E10\u5F62\u6210\u516C\u8BA4\u7684 Go \u9879\u76EE\u7684\u5178\u578B\u7ED3\u6784\u5E03\u5C40\u3002</p><h3 id="\u5178\u578B\u7ED3\u6784\u5E03\u5C40" tabindex="-1">\u5178\u578B\u7ED3\u6784\u5E03\u5C40 <a class="header-anchor" href="#\u5178\u578B\u7ED3\u6784\u5E03\u5C40" aria-hidden="true">#</a></h3><p>\u4E00\u4E2A Go \u9879\u76EE\u901A\u5E38\u5206\u4E3A\u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u548C\u5E93\u9879\u76EE\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u6765\u5206\u6790\u4E00\u4E0B\u8FD9\u4E24\u7C7B Go \u9879\u76EE\u7684\u5178\u578B\u7ED3\u6784\u5E03\u5C40\u5206\u522B\u662F\u600E\u6837\u7684\u3002</p><h4 id="go-\u53EF\u6267\u884C\u7A0B\u5E8F" tabindex="-1">Go \u53EF\u6267\u884C\u7A0B\u5E8F <a class="header-anchor" href="#go-\u53EF\u6267\u884C\u7A0B\u5E8F" aria-hidden="true">#</a></h4><p>\u9996\u5148\u6765\u770B\u4E00\u4E0B Go \u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u7684\u5178\u578B\u7ED3\u6784\u5E03\u5C40\u3002</p><p>\u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u662F\u4EE5\u6784\u5EFA\u53EF\u6267\u884C\u7A0B\u5E8F\u4E3A\u76EE\u7684\u9879\u76EE\uFF0CGo \u793E\u533A\u9488\u5BF9\u8FD9\u7C7B Go \u9879\u76EE\u6240\u5F62\u6210\u7684\u5178\u578B\u7ED3\u6784\u5E03\u5C40\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -F exe-layout </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">exe-layout</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 cmd/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 app1/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2502   \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 app2/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502       \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 internal/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 pkga/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2502   \u2514\u2500\u2500 pkg_a.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 pkgb/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502       \u2514\u2500\u2500 pkg_b.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pkg1/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 pkg1.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pkg2/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 pkg2.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 vendor/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E0A\u9762\u8FD9\u6837\u7684\u4E00\u4E2A Go \u9879\u76EE\u5178\u578B\u5E03\u5C40\u5C31\u662F \u201C\u8131\u80CE\u201D \u4E8E Go \u521B\u4E16\u9879\u76EE\u7684\u6700\u65B0\u7ED3\u6784\u5E03\u5C40\u3002\u4E0B\u9762\u6211\u4EEC\u5C31\u6765\u89E3\u91CA\u4E00\u4E0B\u8FD9\u91CC\u9762\u7684\u51E0\u4E2A\u8981\u70B9\u3002</p><p>\u6211\u4EEC\u4ECE\u4E0A\u5F80\u4E0B\u6309\u987A\u5E8F\u6765\uFF0C\u9996\u5148\u6765\u770B cmd \u76EE\u5F55\u3002cmd \u76EE\u5F55\u5B58\u653E\u9879\u76EE\u8981\u7F16\u8BD1\u7684\u53EF\u6267\u884C\u6587\u4EF6\u5BF9\u5E94\u7684 main \u5305\u7684\u6E90\u6587\u4EF6\u3002\u5982\u679C\u4F60\u7684\u9879\u76EE\u4E2D\u6709\u591A\u4E2A\u53EF\u6267\u884C\u6587\u4EF6\u9700\u8981\u6784\u5EFA\uFF0C\u6BCF\u4E2A\u53EF\u6267\u884C\u6587\u4EF6\u7684 main \u5305\u9700\u8981\u5355\u72EC\u653E\u5728\u4E00\u4E2A\u5B50\u76EE\u5F55\u4E2D\u3002\u6BD4\u5982\u56FE\u4E2D\u7684 app1\u3001app2\uFF0Ccmd \u76EE\u5F55\u4E0B\u7684\u5404 app \u7684 main \u5C06\u6574\u4E2A\u9879\u76EE\u7684\u4F9D\u8D56\u8FDE\u63A5\u5728\u4E00\u8D77\u3002</p><p>\u901A\u5E38\u6765\u8BF4\uFF0Cmain \u5305\u5E94\u8BE5\u5F88\u7B80\u6D01\u3002\u6211\u4EEC\u5728 main \u5305\u4E2D\u4F1A\u505A\u4E00\u4E9B\u547D\u4EE4\u884C\u53C2\u6570\u89E3\u6790\u3001\u8D44\u6E90\u521D\u59CB\u5316\u3001\u65E5\u5FD7\u8BBE\u65BD\u521D\u59CB\u5316\u3001\u6570\u636E\u5E93\u8FDE\u63A5\u521D\u59CB\u5316\u7B49\u5DE5\u4F5C\uFF0C\u4E4B\u540E\u5C31\u4F1A\u5C06\u7A0B\u5E8F\u7684\u6267\u884C\u6743\u9650\u4EA4\u7ED9\u66F4\u9AD8\u7EA7\u7684\u6267\u884C\u63A7\u5236\u5BF9\u8C61\u3002\u53E6\u5916\uFF0C\u4E5F\u6709\u4E00\u4E9B Go \u9879\u76EE\u4F1A\u5C06 cmd \u8FD9\u4E2A\u540D\u5B57\u6539\u4E3A app \u6216\u5176\u4ED6\u540D\u5B57\uFF0C\u4F46\u5B83\u7684\u529F\u80FD\u5E76\u6CA1\u6709\u53D8\u3002</p><p>\u63A5\u4E0B\u6765\u770B pkg* \u76EE\u5F55\uFF0C\u8FD9\u662F\u4E00\u4E2A\u5B58\u653E\u9879\u76EE\u81EA\u8EAB\u8981\u4F7F\u7528\uFF0C\u540C\u6837\u4E5F\u662F\u53EF\u6267\u884C\u6587\u4EF6\u5BF9\u5E94 main \u5305\u6240\u4F9D\u8D56\u7684\u5E93\u6587\u4EF6\uFF0C\u540C\u65F6\u8FD9\u4E9B\u76EE\u5F55\u4E0B\u7684\u5305\u8FD8\u53EF\u4EE5\u88AB\u5916\u90E8\u9879\u76EE\u5F15\u7528\u3002</p><p>\u7136\u540E\u662F go.mod \u548C go.sum \uFF0C\u5B83\u4EEC\u662F Go \u8BED\u8A00\u5305\u4F9D\u8D56\u7BA1\u7406\u4F7F\u7528\u7684\u914D\u7F6E\u6587\u4EF6\u3002\u6211\u4EEC\u4E4B\u524D\u8BF4\u8FC7\uFF0CGo 1.11 \u7248\u672C\u5F15\u5165\u4E86 Go Module \u6784\u5EFA\u673A\u5236\uFF0C\u5EFA\u8BAE\u65B0\u9879\u76EE\u90FD\u57FA\u4E8E Go Module \u8FDB\u884C\u5305\u4F9D\u8D56\u7BA1\u7406\uFF0C\u8FD9\u662F\u76EE\u524D Go \u5B98\u65B9\u63A8\u8350\u7684\u6807\u51C6\u6784\u5EFA\u6A21\u5F0F\u3002</p><p>\u5BF9\u4E8E\u8FD8\u6CA1\u6709\u4F7F\u7528 Go Module \u8FDB\u884C\u5305\u4F9D\u8D56\u7BA1\u7406\u7684\u9057\u7559\u9879\u76EE\uFF0C\u6BD4\u5982\u4E4B\u524D\u91C7\u7528 dep\u3001glide \u7B49\u4F5C\u4E3A\u5305\u4F9D\u8D56\u7BA1\u7406\u529F\u80FD\u7684\uFF0C\u5EFA\u8BAE\u5C3D\u5FEB\u8FC1\u79FB\u5230 Go Module \u6A21\u5F0F\u3002Go \u547D\u4EE4\u652F\u6301\u5C06 dep \u7684 Gopkg.toml/Gopkg.lock \u6216 glide \u7684 glide.yaml/glide.lock \u8F6C\u6362\u4E3A go.mod\u3002</p><p>\u6700\u540E\u6211\u4EEC\u518D\u6765\u770B\u770B vendor \u76EE\u5F55\u3002vendor \u662F Go 1.5 \u7248\u672C\u5F15\u5165\u7684\u7528\u4E8E\u5728\u9879\u76EE\u672C\u5730\u7F13\u5B58\u7279\u5B9A\u516B\u672C\u4F9D\u8D56\u5305\u7684\u673A\u5236\uFF0C\u5728 Go Modules \u673A\u5236\u5F15\u5165\u524D\uFF0C\u57FA\u4E8E vendor \u53EF\u4EE5\u5B9E\u73B0\u53EF\u91CD\u73B0\u6784\u5EFA\uFF0C\u4FDD\u8BC1\u57FA\u4E8E\u540C\u4E00\u6E90\u7801\u6784\u5EFA\u51FA\u7684\u53EF\u6267\u884C\u7A0B\u5E8F\u662F\u7B49\u4EF7\u7684\u3002</p><p>\u4E0D\u8FC7\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u5C06 vendor \u76EE\u5F55\u89C6\u4E3A\u4E00\u4E2A\u53EF\u9009\u76EE\u5F55\u3002\u539F\u56E0\u5728\u4E8E\uFF0CGo Modue \u672C\u8EAB\u5C31\u652F\u6301\u53EF\u518D\u73B0\u6784\u5EFA\uFF0C\u800C\u65E0\u9700\u4F7F\u7528 vendor\u3002\u5F53\u7136 Go Module \u673A\u5236\u4E5F\u4FDD\u7559\u4E86 vendor \u76EE\u5F55\uFF08\u901A\u8FC7 go mod vendor \u53EF\u4EE5\u751F\u6210 venfor \u4E0B\u7684\u4F9D\u8D56\u5305\uFF0C\u901A\u8FC7 go build -mod=vendor \u53EF\u4EE5\u5B9E\u73B0\u57FA\u4E8E vendor \u7684\u6784\u5EFA\uFF09\u3002\u4E00\u822C\u6211\u4EEC\u4EC5\u5305\u91CC\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684 vendor \u76EE\u5F55\uFF0C\u5426\u5219\u4F1A\u9020\u6210\u4E0D\u5FC5\u8981\u7684\u4F9D\u8D56\u9009\u62E9\u7684\u590D\u6742\u6027\u3002</p><p>\u5F53\u7136\uFF0C\u8FD8\u6709\u4E9B\u5F00\u53D1\u8005\u559C\u6B22\u501F\u52A9\u4E00\u4E9B\u7B2C\u4E09\u65B9\u7684\u6784\u5EFA\u5DE5\u5177\u8F85\u52A9\u6784\u5EFA\uFF0C\u6BD4\u5982 make\u3001bazel \u7B49\u3002\u4F60\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u5916\u90E8\u8F85\u52A9\u6784\u5EFA\u5DE5\u5177\u6D89\u53CA\u7684\u8BF8\u591A\u811A\u672C\u6587\u4EF6\uFF08\u6BD4\u5982 Makefile\uFF09\u653E\u7F6E\u5728\u9879\u76EE\u7684\u9876\u5C42\u76EE\u5F55\u4E0B\uFF0C\u5C31\u50CF Go \u521B\u4E16\u9879\u76EE\u4E2D\u7684 all.bash \u90A3\u6837\u3002</p><p>\u53E6\u5916\uFF0CGo 1.11 \u5F15\u5165\u7684 module \u662F\u4E00\u7EC4\u540C\u5C5E\u4E8E\u4E00\u4E2A\u7248\u672C\u7BA1\u7406\u5355\u5143\u3002\u7684\u5305\u7684\u96C6\u5408\u3002\u5E76\u4E14 Go \u652F\u6301\u5728\u4E00\u4E2A\u9879\u76EE/\u4ED3\u5E93\u4E2D\u5B58\u5728\u591A\u4E2A module\uFF0C\u4F46\u8FD9\u79CD\u7BA1\u7406\u65B9\u5F0F\u53EF\u80FD\u8981\u6BD4\u4E00\u5B9A\u6BD4\u4F8B\u7684\u4EE3\u7801\u91CD\u590D\u5F15\u5165\u66F4\u591A\u7684\u590D\u6742\u6027\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u9879\u76EE\u7ED3\u6784\u4E2D\u5B58\u5728\u7248\u672C\u7BA1\u7406\u7684 \u201C\u5206\u6B67\u201D\uFF0C\u6BD4\u5982\uFF1Aapp1 \u548C app2 \u7684\u53D1\u5E03\u7248\u672C\u5E76\u4E0D\u603B\u662F\u540C\u6B65\u7684\uFF0C\u5EFA\u8BAE\u4F60\u8BB2\u9879\u76EE\u62C6\u5206\u4E3A\u591A\u4E2A\u9879\u76EE\uFF08\u4ED3\u5E93\uFF09\uFF0C\u6BCF\u4E2A\u9879\u76EE\u5355\u72EC\u4F5C\u4E3A\u4E00\u4E2A module \u8FDB\u884C\u5355\u72EC\u7684\u7248\u672C\u7BA1\u7406\u548C\u6F14\u8FDB\u3002</p><p>\u5F53\u7136\u5982\u679C\u4F60\u975E\u8981\u5728\u4E00\u4E2A\u4EE3\u7801\u4ED3\u5E93\u4E2D\u5B58\u653E\u591A\u4E2A module\uFF0C\u65B0\u7248 Go \u547D\u4EE4\u4E5F\u63D0\u4F9B\u4E86\u5F88\u597D\u7684\u652F\u6301\u3002\u6BD4\u5982\u4E0B\u9762\u4EE3\u7801\u4ED3\u5E93 multi-modules \u4E0B\u9762\u6709\u4E09\u4E2A module\uFF1Amainmodule\u3001module1\u3001module2 \uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree multi-modules</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">multi-modules</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.mod // mainmodule</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 module1</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 go.mod // module1</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 module2</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 go.mod // module2</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 git tag \u540D\u5B57\u6765\u533A\u5206\u4E0D\u540C module \u7248\u672C\u3002\u5176\u4E2D vX.Y.Z \u5F62\u5F0F\u7684 tag \u540D\u5B57\u7528\u4E8E\u4EE3\u7801\u4ED3\u5E93\u4E0B\u7684 mainmodule\uFF1B\u800C module1/vX.Y.Z \u5F62\u5F0F\u7684 tag \u540D\u5B57\u7528\u4E8E\u6307\u793A module1 \u7684\u7248\u672C\uFF1B\u540C\u7406 module2/vX.Y.Z \u5F62\u5F0F\u7684 tag \u540D\u5B57\u7528\u4E8E\u6307\u793A module2 \u7248\u672C\u3002</p><p>\u5982\u679C Go \u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u6709\u4E00\u4E2A\u4E14\u53EA\u6709\u4E00\u4E2A\u53EF\u6267\u884C\u7A0B\u5E8F\u8981\u6784\u5EFA\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u5C06\u4E0A\u9762\u9879\u76EE\u5E03\u5C40\u8FDB\u884C\u7B80\u5316\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -F -L 1 single-exe-layout</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">single-exe-layout</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 internal/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pkg1/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pkg2/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 vendor/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u770B\u5230\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5220\u9664 cmd \u76EE\u5F55\uFF0C\u5C06\u552F\u4E00\u7684\u53EF\u6267\u884C\u7A0B\u5E8F\u7684 main \u5305\u653E\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\uFF0C\u5176\u4ED6\u5E03\u5C40\u5143\u7D20\u7684\u529F\u80FD\u4E0D\u53D8\u3002</p><h4 id="go-\u5E93\u9879\u76EE" tabindex="-1">Go \u5E93\u9879\u76EE <a class="header-anchor" href="#go-\u5E93\u9879\u76EE" aria-hidden="true">#</a></h4><p>\u5230\u73B0\u5728\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u4E86\u89E3 Go \u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u7684\u5178\u578B\u5E03\u5C40\uFF0C\u73B0\u5728\u6211\u4EEC\u518D\u6765\u770B\u4E0B Go \u5E93\u9879\u76EE\u7684\u5178\u578B\u5E03\u5C40\u662F\u600E\u6837\u7684\u3002</p><p>Go \u5E93\u9879\u76EE\u4EC5\u5BF9\u5916\u66B4\u9732 Go \u5305\uFF0C\u8FD9\u7C7B\u9879\u76EE\u7684\u5178\u578B\u5E03\u5C40\u5F62\u5F0F\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -F lib-layout </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">lib-layout</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 internal/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 pkga/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2502   \u2514\u2500\u2500 pkg_a.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 pkgb/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502       \u2514\u2500\u2500 pkg_b.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 pkg1/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 pkg1.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 pkg2/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 pkg2.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u5E93\u7C7B\u578B\u9879\u76EE\u76F8\u6BD4 Go \u53EF\u6267\u884C\u7A0B\u5E8F\u7684\u5E03\u5C40\u8981\u7B80\u5355\u4E00\u4E9B\u3002\u56E0\u4E3A\u8FD9\u7C7B\u9879\u76EE\u4E0D\u9700\u8981\u6784\u5EFA\u53EF\u6267\u884C\u7A0B\u5E8F\uFF0C\u6240\u4EE5\u53BB\u9664\u4E86 cmd \u76EE\u5F55\u3002</p><p>\u5E76\u4E14\uFF0C\u5728\u8FD9\u91CC\uFF0Cvendor \u4E5F\u4E0D\u518D\u662F\u53EF\u9009\u76EE\u5F55\u3002\u5BF9\u4E8E\u5E93\u7C7B\u578B\u9879\u76EE\u800C\u8A00\uFF0C\u6211\u4EEC\u5E76\u4E0D\u63A8\u8350\u5728\u9879\u76EE\u4E2D\u653E\u7F6E vendor \u76EE\u5F55\u53BB\u7F13\u5B58\u5E93\u81EA\u8EAB\u7684\u7B2C\u4E09\u65B9\u4F9D\u8D56\uFF0C\u5E93\u9879\u76EE\u4EC5\u901A\u8FC7 go.mod \u6587\u4EF6\u660E\u786E\u8868\u8FF0\u51FA\u8BE5\u9879\u76EE\u4F9D\u8D56\u7684 modue \u6216\u5305\u4EE5\u53CA\u7248\u672C\u8981\u6C42\u5C31\u53EF\u4EE5\u4E86\u3002</p><p>Go \u5E93\u9879\u76EE\u7684\u521D\u8877\u662F\u4E3A\u4E86\u5BF9\u5916\u90E8\uFF08\u5F00\u6E90\u6216\u7EC4\u7EC7\u5185\u90E8\u516C\u5F00\uFF09\u66B4\u9732 API\uFF0C\u5BF9\u4E8E\u4EC5\u9650\u9879\u76EE\u5185\u90E8\u4F7F\u7528\u800C\u4E0D\u50CF\u66B4\u9732\u5230\u5916\u90E8\u7684\u5305\uFF0C\u53EF\u4EE5\u653E\u5728\u9879\u76EE\u9876\u5C42\u7684 internal \u76EE\u5F55\u4E0B\u9762\u3002\u5728\u540C\u4E00\u9879\u76EE\u4E2D\uFF0Cinternal \u4E5F\u53EF\u4EE5\u6709\u591A\u4E2A\u5E76\u5B58\u5728\u4E8E\u9879\u76EE\u7ED3\u6784\u4E2D\u7684\u4EFB\u610F\u76EE\u5F55\u5C42\u7EA7\uFF0C\u5173\u952E\u662F\u9879\u76EE\u7ED3\u6784\u8BBE\u8BA1\u4EBA\u5458\u8981\u660E\u786E\u5404\u7EA7 internal \u5305\u7684\u5E94\u7528\u5C42\u6B21\u548C\u8303\u56F4\u3002</p><p>\u5BF9\u4E8E\u6709\u4E00\u4E2A\u4E14\u4EC5\u6709\u4E00\u4E2A\u5305\u7684 Go \u5E93\u9879\u76EE\u6765\u8BF4\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u5C06\u4E0A\u9762\u7684\u5E03\u5C40\u505A\u8FDB\u4E00\u6B65\u7B80\u5316\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -L 1 -F single-pkg-lib-layout</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">single-pkg-lib-layout</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 feature1.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 feature2.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 internal/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u7B80\u5316\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u552F\u4E00\u5305\u7684\u6240\u6709\u6E90\u6587\u4EF6\u653E\u7F6E\u5728\u9879\u76EE\u7684\u9876\u5C42\u76EE\u5F55\u4E0B\uFF0C\u5176\u4ED6\u5E03\u5C40\u5143\u7D20\u4F4D\u7F6E\u548C\u529F\u80FD\u4E0D\u53D8\u3002</p><p>\u6211\u4EEC\u5DF2\u7ECF\u4E86\u89E3\u76EE\u524D Go \u9879\u76EE\u7684\u5178\u578B\u7ED3\u6784\u5E03\u5C40\u3002\u9664\u6B64\u4E4B\u5916\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u6CE8\u610F\u4E00\u4E0B\u65E9\u671F Go \u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u7684\u7ECF\u5178\u5E03\u5C40\u3002</p><h3 id="\u65E9\u671F-go-\u53EF\u6267\u884C\u7A0B\u5E8F" tabindex="-1">\u65E9\u671F Go \u53EF\u6267\u884C\u7A0B\u5E8F <a class="header-anchor" href="#\u65E9\u671F-go-\u53EF\u6267\u884C\u7A0B\u5E8F" aria-hidden="true">#</a></h3><p>\u5F88\u591A\u65E9\u671F\u63A5\u7EB3 Go \u8BED\u8A00\u7684\u5F00\u53D1\u8005\u6240\u5EFA\u7ACB\u7684 Go \u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\uFF0C\u6DF1\u53D7 Go \u521B\u4E16\u9879\u76EE 1.4 \u7248\u672C\u4E4B\u524D\u7684\u5E03\u5C40\u5F71\u54CD\uFF0C\u8FD9\u4E9B\u9879\u76EE\u5C06\u6240\u6709\u53EF\u66B4\u9732\u5230\u5916\u9762\u7684 Go \u5305\u805A\u5408\u5728 pkg \u76EE\u5F55\u4E0B\uFF0C\u5C31\u50CF\u524D\u9762 Go 1.3 \u7248\u672C\u4E2D\u7684\u5E03\u5C40\u90A3\u6837\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -L 3 -F early-project-layout</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">early-project-layout</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 exe-layout/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 cmd/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 app1/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2514\u2500\u2500 app2/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 internal/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 pkga/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2514\u2500\u2500 pkgb/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 pkg/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 pkg1/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2514\u2500\u2500 pkg2/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 vendor/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u539F\u672C\u653E\u5728\u9879\u76EE\u6839\u76EE\u5F55\u7684 pkg1 \u548C pkg2 \u516C\u5171\u5305\u88AB\u7EDF\u4E00\u805A\u5408\u5230 pkg \u76EE\u5F55\u4E0B\u3002\u800C\u4E14\uFF0C\u8FD9\u79CD\u65E9\u671F Go \u53EF\u6267\u884C\u7A0B\u5E8F\u7684\u5178\u578B\u5E03\u5C40\u5728 Go \u793E\u533A\u5185\u90E8\u4E5F\u4E0D\u7F3A\u5C11\u53D7\u4F17\uFF0C\u5F88\u591A\u65B0\u5EFA\u7684 Go \u9879\u76EE\u4F9D\u7136\u91C7\u7528\u8FD9\u6837\u7684\u9879\u76EE\u5E03\u5C40\u3002</p><h3 id="\u603B\u7ED3-4" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-4" aria-hidden="true">#</a></h3><p>\u5728\u8FD9\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u5B66\u4E60\u4E86 Go \u521B\u4E16\u9879\u76EE\uFF0C\u5373 Go \u8BED\u8A00\u9879\u76EE\u81EA\u8EAB\u7684\u9879\u76EE\u6E90\u7801\u5E03\u5C40\uFF0C\u4EE5\u53CA\u6F14\u8FDB\u60C5\u51B5\u3002\u5728 Go \u521B\u4E16\u9879\u76EE\u7684\u542F\u53D1\u4E0B\uFF0CGo \u793E\u533A\u5728\u591A\u5E74\u5B9E\u8DF5\u4E2D\u5F62\u6210\u4E86\u5178\u578B\u7684 Go \u9879\u76EE\u7ED3\u6784\u5E03\u5C40\u5F62\u5F0F\u3002</p><p>\u6211\u4EEC\u5C06 Go \u9879\u76EE\u5206\u4E3A\u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u548C Go \u5E93\u9879\u76EE\u4E24\u7C7B\u8FDB\u884C\u4E86\u8BE6\u7EC6\u7684\u9879\u76EE\u7ECF\u5178\u5E03\u5C40\u8BB2\u89E3\u3002</p><p>\u9996\u5148\uFF0C\u5BF9\u4E8E\u4EE5\u751F\u4EA7\u53EF\u6267\u884C\u7A0B\u5E8F\u4E3A\u76EE\u7684\u7684 Go \u9879\u76EE\uFF0C\u5B83\u7684\u5178\u578B\u9879\u76EE\u7ED3\u6784\u5206\u4E3A\u4E94\u90E8\u5206\uFF1A</p><ul><li>\u9879\u76EE\u9876\u5C42\u7684 Go Module \u76F8\u5173\u6587\u4EF6\uFF0C\u5305\u62EC go.mod \u548C go.sum\uFF1B</li><li>cmd \u76EE\u5F55\uFF1A\u5B58\u653E\u9879\u76EE\u8981\u7F16\u8BD1\u6784\u5EFA\u7684\u53EF\u6267\u884C\u6587\u4EF6\u6240\u5BF9\u5E94\u7684 main \u5305\u7684\u6E90\u7801\u6587\u4EF6\uFF1B</li><li>\u9879\u76EE\u5305\u76EE\u5F55\uFF1A\u6BCF\u4E2A\u9879\u76EE\u4E0B\u7684\u975E main \u5305\u90FD\u5E73\u94FA\u5728\u9879\u76EE\u7684\u6839\u76EE\u5F55\u4E0B\uFF0C\u6BCF\u4E2A\u76EE\u5F55\u5BF9\u5E94\u4E00\u4E2A Go \u5305\uFF1B</li><li>internal \u76EE\u5F55\uFF1A\u5B58\u5728\u4EC5\u9879\u76EE\u5185\u90E8\u5F15\u7528\u7684 Go \u5305\uFF0C\u8FD9\u4E9B\u5305\u65E0\u6CD5\u88AB\u9879\u76EE\u4E4B\u5916\u5F15\u7528\uFF1B</li><li>vendor \u76EE\u5F55\uFF1A\u53EF\u9009\u76EE\u5F55\uFF0C\u4E3A\u4E86\u517C\u5BB9 Go 1.5 \u5F15\u5165\u7684 vendor \u6784\u5EFA\u6A21\u5F0F\u800C\u5B58\u5728\u3002\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u7684\u5185\u5BB9\u5747\u7531 Go \u547D\u4EE4\u81EA\u52A8\u7EF4\u62A4\uFF0C\u4E0D\u9700\u8981\u624B\u52A8\u5E72\u9884\u3002</li></ul><p>\u5176\u6B21\uFF0C\u5BF9\u4E8E\u4EE5\u751F\u4EA7\u53EF\u590D\u7528\u5E93\u4E3A\u76EE\u7684\u7684 Go \u9879\u76EE\uFF0C\u5B83\u7684\u5178\u578B\u7ED3\u6784\u7B80\u5355\u8BB8\u591A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u7406\u89E3\u4E3A\u5728 Go \u53EF\u6267\u884C\u7A0B\u5E8F\u9879\u76EE\u7684\u57FA\u7840\u4E0A\u53BB\u6389 cmd \u76EE\u5F55\u548C vendor \u76EE\u5F55\u3002</p><p>\u6700\u540E\uFF0C\u65E9\u671F\u63A5\u7EB3 Go \u8BED\u8A00\u7684\u5F00\u53D1\u8005\u6240\u5EFA\u7ACB\u7684\u9879\u76EE\u5E03\u5C40\u6DF1\u53D7 Go \u521B\u4E16\u9879\u76EE 1.4 \u7248\u672C\u4E4B\u524D\u5E03\u5C40\u7684\u5F71\u54CD\uFF0C\u5C06\u53EF\u5BFC\u51FA\u7684\u516C\u5171\u5305\u653E\u5165\u5355\u72EC\u7684 pkg \u76EE\u5F55\u4E0B\uFF0C\u5BF9\u4E8E\u8FD9\u79CD\u60C5\u51B5\u6211\u4EEC\u4E86\u89E3\u5373\u53EF\u3002\u5BF9\u4E8E\u65B0\u5EFA\u9879\u76EE\uFF0C\u8FD8\u662F\u5EFA\u8BAE\u91C7\u7528\u524D\u9762\u4ECB\u7ECD\u7684\u6807\u51C6\u5E03\u5C40\u5F62\u5F0F\u3002</p><h2 id="_06\u3001\u6784\u5EFA\u6A21\u5F0F\uFF1A\u5305\u4F9D\u8D56\u7BA1\u7406\u95EE\u9898" tabindex="-1">06\u3001\u6784\u5EFA\u6A21\u5F0F\uFF1A\u5305\u4F9D\u8D56\u7BA1\u7406\u95EE\u9898 <a class="header-anchor" href="#_06\u3001\u6784\u5EFA\u6A21\u5F0F\uFF1A\u5305\u4F9D\u8D56\u7BA1\u7406\u95EE\u9898" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u5DF2\u7ECF\u521D\u6B65\u4E86\u89E3 Go \u7A0B\u5E8F\u7684\u7ED3\u6784\uFF0C\u4EE5\u53CA Go \u9879\u76EE\u7684\u5178\u578B\u5E03\u5C40\u3002\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u6765\u7CFB\u7EDF\u5B66\u4E60\u4E0B Go \u5E94\u7528\u7684\u6784\u5EFA\u3002</p><p>\u901A\u8FC7\u8FD9\u7BC7\u6587\u7AE0\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4E86\u89E3 Go \u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u7684\u524D\u4E16\u4ECA\u751F\u3002\u7406\u89E3\u8FD9\u4E2A\u53D1\u5C55\u53F2\u540E\uFF0C\u6211\u4EEC\u518D\u6765\u91CD\u70B9\u63A2\u8BA8\u73B0\u5728\u88AB\u5E7F\u6CDB\u91C7\u7528\u7684\u6784\u5EFA\u6A21\u5F0F\uFF0CGo Module \u7684\u57FA\u672C\u6982\u5FF5\u548C\u5E94\u7528\u6784\u5EFA\u65B9\u5F0F\u3002\u77E5\u9053\u600E\u4E48\u505A\u4E4B\u540E\uFF0C\u6211\u4EEC\u4F1A\u7EE7\u7EED\u5206\u6790 Go Module \u7684\u5DE5\u4F5C\u539F\u7406\u3002\u7ECF\u8FC7\u5C42\u5C42\u6DF1\u5165\u5730\u5206\u6790\uFF0C\u4F60\u5C31\u80FD\u5F7B\u5E95\u3001\u900F\u5F7B\u5730\u638C\u63E1 Go Module \u6784\u5EFA\u6A21\u5F0F\u3002</p><p>\u6211\u4EEC\u5148\u6765\u4E86\u89E3\u4E00\u4E0B Go \u6784\u5EFA\u6A21\u5F0F\u7684\u6F14\u5316\u8FC7\u7A0B\uFF0C\u5F04\u6E05\u695A Go \u6838\u5FC3\u5F00\u53D1\u56E2\u961F\u4E3A\u4EC0\u4E48\u8981\u5F15\u5165 Go Module \u6784\u5EFA\u6A21\u5F0F\u3002</p><h3 id="go-\u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u8FC7\u7A0B" tabindex="-1">Go \u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u8FC7\u7A0B <a class="header-anchor" href="#go-\u6784\u5EFA\u6A21\u5F0F\u6F14\u5316\u8FC7\u7A0B" aria-hidden="true">#</a></h3><p>Go \u7A0B\u5E8F\u7531 Go \u5305\u7EC4\u5408\u800C\u6210\uFF0CGo \u7A0B\u5E8F\u7684\u6784\u5EFA\u8FC7\u7A0B\u5C31\u662F\u786E\u5B9A\u5305\u7248\u672C\u3001\u7F16\u8BD1\u5305\u4EE5\u53CA\u7F16\u8BD1\u540E\u5F97\u5230\u7684\u76EE\u6807\u6587\u4EF6\u94FE\u63A5\u5728\u4E00\u8D77\u7684\u8FC7\u7A0B\u3002</p><p>Go \u8BED\u8A00\u7684\u6784\u5EFA\u6A21\u5F0F\u5386\u7ECF\u4E86\u4E09\u4E2A\u8FED\u4EE3\u548C\u6F14\u5316\u8FC7\u7A0B\uFF0C\u5206\u522B\u662F\u521D\u671F\u7684 GOPATH\u30011.5 \u7248\u672C\u7684 Vendor \u673A\u5236\uFF0C\u4EE5\u53CA\u73B0\u5728\u7684 Go Module\u3002</p><h4 id="gopath" tabindex="-1">GOPATH <a class="header-anchor" href="#gopath" aria-hidden="true">#</a></h4><p>Go \u8BED\u8A00\u5728\u9996\u6B21\u5F00\u6E90\u65F6\uFF0C\u5C31\u5185\u7F6E\u4E86\u4E00\u79CD\u540D\u4E3A GOOPATH \u7684\u6784\u5EFA\u6A21\u5F0F\u3002\u5728\u8FD9\u79CD\u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0CGo \u7F16\u8BD1\u5668\u53EF\u4EE5\u5728\u672C\u5730 GOPATh \u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u7684\u8DEF\u5F84\u4E0B\uFF0C\u641C\u5BFB Go \u7A0B\u5E8F\u4F9D\u8D56\u7684\u7B2C\u4E09\u65B9\u5305\u3002\u5982\u679C\u5B58\u5728\uFF0C\u5C31\u4F7F\u7528\u8FD9\u4E2A\u672C\u5730\u5305\u8FDB\u884C\u7F16\u8BD1\uFF1B\u5982\u679C\u4E0D\u5B58\u5728\uFF0C\u5C31\u4F1A\u62A5\u7F16\u8BD1\u9519\u8BEF\u3002</p><p>\u8FD9\u91CC\u7ED9\u51FA\u4E00\u6BB5\u5728 GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0B\u7F16\u5199\u7684\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  logrus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, gopath mode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u6BB5\u4EE3\u7801\u4F9D\u8D56\u7B2C\u4E09\u65B9\u5305 logrus\uFF08logrus \u662F Go \u793E\u533A\u4F7F\u7528\u6700\u4E3A\u5E7F\u6CDB\u7684\u7B2C\u4E09\u65B9 log \u5305\uFF09\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u8FD9\u4E2A\u6784\u5EFA\u8FC7\u7A0B\u6F14\u793A Go \u7F16\u8BD1\u5668\u5728 GOPATH \u73AF\u5883\u53D8\u91CF\u6240\u914D\u7F6E\u7684\u76EE\u5F55\u4E0B\uFF0C\u65E0\u6CD5\u627E\u5230\u7A0B\u5E8F\u4F9D\u8D56\u7684 logrus \u5305\u800C\u62A5\u9519\u7684\u60C5\u51B5\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build main.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">main.go:3:8: cannot find package &quot;github.com/sirupsen/logrus&quot; in any of:</span></span>
<span class="line"><span style="color:#A6ACCD;">  /Users/heora/.bin/go1.10.8/src/github.com/sirupsen/logrus (from $GOROOT)</span></span>
<span class="line"><span style="color:#A6ACCD;">  /Users/heora/Go/src/github.com/sirupsen/logrus (from $GOPATH)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u90A3\u4E48 Go \u7F16\u8BD1\u5668\u5728 GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u662F\u5982\u4F55\u641C\u5BFB\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u5462\uFF1F</p><p>\u6211\u4EEC\u5148\u5047\u5B9A Go \u7A0B\u5E8F\u5BFC\u5165\u4E86 <a href="http://github.com/user/repo" target="_blank" rel="noreferrer">github.com/user/repo</a> \u8FD9\u4E2A\u5305\uFF0C\u6211\u4EEC\u4E5F\u540C\u65F6\u5047\u5B9A\u5F53\u524D GIOPATH \u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u7684\u503C\u4E3A\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">export GOPATH=/usr/local/goprojects:/home/heora/go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5728 GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0CGo \u7F16\u8BD1\u5668\u5728\u7F16\u8BD1 Go \u7A0B\u5E8F\u65F6\uFF0C\u5C31\u4F1A\u5728\u4E0B\u9762\u4E24\u4E2A\u8DEF\u5F84\u4E0B\u641C\u7D22\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u662F\u5426\u5B58\u5728\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">/usr/local/goprojects/src/github.com/user/repo</span></span>
<span class="line"><span style="color:#A6ACCD;">/home/heora/go/src/github.com/user/repo</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><blockquote><p>\u5982\u679C\u6CA1\u6709\u663E\u5F0F\u8BBE\u7F6E GOPATH \u73AF\u5883\u53D8\u91CF\uFF0C\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u4E0B\u9ED8\u8BA4\u503C\u7684\u8DEF\u5F84\u4E0D\u540C\uFF0C\u5728 macOS \u6216 Linux \u4E0A\uFF0C\u9ED8\u8BA4\u503C\u90FD\u662F $HOME/go\u3002</p></blockquote><p>\u8A00\u5F52\u6B63\u4F20\uFF0C\u5F53\u9047\u5230\u4E0A\u9762\u4F8B\u5B50\u8FD9\u6837\uFF0C\u6CA1\u6709\u5728\u672C\u5730\u627E\u5230\u7A0B\u5E8F\u7684\u7B2C\u4E09\u65B9\u5305\u7684\u60C5\u51B5\uFF0C\u6211\u4EEC\u8BE5\u5982\u4F55\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF1F</p><p>\u8FD9\u4E2A\u65F6\u5019\u5C31\u8981\u7528\u5230 go get\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 go get \u547D\u4EE4\u5C06\u672C\u5730\u7F3A\u5931\u7684\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u4E0B\u8F7D\u5230\u672C\u5730\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go get github.com/sirupsen/logrus</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u91CC\u7684 go get \u547D\u4EE4\uFF0C\u4E0D\u4EC5\u80FD\u5C06 logrus \u5305\u4E0B\u8F7D\u5230 GIOPATH \u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u7684\u76EE\u5F55\u4E0B\uFF0C\u5B83\u8FD8\u4F1A\u68C0\u67E5 logrus \u7684\u4F9D\u8D56\u5305\u5728\u672C\u5730\u662F\u5426\u5B58\u5728\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\uFF0Cgo get \u4E5F\u4F1A\u4E00\u5E76\u5C06\u5B83\u4EEC\u4E0B\u8F7D\u5230\u672C\u5730\u3002</p><p>\u4E0D\u8FC7\uFF0Cgo get \u4E0B\u8F7D\u7684\u5305\u662F\u5728\u90A3\u4E2A\u65F6\u523B\u7684\u6700\u65B0\u4E3B\u7EBF\u7248\u672C\uFF0C\u8FD9\u6837\u4F1A\u7ED9\u540E\u7EED Go \u7A0B\u5E8F\u7684\u6784\u5EFA\u5E26\u6765\u4E00\u4E9B\u95EE\u9898\u3002\u4F8B\u5982\uFF1A</p><ul><li>\u4F9D\u8D56\u5305\u6301\u7EED\u6F14\u8FDB\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u4E0D\u540C\u5F00\u53D1\u8005\u5728\u4E0D\u540C\u65F6\u95F4\u83B7\u53D6\u548C\u7F16\u8BD1\u540C\u4E00\u4E2A Go \u5305\u65F6\uFF0C\u5F97\u5230\u4E0D\u540C\u7684\u7ED3\u679C\uFF0C\u4E0D\u80FD\u4FDD\u8BC1\u53EF\u91CD\u73B0\u6784\u5EFA\uFF08Reproduceable Build\uFF09\u3002</li><li>\u5982\u679C\u4F9D\u8D56\u5305\u5F15\u5165\u4E0D\u517C\u5BB9\u4EE3\u7801\uFF0C\u7A0B\u5E8F\u5C06\u65E0\u6CD5\u901A\u8FC7\u7F16\u8BD1\u3002</li><li>\u5982\u679C\u4F9D\u8D56\u5305\u56E0\u5F15\u5165\u65B0\u4EE3\u7801\u800C\u65E0\u6CD5\u6B63\u5E38\u901A\u8FC7\u7F16\u8BD1\uFF0C\u5E76\u4E14\u8BE5\u4F9D\u8D56\u5305\u4F5C\u8005\u53C8\u6CA1\u53CA\u65F6\u4FEE\u590D\u8FD9\u4E2A\u95EE\u9898\uFF0C\u8FD9\u79CD\u9519\u8BEF\u4E5F\u4F1A\u5BFC\u81F4\u7A0B\u5E8F\u65E0\u6CD5\u901A\u8FC7\u7F16\u8BD1\u3002</li></ul><h4 id="vendor-\u673A\u5236" tabindex="-1">vendor \u673A\u5236 <a class="header-anchor" href="#vendor-\u673A\u5236" aria-hidden="true">#</a></h4><p>\u5728 GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0CGo \u7F16\u8BD1\u5668\u5B9E\u8D28\u4E0A\u5E76\u6CA1\u6709\u5173\u6CE8 Go \u9879\u76EE\u6240\u4F9D\u8D56\u7684\u7B2C\u4E09\u65B9\u5305\u7684\u7248\u672C\u3002\u4F46 Go \u5F00\u53D1\u8005\u5E0C\u671B\u81EA\u5DF1\u7684 Go \u9879\u76EE\u6240\u4F9D\u8D56\u7684\u7B2C\u4E09\u65B9\u5305\u7248\u672C\u53EF\u4EE5\u53D7\u81EA\u5DF1\u7684\u63A7\u5236\uFF0C\u800C\u4E0D\u662F\u968F\u610F\u53D8\u5316\u3002\u4E8E\u662F Go \u6838\u5FC3\u5F00\u53D1\u56E2\u961F\u5F15\u5165 Vendor \u673A\u5236\u8BD5\u56FE\u89E3\u51B3\u4E0A\u9762\u7684\u95EE\u9898\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u5C31\u6765\u770B\u770B vendor \u673A\u5236\u662F\u5982\u4F55\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u7684\u3002</p><p>Go \u5728 1.5 \u7248\u672C\u4E2D\u5F15\u5165 vendor \u673A\u5236\u3002vendor \u673A\u5236\u672C\u8D28\u4E0A\u5C31\u662F\u5728 Go \u9879\u76EE\u7684\u67D0\u4E2A\u7279\u5B9A\u76EE\u5F55\u4E0B\uFF0C\u5C06\u9879\u76EE\u7684\u6240\u6709\u4F9D\u8D56\u5305\u7F13\u5B58\u8D77\u6765\uFF0C\u8FD9\u4E2A\u7279\u5B9A\u76EE\u5F55\u540D\u5C31\u662F vendor\u3002</p><p>Go \u7F16\u8BD1\u5668\u4F1A\u4F18\u5148\u611F\u77E5\u548C\u4F7F\u7528 vendor \u76EE\u5F55\u4E0B\u7F13\u5B58\u7684\u7B2C\u4E09\u65B9\u5305\u7248\u672C\uFF0C\u800C\u4E0D\u662F GOPATH \u73AF\u5883\u53D8\u91CF\u6240\u914D\u7F6E\u7684\u8DEF\u5F84\u4E0B\u7684\u7B2C\u4E09\u65B9\u5305\u7248\u672C\u3002\u8FD9\u6837\uFF0C\u65E0\u8BBA\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\u81EA\u5DF1\u5982\u4F55\u53D8\u5316\uFF0C\u65E0\u8BBA GOPATH \u73AF\u5883\u53D8\u91CF\u6240\u914D\u7F6E\u7684\u8DEF\u5F84\u4E0B\u7684\u7B2C\u4E09\u65B9\u5305\u662F\u5426\u5B58\u5728\u3001\u7248\u672C\u662F\u4EC0\u4E48\uFF0C\u90FD\u4E0D\u4F1A\u5F71\u54CD Go \u7A0B\u5E8F\u7684\u6784\u5EFA\u3002</p><p>\u5982\u679C\u4F60\u5C06 vendor \u76EE\u5F55\u548C\u9879\u76EE\u6E90\u7801\u4E00\u6837\u63D0\u4EA4\u5230\u4EE3\u7801\u4ED3\u5E93\uFF0C\u90A3\u4E48\u5176\u4ED6\u5F00\u53D1\u8005\u4E0B\u8F7D\u4F60\u7684\u9879\u76EE\u540E\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u53EF\u91CD\u73B0\u7684\u6784\u5EFA\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u4F7F\u7528 vendor \u673A\u5236\u7BA1\u7406\u7B2C\u4E09\u65B9\u4F9D\u8D56\u5305\uFF0C\u6700\u4F73\u5B9E\u8DF5\u5C31\u662F\u5C06 vendor \u4E00\u5E76\u63D0\u4EA4\u5230\u4EE3\u7801\u4ED3\u5E93\u4E2D\u3002</p><p>\u4E0B\u9762\u8FD9\u4E2A\u76EE\u5F55\u7ED3\u6784\u5C31\u662F\u6DFB\u52A0 vendor \u76EE\u5F55\u540E\u7684\u7ED3\u679C\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 vendor/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 github.com/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2514\u2500\u2500 sirupsen/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502       \u2514\u2500\u2500 logrus/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 golang.org/</span></span>
<span class="line"><span style="color:#A6ACCD;">        \u2514\u2500\u2500 x/</span></span>
<span class="line"><span style="color:#A6ACCD;">            \u2514\u2500\u2500 sys/</span></span>
<span class="line"><span style="color:#A6ACCD;">                \u2514\u2500\u2500 unix/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6DFB\u52A0\u5B8C vendor \u540E\uFF0C\u91CD\u65B0\u7F16\u8BD1 main.go\uFF0C\u8FD9\u4E2A\u65F6\u5019 Go \u7F16\u8BD1\u5668\u5C31\u4F1A\u5728 vendor \u76EE\u5F55\u4E0B\u641C\u7D22\u7A0B\u5E8F\u4F9D\u8D56\u7684 logrus \u5305\u4EE5\u53CA\u540E\u8005\u4F9D\u8D56\u7684 go.lang/x/sys/unix \u5305\u4E86\u3002</p><p>\u8FD9\u91CC\u8FD8\u8981\u6CE8\u610F\u4E00\u70B9\uFF0C\u8981\u60F3\u5F00\u542F vendor \u673A\u5236\uFF0C\u4F60\u7684 Go \u9879\u76EE\u5FC5\u987B\u4F4D\u4E8E GOPATH \u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u7684\u67D0\u4E2A\u8DEF\u5F84\u7684 src \u76EE\u5F55\u4E0B\u9762\u3002\u5982\u679C\u4E0D\u6EE1\u8DB3\u8FD9\u4E00\u8DEF\u5F84\u8981\u6C42\uFF0C\u90A3\u4E48 Go \u7F16\u8BD1\u5668\u662F\u4E0D\u4F1A\u67E5\u627E Go \u9879\u76EE\u76EE\u5F55\u4E0B\u7684 vendor \u76EE\u5F55\u7684\u3002</p><p>\u4E0D\u8FC7 vendor \u673A\u5236\u867D\u7136\u4E00\u5B9A\u7A0B\u5E8F\u89E3\u51B3\u4E86 Go \u7A0B\u5E8F\u53EF\u91CD\u73B0\u6784\u5EFA\u7684\u95EE\u9898\uFF0C\u4F46\u5BF9\u5F00\u53D1\u8005\u6765\u8BF4\uFF0C\u5B83\u7684\u4F53\u9A8C\u5374\u5E76\u4E0D\u53CB\u597D\u3002\u4E00\u65B9\u9762\uFF0CGo \u9879\u76EE\u5FC5\u987B\u653E\u5728 GOPATH \u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u7684\u8DEF\u5F84\u4E0B\uFF0C\u5E9E\u5927\u7684 vendor \u76EE\u5F55\u9700\u8981\u63D0\u4EA4\u5230\u4EE3\u7801\u4ED3\u5E93\uFF0C\u4E0D\u4EC5\u5360\u7528\u4EE3\u7801\u4ED3\u5E93\u7A7A\u95F4\uFF0C\u51CF\u6162\u4ED3\u5E93\u4E0B\u8F7D\u548C\u66F4\u65B0\u901F\u5EA6\uFF0C\u800C\u4E14\u8FD8\u4F1A\u5E72\u6270\u4EE3\u7801\u8BC4\u5BA1\uFF0C\u5BF9\u5B9E\u65BD\u4EE3\u7801\u7EDF\u8BA1\u7B49\u5F00\u53D1\u8005\u6548\u80FD\u5DE5\u5177\u4E5F\u6709\u8F83\u5927\u5F71\u54CD\u3002</p><p>\u53E6\u5916\uFF0C\u8FD8\u9700\u8981\u624B\u52A8\u7BA1\u7406 vendor \u4E0B\u9762\u7684\u4F9D\u8D56\u5305\uFF0C\u5305\u62EC\u9879\u76EE\u4F9D\u8D56\u5305\u7684\u5206\u6790\u3001\u7248\u672C\u7684\u8BB0\u5F55\u3001\u4F9D\u8D56\u5305\u83B7\u53D6\u548C\u5B58\u653E\u7B49\u7B49\u3002</p><p>\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0CGo \u6838\u5FC3\u56E2\u961F\u4E0E\u793E\u533A\u5C06 Go \u6784\u5EFA\u7684\u91CD\u70B9\u8F6C\u79FB\u5230\u5982\u4F55\u89E3\u51B3\u5305\u4F9D\u8D56\u7BA1\u7406\u4E0A\u3002Go \u793E\u533A\u5148\u540E\u5F00\u53D1\u4E86\u8BF8\u5982 gb\u3001glide\u3001dep \u7B49\u5DE5\u5177\uFF0C\u6765\u5E2E\u52A9 Go \u5F00\u53D1\u8005\u5BF9 vendor \u4E0B\u7684\u7B2C\u4E09\u65B9\u5305\u8FDB\u884C\u81EA\u52A8\u4F9D\u8D56\u5206\u6790\u548C\u7BA1\u7406\uFF0C\u4F46\u8FD9\u4E9B\u5DE5\u5177\u4E5F\u90FD\u6709\u81EA\u8EAB\u7684\u95EE\u9898\u3002</p><h4 id="gomodule" tabindex="-1">GoModule <a class="header-anchor" href="#gomodule" aria-hidden="true">#</a></h4><p>\u5C31\u5728 Go \u793E\u533A\u4E3A\u5305\u4F9D\u8D56\u7BA1\u7406\u7126\u8651\u5E76\u62B1\u6028\u6CA1\u6709\u5B98\u65B9\u5DE5\u5177\u65F6\uFF0CGo \u6838\u5FC3\u56E2\u961F\u57FA\u4E8E\u793E\u533A\u5B9E\u8DF5\u7684\u7ECF\u9A8C\u548C\u6559\u8BAD\uFF0C\u63A8\u51FA\u5B98\u65B9\u89E3\u51B3\u65B9\u6848\uFF1AGo Module\u3002</p><p>\u4ECE Go 1.11 \u7248\u672C\u5F00\u59CB\uFF0C\u9664\u4E86 GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E4B\u5916\uFF0CGo \u53C8\u589E\u52A0\u4E86\u4E00\u79CD Go Module \u6784\u5EFA\u6A21\u5F0F\u3002</p><p>\u4E00\u4E2A Go Moudle \u662F\u4E00\u4E2A Go \u5305\u7684\u96C6\u5408\u3002module \u662F\u6709\u7248\u672C\u7684\uFF0C\u6240\u4EE5 module \u4E0B\u7684\u5305\u4E5F\u5177\u6709\u7248\u672C\u5C5E\u6027\u3002\u8FD9\u4E2A module \u4E0E\u8FD9\u4E9B\u5305\u4F1A\u7EC4\u6210\u4E00\u4E2A\u72EC\u7ACB\u7684\u7248\u672C\u5355\u5143\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u4E00\u8D77\u6253\u7248\u672C\u3001\u53D1\u5E03\u548C\u5206\u53D1\u3002</p><p>\u5728 Go Module \u6A21\u5F0F\u4E0B\uFF0C\u901A\u5E38\u4E00\u4E2A\u4EE3\u7801\u4ED3\u5E93\u5BF9\u5E94\u4E00\u4E2A Go Module\u3002\u4E00\u4E2A Go Module \u7684\u9876\u5C42\u76EE\u5F55\u4E0B\u4F1A\u653E\u7F6E\u4E00\u4E2A go.mod \u6587\u4EF6\uFF0C\u6BCF\u4E2A go.mod \u6587\u4EF6\u4F1A\u5B9A\u4E49\u552F\u4E00\u4E00\u4E2A module\uFF0CGo Module \u4E0E go.mod \u662F\u4E00\u4E00\u5BF9\u5E94\u7684\u3002</p><p>go.mod \u6587\u4EF6\u6240\u5728\u7684\u9876\u5C42\u76EE\u5F55\u4E5F\u88AB\u79F0\u4E3A module \u7684\u6839\u76EE\u5F55\uFF0Cmodule \u6839\u76EE\u5F55\u4EE5\u53CA\u5B83\u5B50\u76EE\u5F55\u4E0B\u7684\u6240\u6709 Go \u5305\u5747\u5F52\u5C5E\u4E8E\u8FD9\u4E2A Go Module\uFF0C\u8FD9\u4E2A module \u4E5F\u88AB\u79F0\u4E3A main module\u3002</p><h3 id="\u521B\u5EFA-go-module" tabindex="-1">\u521B\u5EFA Go Module <a class="header-anchor" href="#\u521B\u5EFA-go-module" aria-hidden="true">#</a></h3><p>Go Module \u7684\u539F\u7406\u548C\u4F7F\u7528\u65B9\u6CD5\u5176\u5B9E\u6709\u70B9\u590D\u6742\uFF0C\u6211\u4EEC\u5148\u4ECE\u5982\u4F55\u521B\u5EFA\u4E00\u4E2A Go Module \u5F00\u59CB\u8BF4\u8D77\u3002</p><p>\u57FA\u4E8E\u5F53\u524D\u9879\u76EE\u521B\u5EFA\u4E00\u4E2A Go Module\uFF0C\u901A\u5E38\u6709\u4EE5\u4E0B\u51E0\u4E2A\u6B65\u9AA4\uFF1A</p><ul><li>\u7B2C\u4E00\u6B65\uFF0C\u901A\u8FC7 go mod init \u521B\u5EFA go.mod \u6587\u4EF6\uFF0C\u5C06\u5F53\u524D\u9879\u76EE\u53D8\u6210\u4E00\u4E2A Go Module\uFF1B</li><li>\u7B2C\u4E8C\u6B65\uFF0C\u901A\u8FC7 go mod tidy \u547D\u4EE4\u81EA\u52A8\u66F4\u65B0\u5F53\u524D module \u7684\u4F9D\u8D56\u4FE1\u606F\uFF1B</li><li>\u7B2C\u4E09\u6B65\uFF0C\u6267\u884C go build\uFF0C\u6267\u884C\u65B0 module \u6784\u5EFA\u3002</li></ul><p>\u9996\u5148\u6211\u4EEC\u5148\u5EFA\u7ACB\u4E00\u4E2A\u65B0\u9879\u76EE module-mode \u7528\u6765\u6F14\u793A Go Module \u7684\u521B\u5EFA\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	logrus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, go module mode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u9879\u76EE\u76EE\u5F55\u4E0B\u53EA\u6709 main.go \u4E00\u4E2A\u6E90\u6587\u4EF6\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u6765\u4E3A\u8FD9\u4E2A\u9879\u76EE\u6DFB\u52A0 Go Module \u652F\u6301\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 go mod init \u547D\u4EE4\u4E3A\u8FD9\u4E2A\u9879\u76EE\u521B\u5EFA\u4E00\u4E2A Go Module\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod init github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go: creating new go.mod: module github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;">go: to add module requirements and sums:</span></span>
<span class="line"><span style="color:#A6ACCD;">	go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>go mod init \u4F1A\u5728\u5F53\u524D\u9879\u76EE\u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A go.mod \u6587\u4EF6\uFF0C\u8FD9\u4E2A go.mod \u6587\u4EF6\u5C31\u5C06\u5F53\u524D\u9879\u76EE\u53D8\u6210\u4E00\u4E2A Go Module\uFF0C\u9879\u76EE\u6839\u76EE\u5F55\u53D8\u6210 module \u6839\u76EE\u5F55\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">module github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go 1.19</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u4E2A go.mod \u73B0\u5728\u5904\u4E8E\u521D\u59CB\u72B6\u6001\uFF0C\u5B83\u7684\u5730\u4E00\u884C\u5185\u5BB9\u7528\u4E8E\u58F0\u660E module \u8DEF\u5F84\uFF08module path\uFF09\uFF0C\u6700\u540E\u4E00\u884C\u662F\u4E00\u4E2A Go \u7248\u672C\u6307\u793A\u7B26\uFF0C\u7528\u4E8E\u8868\u793A\u8FD9\u4E2A module \u7279\u5B9A\u7684 Go \u7248\u672C\u3002</p><p>go mod init \u547D\u4EE4\u8FD8\u8F93\u51FA\u4E24\u884C\u65E5\u5FD7\uFF0C\u63D0\u793A\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 go mod tidy \u547D\u4EE4\uFF0C\u6DFB\u52A0 module \u4F9D\u8D56\u4EE5\u53CA\u6821\u9A8C\u548C\u3002go mod tidy \u547D\u4EE4\u4F1A\u626B\u63CF Go \u6E90\u7801\uFF0C\u5E76\u81EA\u52A8\u627E\u51FA\u9879\u76EE\u4F9D\u8D56\u7684\u5916\u90E8 Go Module \u4EE5\u53CA\u7248\u672C\uFF0C\u5E76\u4E0B\u8F7D\u8FD9\u4E9B\u4F9D\u8D56\u66F4\u65B0\u672C\u5730\u7684 go.mod \u6587\u4EF6\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go: finding module for package github.com/sirupsen/logrus</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/sirupsen/logrus v1.9.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: found github.com/sirupsen/logrus in github.com/sirupsen/logrus v1.9.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/stretchr/testify v1.7.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5BF9\u4E8E\u4E00\u4E2A\u5904\u4E8E\u521D\u59CB\u72B6\u6001\u7684 module \u800C\u8A00\uFF0Cgo mod tidy \u5206\u6790\u4E86\u5F53\u524D main module \u7684\u6240\u6709\u6E90\u6587\u4EF6\uFF0C\u627E\u51FA\u5F53\u524D main module \u7684\u6240\u6709\u7B2C\u4E09\u65B9\u4F9D\u8D56\uFF0C\u786E\u5B9A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7248\u672C\uFF0C\u8FD8\u4E0B\u8F7D\u4E86\u5F53\u524D main module \u7684\u76F4\u63A5\u4F9D\u8D56\u5305\uFF08\u6BD4\u5982 logrus\uFF09\uFF0C\u4EE5\u53CA\u76F8\u5173\u95F4\u63A5\u4F9D\u8D56\u5305\uFF08\u76F4\u63A5\u4F9D\u8D56\u5305\u7684\u4F9D\u8D56\uFF0C\u6BD4\u5982\u4E0A\u9762\u7684 <a href="http://golang.org/x/sys" target="_blank" rel="noreferrer">golang.org/x/sys</a> \u7B49\uFF09\u3002</p><p>Go Module \u8FD8\u652F\u6301\u901A\u8FC7 Go Module \u4EE3\u7406\u670D\u52A1\u52A0\u901F\u7B2C\u4E09\u65B9\u4F9D\u8D56\u7684\u4E0B\u8F7D\u3002\u6211\u4EEC\u4E4B\u524D\u5728\u8BB2\u89E3 Go \u73AF\u5883\u5B89\u88C5\u65F6\uFF0C\u5C31\u63D0\u5230\u8FC7\u914D\u7F6E GOPROXY \u73AF\u5883\u53D8\u91CF\uFF0C\u8FD9\u4E2A\u73AF\u5883\u53D8\u91CF\u7684\u9ED8\u8BA4\u503C\u662F \u201C<a href="https://proxy.glang.org" target="_blank" rel="noreferrer">https://proxy.glang.org</a>,direct\u201D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u914D\u7F6E\u9002\u5408\u4E2D\u56FD\u5927\u9646\u5730\u533A\u7684 Go Module \u4EE3\u7406\u670D\u52A1\u3002</p><p>\u7531 go mod tidy \u4E0B\u8F7D\u7684\u4F9D\u8D56 module \u4F1A\u88AB\u653E\u7F6E\u5728\u672C\u5730\u7684 module \u7F13\u5B58\u8DEF\u5F84\u4E0B\uFF0C\u9ED8\u8BA4\u503C $GOPATH[0]/pkg/mod\uFF0CGo 1.15 \u53CA\u4EE5\u540E\u7248\u672C\u53EF\u4EE5\u901A\u8FC7 GOMODCACHE \u73AF\u5883\u53D8\u91CF\uFF0C\u81EA\u5B9A\u4E49\u672C\u5730 module \u7684\u7F13\u5B58\u8DEF\u5F84\u3002</p><p>\u6267\u884C go mod tidy \u540E\uFF0Cgo.mod \u7684\u5185\u5BB9\u66F4\u65B0\u5982\u4E0B\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">module github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go 1.19</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require github.com/sirupsen/logrus v1.9.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5F53\u524D module \u7684\u76F4\u63A5\u4F9D\u8D56 logrus\uFF0C\u8FD8\u6709\u5B83\u7684\u7248\u672C\u4FE1\u606F\u90FD\u4F1A\u5199\u5165\u5230 go.mod \u6587\u4EF6\u7684 require \u6BB5\u4E2D\u3002\u5E76\u4E14\uFF0C\u6267\u884C\u5B8C go mod tidy \u540E\uFF0C\u5F53\u524D\u9879\u76EE\u9664\u4E86 go.mod \u6587\u4EF6\u5916\uFF0C\u8FD8\u591A\u4E86\u4E00\u4E2A\u65B0\u6587\u4EF6 go.sum\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">github.com/davecgh/go-spew v1.1.0/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/sirupsen/logrus v1.9.0 h1:trlNQbNUG3OdDrDil03MCb1H2o9nJ1x4/5LYw7byDE0=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/sirupsen/logrus v1.9.0/go.mod h1:naHLuLoDiP4jHNo9R0sCBMtWGeIprob74mVsIT4qYEQ=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/stretchr/objx v0.1.0/go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/stretchr/testify v1.7.0 h1:nwc3DEeHmmLAfoZucVR881uASk0Mfjw8xYJ99tb5CcY=</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/stretchr/testify v1.7.0/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=</span></span>
<span class="line"><span style="color:#A6ACCD;">golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 h1:0A+M6Uqn+Eje4kHMK80dtF3JCXC4ykBgQG4Fe06QRhQ=</span></span>
<span class="line"><span style="color:#A6ACCD;">golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=</span></span>
<span class="line"><span style="color:#A6ACCD;">gopkg.in/check.v1 v0.0.0-20161208181325-20d25e280405/go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof/cbN4VW5Yz0=</span></span>
<span class="line"><span style="color:#A6ACCD;">gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c h1:dUUwHk2QECo/6vqA44rthZ8ie2QXMNeKRTHCNY2nXvo=</span></span>
<span class="line"><span style="color:#A6ACCD;">gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u8FD9\u540C\u6837\u662F\u7531 go mod \u76F8\u5173\u547D\u4EE4\u7EF4\u62A4\u7684\u4E00\u4E2A\u6587\u4EF6\uFF0C\u5B83\u5B58\u653E\u7279\u5B9A\u7248\u672C\u7684 module \u5185\u5BB9\u7684\u54C8\u5E0C\u503C\u3002</p><p>\u8FD9\u662F Go Module \u7684\u4E00\u4E2A\u5B89\u5168\u63AA\u65BD\u3002\u5F53\u5C06\u6765\u8FD9\u91CC\u7684\u67D0\u4E2A module \u7684\u7279\u5B9A\u7248\u672C\u88AB\u518D\u6B21\u4E0B\u8F7D\u65F6\uFF0Cgo \u547D\u4EE4\u4F1A\u4F7F\u7528 go.sum \u6587\u4EF6\u4E2D\u5BF9\u5E94\u7684\u54C8\u5E0C\u503C\uFF0C\u548C\u65B0\u4E0B\u8F7D\u7684\u5185\u5BB9\u7684\u54C8\u5E0C\u503C\u8FDB\u884C\u6BD4\u5BF9\uFF0C\u53EA\u6709\u54C8\u5E0C\u503C\u6BD4\u5BF9\u4E00\u81F4\u624D\u662F\u5408\u6CD5\u7684\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u4FDD\u8BC1\u4F60\u7684\u9879\u76EE\u6240\u4F9D\u8D56\u7684 module \u5185\u5BB9\uFF0C\u4E0D\u4F1A\u88AB\u6076\u610F\u6216\u610F\u5916\u7BE1\u6539\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u63A8\u8350\u628A go.mod \u548C go.sum \u4E24\u4E2A\u6587\u4EF6\u53CA\u6E90\u7801\uFF0C\u4E00\u5E76\u63D0\u4EA4\u5230\u4EE3\u7801\u7248\u672C\u63A7\u5236\u670D\u52A1\u5668\u4E0A\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u53EA\u9700\u5728\u5F53\u524D module \u7684\u6839\u8DEF\u5F84\u4E0B\uFF0C\u6267\u884C go build \u5C31\u53EF\u4EE5\u5B8C\u6210 module \u7684\u6784\u5EFA\u3002</p><p>go build \u547D\u4EE4\u4F1A\u8BFB\u53D6 go.mod \u4E2D\u7684\u4F9D\u8D56\u53CA\u7248\u672C\u4FE1\u606F\uFF0C\u5E76\u5728\u672C\u5730 module \u7F13\u5B58\u8DEF\u5F84\u4E0B\u627E\u5230\u5BF9\u5E94\u7248\u672C\u7684\u4F9D\u8D56 module\uFF0C\u6267\u884C\u7F16\u8BD1\u548C\u94FE\u63A5\u3002\u5982\u679C\u987A\u5229\u7684\u8BDD\uFF0C\u6211\u4EEC\u5C31\u4F1A\u5728\u5728\u5F53\u524D\u76EE\u5F55\u4E0B\u770B\u5230\u4E00\u4E2A\u65B0\u751F\u6210\u7684\u53EF\u6267\u884C\u6587\u4EF6\uFF0C\u6267\u884C\u8FD9\u4E2A\u6587\u4EF6\u6211\u4EEC\u5C31\u53EF\u4EE5\u5F97\u5230\u6B63\u786E\u7ED3\u679C\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ls</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go.mod		go.sum		main.go		module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">./module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">INFO[0000] hello, go module mode  </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5230\u8FD9\u91CC\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u5B8C\u6210\u4E00\u4E2A\u5177\u6709\u591A\u4E2A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u9879\u76EE\u7684\u6784\u5EFA\u3002\u4E0D\u8FC7\uFF0C\u5173\u4E8E Go Module \u7684\u64CD\u4F5C\u8FDC\u4E0D\u6B62\u8FD9\u4E9B\uFF0C\u968F\u7740\u9879\u76EE\u7684\u6F14\u8FDB\uFF0C\u6211\u4EEC\u8FD8\u4F1A\u5728\u4EE3\u7801\u4E2D\u5BFC\u5165\u65B0\u7684\u7B2C\u4E09\u65B9\u5305\uFF0C\u5220\u9664\u4E00\u4E9B\u65E7\u7684\u4F9D\u8D56\u5305\uFF0C\u66F4\u65B0\u4E00\u4E9B\u4F9D\u8D56\u5305\u7248\u672C\u7B49\u3002</p><p>Go Module \u673A\u5236\u4F1A\u81EA\u52A8\u5206\u6790\u9879\u76EE\u7684\u4F9D\u8D56\u5305\uFF0C\u5E76\u9009\u51FA\u6700\u9002\u5408\u7684\u7248\u672C\uFF0C\u4F46\u662F\u9879\u76EE\u6240\u4F9D\u8D56\u7684\u5305\u6709\u5F88\u591A\u7248\u672C\uFF0CGo Module \u662F\u5982\u4F55\u9009\u51FA\u6700\u9002\u5408\u7684\u90A3\u4E2A\u7248\u672C\u7684\uFF1F</p><h3 id="\u6DF1\u5165-go-module-\u6784\u5EFA\u6A21\u5F0F" tabindex="-1">\u6DF1\u5165 Go Module \u6784\u5EFA\u6A21\u5F0F <a class="header-anchor" href="#\u6DF1\u5165-go-module-\u6784\u5EFA\u6A21\u5F0F" aria-hidden="true">#</a></h3><p>Go \u8BED\u8A00\u8BBE\u8BA1\u8005\u5728\u8BBE\u8BA1 Go Module \u6784\u5EFA\u6A21\u5F0F\u65F6\uFF0C\u8FDB\u884C\u4E86\u51E0\u9879\u521B\u65B0\uFF0C\u8FD9\u5176\u4E2D\u5C31\u5305\u62EC\u8BED\u4E49\u5BFC\u5165\u7248\u672C\uFF08Semantic Import Versioning\uFF09\uFF0C\u4EE5\u53CA\u548C\u5176\u4ED6\u4E3B\u6D41\u8BED\u8A00\u4E0D\u901A\u7ED9\u7684\u6700\u5C0F\u7248\u672C\u9009\u62E9\uFF08Minimal Version Selection\uFF09\u7B49\u673A\u5236\u3002\u53EA\u6709\u6DF1\u5165\u4E86\u89E3\u8FD9\u4E9B\u673A\u5236\uFF0C\u624D\u80FD\u771F\u6B63\u638C\u63E1 Go Module \u6784\u5EFA\u6A21\u5F0F\u3002</p><h4 id="\u8BED\u4E49\u5BFC\u5165\u673A\u5236" tabindex="-1">\u8BED\u4E49\u5BFC\u5165\u673A\u5236 <a class="header-anchor" href="#\u8BED\u4E49\u5BFC\u5165\u673A\u5236" aria-hidden="true">#</a></h4><p>\u9996\u5148\u6211\u4EEC\u770B\u4E00\u4E0B Go Module \u7684\u8BED\u4E49\u5BFC\u5165\u7248\u672C\u673A\u5236\u3002</p><p>\u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 go.mod \u7684 require \u6BB5\u4E2D\u4F9D\u8D56\u7684\u7248\u672C\u53F7\uFF0C\u90FD\u7B26\u5408 v X.Y.Z \u7684\u683C\u5F0F\u3002\u5728 Go Module \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u4E00\u4E2A\u7B26\u5408 Go Module \u8981\u6C42\u7684\u7248\u672C\u53F7\uFF0C\u7531\u524D\u7F00 v \u548C\u4E00\u4E2A\u6EE1\u8DB3 <a href="https://semver.org/" target="_blank" rel="noreferrer">\u8BED\u4E49\u7248\u672C</a> \u89C4\u8303\u7684\u7248\u672C\u53F7\u7EC4\u6210\u3002</p><img src="`+t+`" style="zoom:50%;"><p>\u5728\u4E0A\u9762\u8FD9\u5F20\u56FE\u4E2D\uFF0C\u8BED\u4E49\u7248\u672C\u53F7\u5206\u4E3A 3 \u90E8\u5206\uFF1A\u4E3B\u7248\u672C\u53F7\uFF08major\uFF09\u3001\u6B21\u7248\u672C\u53F7\uFF08minor\uFF09\u548C\u8865\u4E01\u7248\u672C\u53F7\uFF08patch\uFF09\u3002\u4F8B\u5982\u4E0A\u9762\u7684 logrus module \u7684\u7248\u672C\u53F7\u662F v1.8.1\uFF0C\u5373\u4E3B\u7248\u672C\u53F7\u4E3A 1\uFF0C\u6B21\u7248\u672C\u53F7\u4E3A 8\uFF0C\u8865\u4E01\u7248\u672C\u53F7\u4E3A 1\u3002</p><p>Go \u547D\u4EE4\u548C go.mod \u6587\u4EF6\u90FD\u4F7F\u7528\u8FD9\u79CD\u7B26\u5408\u8BED\u4E49\u7248\u672C\u89C4\u8303\u7684\u7248\u672C\u53F7\uFF0C\u4F5C\u4E3A\u63CF\u8FF0 Go Module \u7248\u672C\u7684\u6807\u51C6\u5F62\u5F0F\u3002\u501F\u52A9\u8BED\u4E49\u7248\u672C\u89C4\u8303\uFF0CGo \u547D\u4EE4\u53EF\u4EE5\u786E\u5B9A\u540C\u4E00 module \u7684\u4E24\u4E2A\u7248\u672C\u53D1\u5E03\u7684\u5148\u540E\u6B21\u5E8F\uFF0C\u800C\u4E14\u53EF\u4EE5\u786E\u5B9A\u5B83\u4EEC\u662F\u5426\u517C\u5BB9\u3002</p><p>\u6309\u7167\u8BED\u4E49\u7248\u672C\u89C4\u8303\uFF0C\u4E3B\u7248\u672C\u53F7\u4E0D\u540C\u7684\u4E24\u4E2A\u7248\u672C\u662F\u76F8\u4E92\u4E0D\u517C\u5BB9\u7684\u3002\u4E0D\u8FC7\u5728\u4E3B\u7248\u672C\u53F7\u76F8\u540C\u7684\u60C5\u51B5\u4E0B\uFF0C\u6B21\u7248\u672C\u53F7\u5927\u90FD\u662F\u5411\u540E\u517C\u5BB9\u6B21\u7248\u672C\u53F7\u5C0F\u7684\u7248\u672C\u3002</p><p>Go Module \u89C4\u5B9A\uFF1A\u5982\u679C\u540C\u4E00\u4E2A\u5305\u7684\u65B0\u65E7\u7248\u672C\u662F\u517C\u5BB9\u7684\uFF0C\u90A3\u4E48\u5B83\u4EEC\u7684\u5305\u5BFC\u5165\u8DEF\u5F84\u5E94\u8BE5\u662F\u76F8\u540C\u7684\u3002\u4EE5 logrus \u4E3A\u4F8B\uFF0C\u5B83\u6709\u5F88\u591A\u53D1\u5E03\u7248\u672C\uFF0C\u6211\u4EEC\u4ECE\u4E2D\u9009\u51FA\u4E24\u4E2A\u7248\u672C v1.7.0 \u548C v1.8.1\u3002\u6309\u7167\u4E0A\u9762\u7684\u8BED\u4E49\u7248\u672C\u89C4\u5219\uFF0C\u8FD9\u4E24\u4E2A\u7248\u672C\u7684\u4E3B\u7248\u672C\u53F7\u76F8\u540C\uFF0C\u65B0\u7248\u672C v1.8.1 \u662F\u517C\u5BB9\u8001\u7248\u672C v1.7.0 \u7684\u3002\u90A3\u4E48\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u77E5\u9053\uFF0C\u5982\u679C\u4E00\u4E2A\u9879\u76EE\u4F9D\u8D56 logrus\uFF0C\u65E0\u8BBA\u5B83\u4F7F\u7528\u7684\u662F v1.7.0 \u7248\u672C\u8FD8\u662F v1.8.1 \u7248\u672C\uFF0C\u5B83\u90FD\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u7684\u5305\u5BFC\u5165\u8BED\u53E5\u5BFC\u5165 logrus \u5305\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u5728\u672A\u6765\u7684\u6BCF\u4E00\u5929\uFF0Clogrus \u7684\u4F5C\u8005\u53D1\u5E03\u4E86 logrus v2.0.0 \u7248\u672C\u3002\u90A3\u4E48\u6839\u636E\u8BED\u4E49\u7248\u672C\u89C4\u5219\uFF0C\u8BE5\u7248\u672C\u7684\u4E3B\u7248\u672C\u53F7\u4E3A 2\uFF0C\u5DF2\u7ECF\u4E0E v1.7.0\u3001v1.8.1 \u7684\u4E3B\u7248\u672C\u53F7\u4E0D\u540C\uFF0C\u90A3\u4E48 v2.0.0 \u4E0E v1.7.0\u3001v1.8.1 \u5C31\u662F\u4E0D\u517C\u5BB9\u7684\u5305\u7248\u672C\u3002\u7136\u540E\u6211\u4EEC\u518D\u6309\u7167 Go Module \u7684\u89C4\u5B9A\uFF0C\u5982\u679C\u4E00\u4E2A\u9879\u76EE\u4F9D\u8D56 logrus v2.0.0 \u7248\u672C\uFF0C\u90A3\u4E48\u5B83\u7684\u5305\u5BFC\u5165\u8DEF\u5F84\u5C31\u4E0D\u80FD\u4E0E\u4E0A\u9762\u7684\u5BFC\u5165\u65B9\u5F0F\u76F8\u540C\u4E86\u3002\u90A3\u6211\u4EEC\u5E94\u8BE5\u4F7F\u7528\u4EC0\u4E48\u65B9\u5F0F\u5BFC\u5165 logrus v2.0.0 \u7248\u672C\u5462\uFF1F</p><p>Go Module \u7ED9\u51FA\u4E00\u4E2A\u65B9\u6CD5\uFF1A\u5C06\u5305\u4E3B\u7248\u672C\u53F7\u5F15\u5165\u5230\u5305\u5BFC\u5165\u8DEF\u5F84\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u50CF\u4E0B\u9762\u8FD9\u6837\u5BFC\u5165 logrus v2.0.0 \u7248\u672C\u4F9D\u8D56\u5305\uFF1A</p><blockquote><p>\u5347\u7EA7\u5927\u7248\u672C\u540E\u4EE3\u7801\u7684 import \u90FD\u8981\u6539\uFF0C\u5176\u5B9E\u633A\u5751\uFF01\uFF01</p></blockquote><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus/v2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5C31\u662F Go \u7684 \u201C\u8BED\u4E49\u5BFC\u5165\u7248\u672C\u201D \u673A\u5236\uFF0C\u4E5F\u5C31\u662F\u8BF4\u901A\u8FC7\u5728\u5305\u5BFC\u5165\u8DEF\u5F84\u4E2D\u5F15\u5165\u4E3B\u7248\u672C\u53F7\u7684\u65B9\u5F0F\uFF0C\u6765\u533A\u522B\u540C\u4E00\u4E2A\u5305\u7684\u4E0D\u517C\u5BB9\u7248\u672C\uFF0C\u8FD9\u6837\u4E00\u6765\u6211\u4EEC\u751A\u81F3\u53EF\u4EE5\u540C\u65F6\u4F9D\u8D56\u4E00\u4E2A\u5305\u7684\u4E24\u4E2A\u4E0D\u517C\u5BB9\u7248\u672C\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  logv2 </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus/v2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u6211\u4EEC\u4F7F\u7528 v0.y.z \u7248\u672C\u5E94\u8BE5\u4F7F\u7528\u54EA\u79CD\u5BFC\u5165\u8DEF\u5F84\uFF1F</p><p>\u6309\u7167\u8BED\u4E49\u7248\u672C\u89C4\u8303\u7684\u8BF4\u6CD5\uFF0Cv0.y.z \u8FD9\u6837\u7684\u7248\u672C\u53F7\u662F\u7528\u4E8E\u9879\u76EE\u5F00\u53D1\u9636\u6BB5\u7684\u7248\u672C\u53F7\u3002\u5728\u8FD9\u4E2A\u9636\u6BB5\u4EFB\u4F55\u4E8B\u60C5\u90FD\u6709\u53EF\u80FD\u53D1\u751F\uFF0C\u5176 API \u4E5F\u4E0D\u5E94\u8BE5\u88AB\u8BA4\u4E3A\u662F\u7A33\u5B9A\u7684\u3002Go Module \u5C06\u8FD9\u6837\u7684\u7248\u672C\uFF08v0\uFF09\u4E0E\u4E3B\u7248\u672C\u53F7 v1 \u505A\u540C\u7B49\u5BF9\u5F85\uFF0C\u4E5F\u5C31\u662F\u91C7\u7528\u4E0D\u5E26\u4E3B\u7248\u672C\u53F7\u7684\u5305\u5BFC\u5165\u8DEF\u5F84\uFF0C\u8FD9\u6837\u5728\u4E00\u5B9A\u7A0B\u5EA6\u964D\u4F4E\u4E86 Go \u5F00\u53D1\u4EBA\u5458\u4F7F\u7528\u7248\u672C\u53F7\u5305\u65F6\u7684\u5FC3\u667A\u8D1F\u62C5\u3002</p><p>Go \u8BED\u4E49\u5BFC\u5165\u673A\u5236\u662F Go Module \u673A\u5236\u7684\u57FA\u7840\u89C4\u5219\uFF0C\u4E5F\u662F Go Module \u5176\u4ED6\u89C4\u5219\u7684\u57FA\u7840\u3002</p><h4 id="\u6700\u5C0F\u7248\u672C\u9009\u62E9\u673A\u5236" tabindex="-1">\u6700\u5C0F\u7248\u672C\u9009\u62E9\u673A\u5236 <a class="header-anchor" href="#\u6700\u5C0F\u7248\u672C\u9009\u62E9\u673A\u5236" aria-hidden="true">#</a></h4><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u518D\u6765\u770B\u4E00\u4E0B Go Module \u7684\u6700\u5C0F\u7248\u672C\u9009\u62E9\u539F\u5219\u3002</p><p>\u5728\u524D\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0CGo \u547D\u4EE4\u90FD\u662F\u5728\u9879\u76EE\u521D\u59CB\u72B6\u6001\u5206\u6790\u9879\u76EE\u7684\u4F9D\u8D56\uFF0C\u5E76\u4E14\u9879\u76EE\u4E2D\u4E24\u4E2A\u4F9D\u8D56\u5305\u4E4B\u95F4\u6CA1\u6709\u5171\u540C\u7684\u4F9D\u8D56\uFF0C\u8FD9\u6837\u7684\u5305\u4F9D\u8D56\u5173\u7CFB\u89E3\u51B3\u8D77\u6765\u8FD8\u662F\u6BD4\u8F83\u5BB9\u6613\u7684\u3002\u4F46\u4F9D\u8D56\u5173\u7CFB\u4E00\u65E6\u590D\u6742\u8D77\u6765\uFF0C\u6BD4\u5982\u50CF\u4E0B\u56FE\u5C55\u793A\u7684\u8FD9\u6837\uFF0CGo \u53C8\u662F\u5982\u4F55\u786E\u5B9A\u4F9D\u8D56\u5305\u4F7F\u7528\u54EA\u4E2A\u7248\u672C\u5462\uFF1F</p><img src="`+c+'" style="zoom:60%;"><p>\u5728\u8FD9\u5F20\u56FE\u4E2D\uFF0Cmyproject \u6709\u4E24\u4E2A\u76F4\u63A5\u4F9D\u8D56 A \u548C B\uFF0CA \u548C B \u6709\u4E00\u4E2A\u5171\u540C\u7684\u4F9D\u8D56\u5305 C\uFF0C\u4F46 A \u4F9D\u8D56 C \u7684 v1.1.0 \u7248\u672C\uFF0C\u800C B \u4F9D\u8D56\u7684\u662F C \u7684 v1.3.0 \u7248\u672C\uFF0C\u5E76\u4E14\u6B64\u65F6 C \u5305\u7684\u6700\u65B0\u53D1\u5E03\u7248\u4E3A C v1.7.0\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0CGo \u547D\u4EE4\u662F\u5982\u4F55\u4E3A myproject \u9009\u51FA\u95F4\u63A5\u4F9D\u8D56\u5305 C \u7684\u7248\u672C\u5462\uFF1F</p><p>\u5176\u5B9E\uFF0C\u5BF9\u4E8E\u5F53\u524D\u5B58\u50A8\u7684\u4E3B\u6D41\u7F16\u7A0B\u8BED\u8A00\uFF0C\u4EE5\u53CA Go Module \u51FA\u73B0\u4E4B\u524D\u7684\u5F88\u591A Go \u5305\u4F9D\u8D56\u7BA1\u7406\u5DE5\u5177\u90FD\u4F1A\u9009\u62E9\u4F9D\u8D56\u9879\u7684 \u201C\u6700\u65B0\u6700\u5927\uFF08Latest Greatest\uFF09\u7248\u672C\u201D\uFF0C\u5BF9\u5E94\u5230\u56FE\u4E2D\u7ED9\u7684\u4F8B\u5B50\uFF0C\u8FD9\u4E2A\u7248\u672C\u5C31\u662F v1.7.0\u3002</p><p>\u7406\u60F3\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\u8BED\u4E49\u7248\u672C\u63A7\u5236\u88AB\u6B63\u786E\u5E94\u7528\uFF0C\u5E76\u4E14\u8FD9\u79CD \u201C\u793E\u4F1A\u5951\u7EA6\u201D \u4E5F\u53EF\u4EE5\u5F97\u5230\u5F88\u597D\u9075\u5B88\uFF0C\u90A3\u4E48\u8FD9\u79CD\u9009\u62E9\u7B97\u6CD5\u662F\u6709\u9053\u7406\u7684\uFF0C\u800C\u4E14\u4E5F\u53EF\u4EE5\u6B63\u5E38\u5DE5\u4F5C\u3002\u5728\u8FD9\u6837\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F9D\u8D56\u9879\u7684 \u201C\u6700\u65B0\u6700\u5927\u7248\u672C\u201C \u5E94\u8BE5\u662F\u6700\u7A33\u5B9A\u548C\u5B89\u5168\u7684\u7248\u672C\uFF0C\u5E76\u4E14\u5E94\u8BE5\u6709\u5411\u540E\u517C\u5BB9\u6027\u3002\u81F3\u5C11\u5728\u76F8\u540C\u7684\u4E3B\u7248\u672C\uFF08Major Version\uFF09\u4F9D\u8D56\u6811\u4E2D\u662F\u8FD9\u6837\u7684\u3002</p><p>\u4F46\u6211\u4EEC\u8FD9\u4E2A\u95EE\u9898\u7684\u7B54\u6848\u5E76\u4E0D\u662F\u8FD9\u6837\u3002Go \u8BBE\u8BA1\u8005\u53E6\u8F9F\u8E4A\u5F84\uFF0C\u5728\u8BF8\u591A\u517C\u5BB9\u6027\u7248\u672C\u95F4\uFF0C\u5B83\u4EEC\u4E0D\u5149\u8981\u8003\u8651\u6700\u65B0\u6700\u5927\u7684\u7A33\u5B9A\u4E0E\u5B89\u5168\uFF0C\u8FD8\u8981\u5C0A\u91CD\u5404\u4E2A module \u7684\u8BC9\u6C42\uFF1AA \u53EA\u8981\u6C42 C v1.1.0\uFF0CB \u53EA\u8981\u6C42 C v1.3.0\u3002\u6240\u4EE5 Go \u5C31\u4F1A\u5728\u8BE5\u9879\u76EE\u4F9D\u8D56\u9879\u7684\u6240\u6709\u7248\u672C\u4E2D\uFF0C\u9009\u51FA\u7B26\u5408\u9879\u76EE\u6574\u4F53\u8981\u6C42\u7684 \u201C\u6700\u5C0F\u7248\u672C\u201D\u3002</p><p>\u5728\u8FD9\u4E2A\u4F8B\u5B50\u4E2D\uFF0CC v1.3.0 \u662F\u7B26\u5408\u9879\u76EE\u6574\u4F53\u8981\u6C42\u7684\u7248\u672C\u96C6\u5408\u4E2D\u7684\u6700\u5C0F\u7248\u672C\uFF0C\u4E8E\u662F Go \u4F1A\u9009\u62E9 C v1.3.0\uFF0C\u800C\u4E0D\u662F C v1.7.0\u3002\u5E76\u4E14\uFF0CGo \u56E2\u961F\u8BA4\u4E3A\u8FD9\u662F\u4E3A\u7A0B\u5E8F\u5B9E\u73B0\u6301\u4E45\u548C\u5B9E\u73B0\u53EF\u91CD\u73B0\u6784\u5EFA\u7684\u6700\u4F73\u65B9\u6848\u3002</p><h3 id="\u5404\u7248\u672C\u6784\u5EFA\u6A21\u5F0F\u673A\u5236\u548C\u5207\u6362" tabindex="-1">\u5404\u7248\u672C\u6784\u5EFA\u6A21\u5F0F\u673A\u5236\u548C\u5207\u6362 <a class="header-anchor" href="#\u5404\u7248\u672C\u6784\u5EFA\u6A21\u5F0F\u673A\u5236\u548C\u5207\u6362" aria-hidden="true">#</a></h3><p>\u5F88\u591A Go \u5F00\u53D1\u4EBA\u5458\u7684\u8D77\u70B9\uFF0C\u5E76\u975E\u662F\u9ED8\u8BA4\u5F00\u542F Go Module \u6784\u5EFA\u6A21\u5F0F\u7684 Go 1.16 \u7248\u672C\uFF0C\u591A\u6570 Go \u5F00\u53D1\u4EBA\u5458\u4F7F\u7528\u7684\u73AF\u5883\u4E2D\u90FD\u5B58\u5728\u591A\u5957 Go \u7248\u672C\uFF0C\u6709\u7528\u4E8E\u4F53\u9A8C\u6700\u65B0\u529F\u80FD\u7279\u5B9A\u7684 Go \u7248\u672C\uFF0C\u4E5F\u6709\u67D0\u4E9B\u9057\u7559\u9879\u76EE\u6240\u4F7F\u7528\u7684\u8001\u7248\u672C Go \u7F16\u8BD1\u5668\u3002</p><p>\u5B83\u4EEC\u5DE5\u4F5C\u65F6\u91C7\u7528\u7684\u6784\u5EFA\u6A21\u5F0F\u662F\u4E0D\u540C\u7684\uFF0C\u5373\u4FBF\u662F\u5F15\u5165 Go Module \u7684 Go 1.11 \u7248\u672C\uFF0C\u5B83\u7684 Go Module \u673A\u5236\uFF0C\u548C\u540E\u7EED\u8FDB\u5316\u540E\u7684 Go \u7248\u672C\u7684 Go Module \u6784\u5EFA\u673A\u5236\u5728\u8868\u73B0\u884C\u4E3A\u4E0A\u4E5F\u6709\u6240\u4E0D\u540C\u3002\u56E0\u6B64 Go \u5F00\u53D1\u4EBA\u5458\u53EF\u80FD\u9700\u8981\u7ECF\u5E38\u5728\u5404\u4E2A Go \u7248\u672C\u95F4\u5207\u6362\uFF0C\u800C\u660E\u786E\u5177\u4F53\u7248\u672C\u4E0B\u7684 Go Module \u7684\u5B9E\u9645\u8868\u73B0\u884C\u4E3A\u5BF9 Go \u5F00\u53D1\u4EBA\u5458\u662F\u5341\u5206\u5FC5\u8981\u7684\u3002</p><p>\u5728 Go 1.11 \u7248\u672C\u4E2D\uFF0CGo \u5F00\u53D1\u56E2\u961F\u5F15\u5165 Go Module \u6A21\u5F0F\u3002\u8FD9\u4E2A\u65F6\u5019\uFF0CGOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0E Go Modules \u6784\u5EFA\u6A21\u5F0F\u5404\u81EA\u72EC\u7ACB\u5DE5\u4F5C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF GO111MODULE \u7684\u503C\u5728\u4E24\u79CD\u6784\u5EFA\u6A21\u5F0F\u95F4\u5207\u6362\u3002\u968F\u7740 Go \u8BED\u8A00\u7684\u9010\u6B65\u6F14\u8FDB\uFF0C\u76F4\u5230 Go 1.16 \u7248\u672C\uFF0CGo Module \u6784\u5EFA\u6A21\u5F0F\u624D\u6210\u4E3A\u9ED8\u8BA4\u6A21\u5F0F\u3002</p><p>\u8981\u5206\u6790 Go \u5404\u7248\u672C\u7684\u5177\u4F53\u6784\u5EFA\u6A21\u5F0F\u7684\u673A\u5236\u548C\u5207\u6362\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u51E0\u4E2A\u4EE3\u8868\u6027\u7248\u672C\u8FDB\u884C\u5206\u6790\u3002</p><img src="'+r+`" style="zoom:70%;"><p>\u4E86\u89E3\u4E0A\u8FF0\u5185\u5BB9\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u5728\u5DE5\u4F5C\u4E2D\u6E38\u5203\u6709\u4F59\u7684\u5728\u5404\u4E2A\u7248\u672C\u95F4\u5207\u6362\uFF0C\u4E0D\u7528\u518D\u62C5\u5FC3\u5207\u6362\u540E\u7684\u6A21\u5F0F\u53D8\u5316\uFF0C\u5BFC\u81F4\u6784\u5EFA\u5931\u8D25\u3002</p><h3 id="\u603B\u7ED3-5" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-5" aria-hidden="true">#</a></h3><p>\u5728\u8FD9\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u521D\u6B65\u4E86\u89E3\u4E86 Go \u8BED\u8A00\u6784\u5EFA\u6A21\u5F0F\u7684\u6F14\u5316\u5386\u53F2\u3002</p><p>Go \u8BED\u8A00\u6700\u521D\u53D1\u5E03\u65F6\u5185\u7F6E\u7684\u6784\u5EFA\u6A21\u5F0F\u662F GOPATH \u6784\u5EFA\u6A21\u5F0F\u3002\u5728\u8FD9\u79CD\u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u6240\u6709\u6784\u5EFA\u90FD\u79BB\u4E0D\u5F00 GOPATH \u73AF\u5883\u53D8\u91CF\u3002\u5728\u8FD9\u4E2A\u6A21\u5F0F\u4E0B\uFF0CGo \u7F16\u8BD1\u5668\u5E76\u6CA1\u6709\u5173\u6CE8\u4F9D\u8D56\u5305\u7248\u672C\uFF0C\u5F00\u53D1\u8005\u4E5F\u65E0\u6CD5\u63A7\u5236\u7B2C\u4E09\u65B9\u5305\u4F9D\u8D56\u7684\u7248\u672C\uFF0C\u5BFC\u81F4\u5F00\u53D1\u8005\u65E0\u6CD5\u91CD\u65B0\u53EF\u91CD\u73B0\u6784\u5EFA\u3002</p><p>\u4E3A\u4E86\u652F\u6301\u53EF\u91CD\u73B0\u6784\u5EFA\uFF0CGo 1.5 \u7248\u672C\u5F15\u5165 vendor \u673A\u5236\uFF0C\u5F00\u53D1\u8005\u53EF\u4EE5\u5728\u9879\u76EE\u76EE\u5F55\u4E0B\u7F13\u5B58\u9879\u76EE\u7684\u6240\u6709\u4F9D\u8D56\uFF0C\u5B9E\u73B0\u53EF\u91CD\u73B0\u6784\u5EFA\u3002\u4F46 vendor \u673A\u5236\u5E76\u4E0D\u5B8C\u5584\uFF0C\u5F00\u53D1\u8005\u8FD8\u9700\u8981\u624B\u52A8\u7BA1\u7406 vendor \u4E0B\u7684\u4F9D\u8D56\u5305\uFF0C\u8FD9\u5C31\u7ED9\u5F00\u53D1\u8005\u5E26\u6765\u4E0D\u5C0F\u7684\u5FC3\u667A\u8D1F\u62C5\u3002</p><p>\u540E\u6765\uFF0CGo 1.11 \u7248\u672C\u4E2D\uFF0CGo \u6838\u5FC3\u56E2\u961F\u63A8\u51FA\u65B0\u4E00\u4EE3\u6784\u5EFA\u6A21\u5F0F\uFF1AGo Module \u4EE5\u53CA\u4E00\u7CFB\u5217\u521B\u65B0\u673A\u5236\uFF0C\u5305\u62EC\u8BED\u4E49\u5BFC\u5165\u7248\u672C\u673A\u5236\u3001\u6700\u5C0F\u7248\u672C\u9009\u62E9\u673A\u5236\u3002</p><p>\u6B64\u5916\uFF0CGo \u547D\u4EE4\u8FD8\u53EF\u4EE5\u901A\u8FC7 GO111MODULE \u73AF\u5883\u53D8\u91CF\u8FDB\u884C Go \u6784\u5EFA\u6A21\u5F0F\u7684\u5207\u6362\u3002\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4ECE Go 1.11 \u5230 Go 1.16\uFF0C\u4E0D\u540C\u7684 Go \u7248\u672C\u5728 GO111MODULE \u4E0D\u540C\u503C\u7684\u60C5\u51B5\u4E0B\uFF0C\u5F00\u542F\u7684\u6784\u5EFA\u6A21\u5F0F\u4EE5\u53CA\u5177\u4F53\u8868\u73B0\u884C\u4E3A\u4E5F\u51E0\u7ECF\u53D8\u5316\u3002</p><p>\u540E\u7EED\uFF0CGo \u6838\u5FC3\u56E2\u961F\u5DF2\u7ECF\u8003\u8651\u5728\u540E\u7EED\u7248\u672C\u4E2D\u5F7B\u5E95\u79FB\u9664 GOPATH \u6784\u5EFA\u6A21\u5F0F\uFF0CGo Module \u6784\u5EFA\u6A21\u5F0F\u5C06\u6210\u4E3A Go \u8BED\u8A00\u552F\u4E00\u7684\u6807\u51C6\u6784\u5EFA\u6A21\u5F0F\u3002</p><h2 id="_07\u3001go-module-\u5E38\u89C4\u64CD\u4F5C" tabindex="-1">07\u3001Go Module \u5E38\u89C4\u64CD\u4F5C <a class="header-anchor" href="#_07\u3001go-module-\u5E38\u89C4\u64CD\u4F5C" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u5DF2\u7ECF\u638C\u63E1\u4E86 Go Module \u6784\u5EFA\u6A21\u5F0F\u7684\u57FA\u672C\u6982\u5FF5\u548C\u5DE5\u4F5C\u539F\u7406\uFF0C\u4E5F\u5B66\u4F1A\u4E86\u5982\u4F55\u901A\u8FC7 go mod \u547D\u4EE4\uFF0C\u5C06\u4E00\u4E2A Go \u9879\u76EE\u8F6C\u53D8\u4E3A\u4E00\u4E2A Go Module\uFF0C\u5E76\u901A\u8FC7 Go Module \u6784\u5EFA\u6A21\u5F0F\u8FDB\u884C\u6784\u5EFA\u3002</p><p>\u5F53\u6211\u4EEC\u6709\u4E00\u4E2A Go Module \u9879\u76EE\u4E4B\u540E\uFF0C\u5C31\u9700\u8981\u8003\u8651\u662F\u5982\u4F55\u7EF4\u62A4\u5B83\uFF0C\u5373\u5BF9 Go Module \u4F9D\u8D56\u5305\u7684\u7BA1\u7406\u3002</p><h3 id="\u6DFB\u52A0\u4F9D\u8D56" tabindex="-1">\u6DFB\u52A0\u4F9D\u8D56 <a class="header-anchor" href="#\u6DFB\u52A0\u4F9D\u8D56" aria-hidden="true">#</a></h3><p>\u5728\u4E00\u4E2A\u9879\u76EE\u7684\u521D\u59CB\u9636\u6BB5\uFF0C\u6211\u4EEC\u4F1A\u7ECF\u5E38\u4E3A\u9879\u76EE\u5F15\u5165\u7B2C\u4E09\u65B9\u5305\uFF0C\u5E76\u501F\u52A9\u8FD9\u4E9B\u5305\u5B8C\u6210\u7279\u5B9A\u529F\u80FD\u3002\u5C31\u7B97\u9879\u76EE\u8FDB\u5165\u7A33\u5B9A\u9636\u6BB5\uFF0C\u968F\u7740\u9879\u76EE\u6F14\u8FDB\uFF0C\u6211\u4EEC\u5076\u5C14\u4E5F\u9700\u8981\u5728\u4EE3\u7801\u4E2D\u5F15\u5165\u65B0\u7684\u7B2C\u4E09\u65B9\u5305\u3002</p><p>\u90A3\u6211\u4EEC\u5E94\u8BE5\u5982\u4F55\u4E3A\u4E00\u4E2A Go Module \u6DFB\u52A0\u4E00\u4E2A\u65B0\u7684\u4F9D\u8D56\u5305\u5462\uFF1F</p><p>\u6211\u4EEC\u8FD8\u662F\u4EE5\u4E4B\u524D\u7684 module-mode \u9879\u76EE\u4E3A\u4F8B\uFF0C\u4E3A\u8FD9\u4E2A\u9879\u76EE\u6DFB\u52A0\u4E00\u4E2A\u65B0\u4F9D\u8D56\uFF1A<a href="http://github.com/google/uuid%E3%80%82" target="_blank" rel="noreferrer">github.com/google/uuid\u3002</a></p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/google/uuid</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/sirupsen/logrus</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	logrus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, go module mode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	logrus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uuid</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewString</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u65B0\u6E90\u7801\u4E2D\uFF0C\u6211\u4EEC\u901A\u8FC7 import \u8BED\u53E5\u5BFC\u5165\u4E86 <a href="http://github.com/google/uuid%EF%BC%8C%E5%B9%B6%E5%9C%A8" target="_blank" rel="noreferrer">github.com/google/uuid\uFF0C\u5E76\u5728</a> main \u51FD\u6570\u4E2D\u8C03\u7528 uuid \u5305\u7684\u51FD\u6570 NewString\u3002</p><p>\u6B64\u65F6\u5982\u679C\u6211\u4EEC\u76F4\u63A5\u6784\u5EFA\u8FD9\u4E2A module\uFF0C\u6211\u4EEC\u4F1A\u5F97\u5230\u4E00\u4E2A\u9519\u8BEF\u63D0\u793A\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">main.go:4:2: no required module provides package github.com/google/uuid; to add it:</span></span>
<span class="line"><span style="color:#A6ACCD;">	go get github.com/google/uuid</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Go \u7F16\u8BD1\u5668\u63D0\u793A\u6211\u4EEC\uFF0Cgo.mod \u4E2D\u7684 require \u6BB5\u4E2D\uFF0C\u5E76\u6CA1\u6709\u63D0\u4F9B <a href="http://gitHub.com/google/uuid" target="_blank" rel="noreferrer">gitHub.com/google/uuid</a> \u5305\uFF0C\u6211\u4EEC\u53EF\u4EE5\u624B\u52A8\u6267\u884C go get \u547D\u4EE4\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go get github.com/google/uuid</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/google/uuid v1.3.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: added github.com/google/uuid v1.3.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>go get \u547D\u4EE4\u53EF\u4EE5\u5C06\u6211\u4EEC\u65B0\u589E\u7684\u4F9D\u8D56\u5305\u4E0B\u8F7D\u5230\u672C\u5730\u7684 module \u7F13\u5B58\u91CC\uFF0C\u5E76\u5728 go.mod \u6587\u4EF6\u7684 require \u6BB5\u4E2D\u65B0\u589E\u4E00\u884C\u5185\u5BB9\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">module github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go 1.19</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require github.com/sirupsen/logrus v1.9.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require (</span></span>
<span class="line"><span style="color:#A6ACCD;">	github.com/google/uuid v1.3.0 // indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">	golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u4E5F\u53EF\u4EE5\u4F7F\u7528 go mod tidy \u547D\u4EE4\uFF0C\u518D\u6267\u884C\u6784\u5EFA\u524D\u81EA\u52A8\u5206\u6790\u6E90\u7801\u4E2D\u7684\u4F9D\u8D56\u53D8\u5316\uFF0C\u8BC6\u522B\u65B0\u589E\u4F9D\u8D56\u9879\u5E76\u4E0B\u8F7D\u5B83\u4EEC\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">module github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go 1.19</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require (</span></span>
<span class="line"><span style="color:#A6ACCD;">	github.com/google/uuid v1.3.0</span></span>
<span class="line"><span style="color:#A6ACCD;">	github.com/sirupsen/logrus v1.9.0</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">require golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5BF9\u4E8E\u6211\u4EEC\u8FD9\u4E2A\u4F8B\u5B50\u800C\u8A00\uFF0C\u624B\u52A8\u6267\u884C go get \u65B0\u589E\u4F9D\u8D56\u9879\u548C\u6267\u884C go mod tidy \u81EA\u52A8\u5206\u6790\u548C\u4E0B\u8F7D\u4F9D\u8D56\u9879\u7684\u6700\u7EC8\u6548\u679C\u662F\u7B49\u4EF7\u7684\u3002\u5BF9\u4E8E\u590D\u6742\u9879\u76EE\u53D8\u66F4\u800C\u8A00\uFF0C\u9010\u4E00\u624B\u52A8\u6DFB\u52A0\u4F9D\u8D56\u663E\u7136\u5F88\u6CA1\u6709\u6548\u7387\uFF0Cgo mod tidy \u662F\u66F4\u4F73\u7684\u9009\u62E9\u3002</p><h3 id="\u5347\u7EA7-\u964D\u7EA7\u4F9D\u8D56" tabindex="-1">\u5347\u7EA7/\u964D\u7EA7\u4F9D\u8D56 <a class="header-anchor" href="#\u5347\u7EA7-\u964D\u7EA7\u4F9D\u8D56" aria-hidden="true">#</a></h3><p>\u6211\u4EEC\u5148\u4EE5\u5BF9\u4F9D\u8D56\u7684\u7684\u7248\u672C\u8FDB\u884C\u964D\u7EA7\u4E3A\u4F8B\uFF0C\u8FDB\u884C\u5206\u6790\u3002</p><p>\u5728\u5B9E\u9645\u5F00\u53D1\u5DE5\u4F5C\u4E2D\uFF0C\u5982\u679C\u6211\u4EEC\u8BA4\u4E3A Go \u547D\u4EE4\u81EA\u52A8\u5E2E\u6211\u4EEC\u786E\u5B9A\u7684\u67D0\u4E2A\u4F9D\u8D56\u7684\u7248\u672C\u5B58\u5728\u4E00\u4E9B\u95EE\u9898\uFF0C\u6BD4\u5982\u5F15\u5165\u4E0D\u5FC5\u8981\u590D\u6742\u6027\u5BFC\u81F4\u53EF\u9760\u6027\u964D\u4F4E\u3001\u6027\u80FD\u56DE\u9000\u7B49\u7B49\u3002\u6211\u4EEC\u53EF\u4EE5\u624B\u52A8\u5C06\u5B83\u964D\u7EA7\u4E3A\u4E4B\u524D\u53D1\u5E03\u7684\u67D0\u4E2A\u517C\u5BB9\u7248\u672C\u3002</p><p>\u6211\u4EEC\u8FD8\u662F\u4EE5\u4E0A\u9762\u7684 logrus \u4E3A\u4F8B\uFF0Clogrus \u5B58\u5728\u591A\u4E2A\u53D1\u5E03\u7248\u672C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u547D\u4EE4\u8FDB\u884C\u67E5\u8BE2\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go list -m -versions github.com/sirupsen/logrus</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/sirupsen/logrus v0.1.0 v0.1.1 v0.2.0 v0.3.0 v0.4.0 v0.4.1 v0.5.0 v0.5.1 v0.6.0 v0.6.1 v0.6.2 v0.6.3 v0.6.4 v0.6.5 v0.6.6 v0.7.0 v0.7.1 v0.7.2 v0.7.3 v0.8.0 v0.8.1 v0.8.2 v0.8.3 v0.8.4 v0.8.5 v0.8.6 v0.8.7 v0.9.0 v0.10.0 v0.11.0 v0.11.1 v0.11.2 v0.11.3 v0.11.4 v0.11.5 v1.0.0 v1.0.1 v1.0.3 v1.0.4 v1.0.5 v1.0.6 v1.1.0 v1.1.1 v1.2.0 v1.3.0 v1.4.0 v1.4.1 v1.4.2 v1.5.0 v1.6.0 v1.7.0 v1.7.1 v1.8.0 v1.8.1 v1.9.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5728\u6211\u4EEC\u7684\u4F8B\u5B50\u4E2D\uFF0C\u57FA\u4E8E\u521D\u59CB\u72B6\u6001\u7684 go mod tidy \u547D\u4EE4\uFF0C\u5E2E\u6211\u4EEC\u9009\u62E9 logrus \u7684\u6700\u65B0\u53D1\u5E03\u7248\u672C v1.9.0\u3002\u5982\u679C\u4F60\u89C9\u5F97\u8FD9\u4E2A\u7248\u672C\u5B58\u5728\u67D0\u4E9B\u95EE\u9898\uFF0C\u60F3\u5C06 logrus \u7248\u672C\u964D\u81F3\u4E4B\u524D\u53D1\u5E03\u7684\u517C\u5BB9\u7248\u672C\uFF0C\u6BD4\u5982 v1.8.0\uFF0C\u90A3\u4E48\u6211\u4EEC\u53EF\u4EE5\u5728\u9879\u76EE\u7684 module \u6839\u76EE\u5F55\u4E0B\uFF0C\u6267\u884C\u5E26\u6709\u7248\u672C\u53F7\u7684 go get \u547D\u4EE4\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go get github.com/sirupsen/logrus@v1.8.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/sirupsen/logrus v1.8.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/stretchr/testify v1.2.2</span></span>
<span class="line"><span style="color:#A6ACCD;">go: downgraded github.com/sirupsen/logrus v1.9.0 =&gt; v1.8.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4ECE\u8F93\u51FA\u7ED3\u679C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0Cgo get \u547D\u4EE4\u4E0B\u8F7D\u4E86 logrus v1.8.0 \u7248\u672C\uFF0C\u5E76\u5C06 go.mod \u4E2D\u5BF9 logrus \u7684\u4F9D\u8D56\u7248\u672C\u4ECE v1.9.0 \u964D\u81F3 v1.8.0\u3002</p><p>\u5F53\u7136\u6211\u4EEC\u4E5F\u53EF\u4EE5\u4F7F\u7528 go mod tidy \u6765\u5E2E\u52A9\u6211\u4EEC\u964D\u7EA7\uFF0C\u524D\u63D0\u662F\u9996\u5148\u8981\u7528 go mod edit \u547D\u4EE4\uFF0C\u660E\u786E\u544A\u77E5\u6211\u4EEC\u8981\u4F9D\u8D56 v1.8.0 \u7248\u672C\uFF0C\u800C\u4E0D\u662F v1.9.0\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod edit -require=github.com/sirupsen/logrus@v1.8.0</span></span>
<span class="line"><span style="color:#A6ACCD;">go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/sirupsen/logrus v1.8.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u964D\u7EA7\u540E\uFF0C\u6211\u4EEC\u518D\u5047\u8BBE logrus v1.8.1 \u7248\u672C\u662F\u4E00\u4E2A\u5B89\u5168\u8865\u4E01\u5347\u7EA7\uFF0C\u4FEE\u590D\u4E86\u4E00\u4E2A\u5F88\u4E25\u91CD\u7684\u5B89\u5168\u6F0F\u6D1E\uFF0C\u5E76\u4E14\u6211\u4EEC\u5FC5\u987B\u8981\u4F7F\u7528\u8FD9\u4E2A\u5B89\u5168\u8865\u4E01\u7248\u672C\uFF0C\u90A3\u4E48\u6211\u4EEC\u5C31\u9700\u8981\u5C06 logrus \u4F9D\u8D56\u4ECE v1.8.0 \u5347\u7EA7\u5230 v1.8.1\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4E0E\u964D\u7EA7\u540C\u6837\u7684\u6B65\u9AA4\u6765\u5B8C\u6210\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go get github.com/sirupsen/logrus@v1.8.1</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5230\u8FD9\u91CC\u4F60\u5C31\u5B66\u4F1A\u5982\u4F55\u5BF9\u9879\u76EE\u4F9D\u8D56\u5305\u7248\u672C\u8FDB\u884C\u5347\u7EA7\u548C\u964D\u7EA7\u4E86\u3002</p><p>\u4F46\u662F\u4F60\u53EF\u80FD\u4F1A\u53D1\u73B0\u4E00\u4E2A\u95EE\u9898\uFF0C\u5728\u524D\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0CGo Module \u7684\u4F9D\u8D56\u4E3B\u7248\u672C\u53F7\u90FD\u662F 1\u3002\u6839\u636E\u6211\u4EEC\u4E4B\u524D\u5B66\u4E60\u7684\u8BED\u4E49\u5BFC\u5165\u7248\u672C\u7684\u89C4\u8303\uFF0C\u5728 Go Module \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u5F53\u4F9D\u8D56\u7684\u4E3B\u7248\u672C\u53F7\u4E3A 0 \u6216 1 \u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u5728 Go \u6E90\u7801\u4E2D\u5BFC\u5165\u4F9D\u8D56\u5305\uFF0C\u4E0D\u9700\u8981\u5728\u5305\u7684\u5BFC\u5165\u8DEF\u5F84\u4E0A\u589E\u52A0\u7248\u672C\u53F7\uFF0C\u4E5F\u5C31\u662F\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import github.com/urer/repo/v0 &lt;=&gt; import github.com/user/repo</span></span>
<span class="line"><span style="color:#A6ACCD;">import github.com/urer/repo/v1 &lt;=&gt; import github.com/user/repo</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4F46\u662F\uFF0C\u5982\u679C\u6211\u4EEC\u8981\u4F9D\u8D56\u7684 module \u7684\u4E3B\u7248\u672C\u53F7\u5927\u4E8E 1\uFF0C\u8FD9\u53C8\u8981\u600E\u4E48\u529E\u5462\uFF1F</p><p>\u8BED\u4E49\u5BFC\u5165\u7248\u672C\u6709\u4E00\u4E2A\u539F\u5219\uFF1A\u5982\u679C\u65B0\u65E7\u7248\u672C\u7684\u5305\u4F7F\u7528\u76F8\u540C\u7684\u5BFC\u5165\u8DEF\u5F84\uFF0C\u90A3\u4E48\u65B0\u5305\u4E0E\u65E7\u5305\u662F\u517C\u5BB9\u7684\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5982\u679C\u65B0\u65E7\u4E24\u4E2A\u5305\u4E0D\u517C\u5BB9\uFF0C\u90A3\u4E48\u6211\u4EEC\u5C31\u5E94\u8BE5\u4F7F\u7528\u4E0D\u540C\u7684\u5BFC\u5165\u8DEF\u5F84\u3002</p><p>\u6309\u7167\u8BED\u4E49\u7248\u672C\u89C4\u8303\uFF0C\u5982\u679C\u6211\u4EEC\u8981\u4E3A\u9879\u76EE\u5F15\u5165\u4E3B\u7248\u672C\u53F7\u4E3A 1 \u7684\u4F9D\u8D56\uFF0C\u6BD4\u5982 v2.0.0\uFF0C\u90A3\u4E48\u7531\u4E8E\u8FD9\u4E2A\u7248\u672C\u4E0E v1\u3001v0 \u5F00\u5934\u7684\u5305\u7248\u672C\u90FD\u4E0D\u517C\u5BB9\uFF0C\u6211\u4EEC\u5728\u5BFC\u5165 v2.0.0 \u5305\u65F6\uFF0C\u4E0D\u80FD\u518D\u76F4\u63A5\u4F7F\u7528 <a href="http://github.com/user/repo%EF%BC%8C%E8%80%8C%E8%A6%81%E4%BD%BF%E7%94%A8%E5%83%8F%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E4%B8%AD%E8%BF%99%E6%A0%B7%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8C%85%E5%AF%BC%E5%85%A5%E8%B7%AF%E5%BE%84%E3%80%82" target="_blank" rel="noreferrer">github.com/user/repo\uFF0C\u800C\u8981\u4F7F\u7528\u50CF\u4E0B\u9762\u4EE3\u7801\u4E2D\u8FD9\u6837\u4E0D\u540C\u7684\u5305\u5BFC\u5165\u8DEF\u5F84\u3002</a></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">import github.com/user/repo/v2/xxx</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5982\u679C\u6211\u4EEC\u8981\u4E3A Go \u9879\u76EE\u6DFB\u52A0\u4E3B\u7248\u672C\u53F7\u5927\u4E8E 1 \u7684\u4F9D\u8D56\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u4F7F\u7528 \u201C\u8BED\u4E49\u5BFC\u5165\u7248\u672C\u201D \u673A\u5236\uFF0C\u5728\u58F0\u660E\u5B83\u7684\u5BFC\u5165\u8DEF\u5F84\u7684\u57FA\u7840\u4E0A\uFF0C\u52A0\u4E0A\u7248\u672C\u4FE1\u606F\u3002</p><p>\u6211\u4EEC\u4EE5\u5411 module-mode \u9879\u76EE\u6DFB\u52A0 <a href="http://github.com/go-redis/redis" target="_blank" rel="noreferrer">github.com/go-redis/redis</a> \u4F9D\u8D56\u5305\u7684 v7 \u7248\u672C \u4E3A\u4F8B\uFF0C\u770B\u4E0B\u6DFB\u52A0\u6B65\u9AA4\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go get github.com/go-redis/redis/v7</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">go: downloading github.com/go-redis/redis/v7 v7.4.1</span></span>
<span class="line"><span style="color:#A6ACCD;">go: added github.com/go-redis/redis/v7 v7.4.1</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0Cgo get \u4E3A\u6211\u4EEC\u9009\u62E9\u4E86 go-redis v7 \u7248\u672C\u4E0B\u7684\u6700\u65B0\u7248\u672C v7.4.1\u3002</p><h3 id="\u79FB\u9664\u4F9D\u8D56" tabindex="-1">\u79FB\u9664\u4F9D\u8D56 <a class="header-anchor" href="#\u79FB\u9664\u4F9D\u8D56" aria-hidden="true">#</a></h3><p>\u6211\u4EEC\u8FD8\u662F\u4EE5 go-redis/redis \u793A\u4F8B\uFF0C\u5982\u679C\u8FD9\u65F6\u6211\u4EEC\u4E0D\u518D\u9700\u8981 go-redis/redis\uFF0C\u5E94\u8BE5\u600E\u4E48\u505A\uFF1F</p><p>\u9996\u5148\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 go list \u547D\u4EE4\u5217\u51FA\u5F53\u524D module \u7684\u6240\u6709\u4F9D\u8D56\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go list -m all</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/cespare/xxhash/v2 v2.1.2</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/davecgh/go-spew v1.1.1</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/fsnotify/fsnotify v1.4.9</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/go-redis/redis/v7 v7.4.1</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/go-redis/redis/v8 v8.11.5</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">gopkg.in/yaml.v2 v2.4.0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 go-redis/redis/v8 \u51FA\u73B0\u5728\u7ED3\u679C\u4E2D\u3002</p><p>\u8981\u60F3\u79FB\u9664 go.mod \u7684\u4F9D\u8D56\u9879\uFF0C\u6211\u4EEC\u9700\u8981\u4ECE\u6E90\u7801\u4E2D\u5220\u9664\u5BF9\u4F9D\u8D56\u9879\u7684\u5BFC\u5165\u8BED\u53E5\uFF0C\u7136\u540E\u4F7F\u7528 go mod tidy \u547D\u4EE4\uFF0C\u5C06\u8FD9\u4E2A\u4F9D\u8D56\u9879\u5F7B\u5E95\u4ECE Go Module \u6784\u5EFA\u4E0A\u4E0B\u6587\u4E2D\u6E05\u9664\u6389\u3002go mod tidy \u4F1A\u81EA\u52A8\u5206\u6790\u6E90\u7801\u4F9D\u8D56\u9879\uFF0C\u800C\u4E14\u5C06\u4E0D\u518D\u4F7F\u7528\u7684\u4F9D\u8D56\u4ECE go.mod \u548C go.sum \u4E2D\u79FB\u9664\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod tidy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go list -m all</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/bigwhite/module-mode</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/davecgh/go-spew v1.1.1</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/google/uuid v1.3.0</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/pmezard/go-difflib v1.0.0</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/sirupsen/logrus v1.8.1</span></span>
<span class="line"><span style="color:#A6ACCD;">github.com/stretchr/testify v1.2.2</span></span>
<span class="line"><span style="color:#A6ACCD;">golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6267\u884C\u5B8C go mod tidy \u547D\u4EE4\u540E\uFF0C\u518D\u6B21\u6267\u884C go list -m all \u547D\u4EE4\uFF0C\u53EF\u4EE5\u770B\u5230\u4F9D\u8D56\u5217\u8868\u4E2D\u5DF2\u7ECF\u6CA1\u6709 redis \u4F9D\u8D56\u3002</p><h3 id="\u7279\u6B8A\u60C5\u51B5\uFF1A\u4F7F\u7528-vendor" tabindex="-1">\u7279\u6B8A\u60C5\u51B5\uFF1A\u4F7F\u7528 vendor <a class="header-anchor" href="#\u7279\u6B8A\u60C5\u51B5\uFF1A\u4F7F\u7528-vendor" aria-hidden="true">#</a></h3><p>\u4F60\u53EF\u80FD\u4F1A\u611F\u89C9\u5230\u6709\u70B9\u5947\u602A\uFF0C\u4E3A\u4EC0\u4E48 Go Module \u7684\u7EF4\u62A4\uFF0C\u8FD8\u9700\u8981\u4F7F\u7528 vendor\u3002</p><p>\u5176\u5B9E\uFF0Cvendor \u673A\u5236\u867D\u7136\u8BDE\u751F\u4E8E GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E3B\u5BFC\u7684\u5E74\u4EE3\uFF0C\u4F46\u5728 Go Module \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u5B83\u4F9D\u65E7\u88AB\u4FDD\u7559\u4E0B\u6765\uFF0C\u5E76\u4E14\u6210\u4E3A Go Module \u6784\u5EFA\u673A\u5236\u7684\u4E00\u4E2A\u5F88\u597D\u7684\u8865\u5145\u3002\u7279\u522B\u662F\u5728\u4E00\u4E9B\u4E0D\u65B9\u4FBF\u8BBF\u95EE\u5916\u90E8\u7F51\u7EDC\uFF0C\u5E76\u4E14\u5BF9 Go \u5E94\u7528\u6784\u5EFA\u6027\u80FD\u654F\u611F\u7684\u73AF\u5883\uFF0C\u6BD4\u5982\u5728\u4E00\u4E9B\u5185\u90E8\u7684\u6301\u7EED\u96C6\u6210\u6216\u6301\u7EED\u4EA4\u4ED8\u73AF\u5883\u4E2D\uFF0C \u4F7F\u7528 vendor \u673A\u5236\u53EF\u4EE5\u5B9E\u73B0\u4E0E Go Module \u7B49\u4EF7\u7684\u6784\u5EFA\u3002</p><p>\u548C GOPATH \u6784\u5EFA\u6A21\u5F0F\u4E0D\u540C\uFF0CGo Module \u6784\u5EFA\u6A21\u5F0F\u4E0B\uFF0C\u6211\u4EEC\u65E0\u9700\u624B\u52A8\u7EF4\u62A4 vendor \u76EE\u5F55\u4E0B\u7684\u4F9D\u8D56\u5305\uFF0CGo \u63D0\u4F9B\u4E86\u53EF\u4EE5\u5FEB\u901F\u5EFA\u7ACB\u548C\u66F4\u65B0 vendor \u7684\u547D\u4EE4\u3002\u6211\u4EEC\u8FD8\u662F\u4EE5\u524D\u9762\u7684 module-mode \u9879\u76EE\u4E3A\u4F8B\uFF0C\u901A\u8FC7\u4E0B\u9762\u547D\u4EE4\u4E3A\u8BE5\u9879\u76EE\u5EFA\u7ACB vendor\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go mod vendor</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">tree -LF 2 vendor</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">vendor/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 github.com/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502\xA0\xA0 \u251C\u2500\u2500 google/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502\xA0\xA0 \u2514\u2500\u2500 sirupsen/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 golang.org/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502\xA0\xA0 \u2514\u2500\u2500 x/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 modules.txt</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0Cgo mod vendor \u547D\u4EE4\u5728 vendor \u76EE\u5F55\u4E0B\uFF0C\u521B\u5EFA\u4E86\u5F53\u524D\u9879\u76EE\u4F9D\u8D56\u5305\u7684\u526F\u672C\uFF0C\u5E76\u4E14\u901A\u8FC7 vendor/modules.txt. \u8BB0\u5F55\u4E86 vendor \u4E0B\u7684 module \u4EE5\u53CA\u7248\u672C\u3002</p><p>\u5982\u679C\u6211\u4EEC\u8981\u57FA\u4E8E vendor \u6784\u5EFA\uFF0C\u800C\u4E0D\u662F\u57FA\u4E8E\u672C\u5730\u7F13\u5B58\u7684 Go Module \u6784\u5EFA\uFF0C\u6211\u4EEC\u9700\u8981\u5728 go build \u540E\u9762\u52A0\u4E0A -mod=vendor \u53C2\u6570\u3002</p><p>\u5728 Go 1.14 \u53CA\u4EE5\u540E\u7248\u672C\u4E2D\uFF0C\u5982\u679C Go \u9879\u76EE\u7684\u9876\u5C42\u76EE\u5F55\u4E0B\u5B58\u5728 vendor \u76EE\u5F55\uFF0C\u90A3\u4E48 go build \u9ED8\u8BA4\u4E5F\u4F1A\u4F18\u5148\u57FA\u4E8E vendor \u6784\u5EFA\uFF0C\u9664\u975E\u4F60\u7ED9 go build \u4F20\u9012 -mod=mod \u53C2\u6570\u3002</p><h3 id="\u603B\u7ED3-6" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-6" aria-hidden="true">#</a></h3><p>\u5728\u901A\u8FC7 go mod init \u4E3A\u5F53\u524D Go \u9879\u76EE\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 module \u540E\uFF0C\u968F\u7740\u9879\u76EE\u7684\u6F14\u8FDB\uFF0C\u6211\u4EEC\u5728\u65E5\u5E38\u5F00\u53D1\u8FC7\u7A0B\u4E2D\uFF0C\u4F1A\u9047\u5230\u591A\u79CD\u5E38\u89C1\u7684\u7EF4\u62A4 Go Module \u7684\u573A\u666F\u3002</p><p>\u5176\u4E2D\u6700\u5E38\u89C1\u7684\u5C31\u662F\u4E3A\u9879\u76EE\u6DFB\u52A0\u4E00\u4E2A\u4F9D\u8D56\u5305\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 go get \u547D\u4EE4\u624B\u52A8\u83B7\u53D6\u8BE5\u4F9D\u8D56\u5305\u7684\u7279\u5B9A\u7248\u672C\uFF0C\u66F4\u597D\u7684\u65B9\u6CD5\u662F\u901A\u8FC7 go mod tidy \u547D\u4EE4\u8BA9 Go \u547D\u4EE4\u81EA\u52A8\u53D6\u5206\u6790\u65B0\u4F9D\u8D56\u5E76\u51B3\u5B9A\u4F7F\u7528\u65B0\u4F9D\u8D56\u7684\u54EA\u4E2A\u7248\u672C\u3002</p><ul><li>\u901A\u8FC7 go get \u6211\u4EEC\u53EF\u4EE5\u5347\u7EA7\u6216\u964D\u7EA7\u67D0\u4F9D\u8D56\u7684\u7248\u672C\uFF0C\u5982\u679C\u5347\u7EA7\u6216\u964D\u7EA7\u524D\u540E\u7684\u7248\u672C\u4E0D\u517C\u5BB9\uFF0C\u9700\u8981\u4FEE\u6539\u5BFC\u5165\u8DEF\u5F84\u4E2D\u7684\u7248\u672C\u53F7\uFF0C\u8FD9\u662F Go \u8BED\u4E49\u5BFC\u5165\u7248\u672C\u673A\u5236\u7684\u8981\u6C42\u3002</li><li>\u901A\u8FC7 go mod tidy\uFF0C\u6211\u4EEC\u53EF\u4EE5\u81EA\u52A8\u5206\u6790 Go \u6E90\u7801\u7684\u4F9D\u8D56\u53D8\u66F4\uFF0C\u5305\u62EC\u4F9D\u8D56\u7684\u65B0\u589E\u3001\u7248\u672C\u53D8\u66F4\u4EE5\u53CA\u5220\u9664\uFF0C\u5E76\u66F4\u65B0 go.mod \u4E2D\u7684\u4F9D\u8D56\u4FE1\u606F\u3002</li><li>\u901A\u8FC7 go mod vendor\uFF0C\u6211\u4EEC\u4F9D\u65E7\u53EF\u4EE5\u4F7F\u7528 vendor \u673A\u5236\uFF0C\u5E76\u4E14\u5BF9 vendor \u76EE\u5F55\u4E0B\u7F13\u5B58\u7684\u4F9D\u8D56\u5305\u8FDB\u884C\u81EA\u52A8\u7BA1\u7406\u3002</li></ul><h2 id="_08\u3001\u5165\u53E3\u51FD\u6570\u4E0E\u5305\u521D\u59CB\u5316" tabindex="-1">08\u3001\u5165\u53E3\u51FD\u6570\u4E0E\u5305\u521D\u59CB\u5316 <a class="header-anchor" href="#_08\u3001\u5165\u53E3\u51FD\u6570\u4E0E\u5305\u521D\u59CB\u5316" aria-hidden="true">#</a></h2><p>\u521A\u5F00\u59CB\u5B66\u4E60 Go \u8BED\u8A00\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u80FD\u4F1A\u7ECF\u5E38\u9047\u5230\u8FD9\u6837\u4E00\u4E2A\u95EE\u9898\uFF1A\u4E00\u4E2A Go \u9879\u76EE\u4E2D\u6709\u6570\u5341\u4E2A Go \u5305\uFF0C\u6BCF\u4E2A\u5305\u53C8\u6709\u82E5\u5E72\u5E38\u91CF\u3001\u53D8\u91CF\u3001\u5404\u79CD\u51FD\u6570\u548C\u65B9\u6CD5\uFF0C\u90A3 Go \u4EE3\u7801\u7A76\u7ADF\u662F\u4ECE\u54EA\u91CC\u5F00\u59CB\u6267\u884C\u7684\uFF1F\u540E\u7EED\u6267\u884C\u987A\u5E8F\u53C8\u662F\u4EC0\u4E48\uFF1F</p><p>Go \u7A0B\u5E8F\u7531\u4E00\u7CFB\u5217 Go \u5305\u7EC4\u6210\uFF0C\u4EE3\u7801\u7684\u6267\u884C\u4E5F\u662F\u5728\u5404\u4E2A\u5305\u4E4B\u95F4\u8DF3\u8F6C\u3002\u9996\u5148\u6211\u4EEC\u5148\u6765\u770B\u770B Go \u5E94\u7528\u7684\u5165\u53E3\u51FD\u6570\uFF0Cmain \u51FD\u6570\u3002</p><h3 id="main-main-\u51FD\u6570" tabindex="-1">main.main \u51FD\u6570 <a class="header-anchor" href="#main-main-\u51FD\u6570" aria-hidden="true">#</a></h3><p>Go \u8BED\u8A00\u4E2D\u6709\u4E00\u4E2A\u7279\u6B8A\u7684\u51FD\u6570\uFF1Amain \u5305\u4E2D\u7684 main \u51FD\u6570\uFF0C\u5373 main.main\uFF0C\u5B83\u662F\u6240\u6709 Go \u53EF\u6267\u884C\u7A0B\u5E8F\u7684\u7528\u6237\u5C42\u6267\u884C\u903B\u8F91\u7684\u5165\u53E3\u51FD\u6570\u3002Go \u7A0B\u5E8F\u5728\u7528\u6237\u5C42\u9762\u7684\u6267\u884C\u903B\u8F91\uFF0C\u4F1A\u5728\u8FD9\u4E2A\u51FD\u6570\u5185\u6309\u7167\u5B83\u7684\u8C03\u7528\u987A\u5E8F\u5C55\u5F00\u3002</p><p>main \u51FD\u6570\u7684\u51FD\u6570\u539F\u578B\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>main \u51FD\u6570\u7684\u51FD\u6570\u539F\u578B\u975E\u5E38\u7B80\u5355\uFF0C\u6CA1\u6709\u53C2\u6570\u4E5F\u6CA1\u6709\u8FD4\u56DE\u503C\u3002\u800C\u4E14\uFF0CGo \u8BED\u8A00\u8981\u6C42\uFF1A\u53EF\u6267\u884C\u7A0B\u5E8F\u7684 main \u5305\u5FC5\u987B\u5B9A\u4E49 main \u51FD\u6570\uFF0C\u5426\u5219 Go \u7F16\u8BD1\u5668\u4F1A\u62A5\u9519\u3002\u5728\u542F\u52A8\u591A\u4E2A Goroutine\uFF08Go \u8BED\u8A00\u7684\u8F7B\u91CF\u7EA7\u7528\u6237\u7EBF\u7A0B\uFF09\u7684 Go \u5E94\u7528\u4E2D\uFF0Cmain.main \u51FD\u6570\u5C06\u5728 Go \u5E94\u7528\u7684\u4E3B Coroutine \u4E2D\u6267\u884C\u3002</p><p>\u5728\u591A Goroutine \u7684 Go \u5E94\u7528\u4E2D\uFF0C\u76F8\u8F83\u4E8E main.main \u4F5C\u4E3A Go \u5E94\u7528\u7684\u5165\u53E3\uFF0Cmain.main \u51FD\u6570\u8FD4\u56DE\u7684\u610F\u4E49\u5176\u5B9E\u66F4\u5927\uFF0Cmain \u51FD\u6570\u8FD4\u56DE\u5C31\u610F\u5473\u7740\u6574\u4E2A Go \u7A0B\u5E8F\u7684\u7EC8\u7ED3\uFF0C\u800C\u4E14\u4F60\u4E5F\u4E0D\u7528\u7BA1\u8FD9\u4E2A\u65F6\u5019\u662F\u5426\u8FD8\u6709\u5176\u4ED6\u5B50 Goroutine \u6B63\u5728\u6267\u884C\u3002</p><p>\u53E6\u5916\u8FD8\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u9664\u4E86 main \u5305\u5916\uFF0C\u5176\u4ED6\u5305\u4E5F\u53EF\u4EE5\u62E5\u6709\u81EA\u5DF1\u7684\u540D\u4E3A main \u7684\u51FD\u6570\u6216\u65B9\u6CD5\u3002\u4F46\u6309\u7167 Go \u7684\u53EF\u89C1\u6027\u89C4\u5219\uFF08\u5C0F\u5199\u5B57\u6BCD\u5F00\u5934\u7684\u6807\u8BC6\u7B26\u4E3A\u975E\u5BFC\u51FA\u6807\u8BC6\u7B26\uFF09\uFF0C\u975E main \u5305\u4E2D\u81EA\u5B9A\u4E49\u7684 main \u51FD\u6570\u4EC5\u9650\u4E8E\u5305\u5185\u4F7F\u7528\uFF0C\u5C31\u50CF\u4E0B\u9762\u4EE3\u7801\u8FD9\u6837\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pk1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main func for pk1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u91CC\u7684 main \u51FD\u6570\u4E3B\u8981\u5C31\u662F\u5728\u5305 pkg1 \u5185\u90E8\u4F7F\u7528\u7684\uFF0C\u4E0D\u80FD\u5728\u5305\u5916\u4F7F\u7528\u3002</p><p>\u5BF9\u4E8E main \u5305\u7684 main \u51FD\u6570\u6765\u8BF4\uFF0C\u867D\u7136\u4ED6\u662F\u7528\u6237\u5C42\u903B\u8F91\u7684\u5165\u53E3\u51FD\u6570\uFF0C\u4F46\u5E76\u4E0D\u610F\u5473\u7740\u5B83\u662F\u7528\u6237\u5C42\u7B2C\u4E00\u4E2A\u88AB\u6267\u884C\u7684\u51FD\u6570\u3002</p><h3 id="init-\u51FD\u6570" tabindex="-1">init \u51FD\u6570 <a class="header-anchor" href="#init-\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u9664\u4E86\u4E0A\u9762\u7684 main.main \u51FD\u6570\u4E4B\u5916\uFF0CGo \u8FD8\u6709\u4E00\u4E2A\u7279\u6B8A\u51FD\u6570\uFF0C\u5C31\u662F\u7528\u4E8E\u8FDB\u884C\u5305\u521D\u59CB\u5316\u7684 init \u51FD\u6570\u3002</p><p>\u548C main.main \u51FD\u6570\u4E00\u6837\uFF0Cinit \u51FD\u6570\u4E5F\u662F\u4E00\u4E2A\u65E0\u53C2\u6570\u65E0\u8FD4\u56DE\u503C\u7684\u51FD\u6570\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C main \u4F9D\u8D56\u7684\u5305\u4E2D\u5B9A\u4E49\u4E86 init \u51FD\u6570\uFF0C\u6216\u8005 main \u5305\u81EA\u8EAB\u5B9A\u4E49\u4E86 init \u51FD\u6570\uFF0C\u90A3\u4E48 Go \u7A0B\u5E8F\u5728\u8FD9\u4E2A\u5305\u521D\u59CB\u5316\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u81EA\u52A8\u8C03\u7528\u5B83\u7684 init \u51FD\u6570\uFF0C\u56E0\u6B64\u8FD9\u4E9B init \u51FD\u6570\u7684\u6267\u884C\u5C31\u90FD\u4F1A\u53D1\u751F\u5728 main \u51FD\u6570\u4E4B\u524D\u3002</p><p>\u4E0D\u8FC7\u5BF9\u4E8E init \u51FD\u6570\u6765\u8BF4\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u6CE8\u610F\u4E00\u70B9\uFF0C\u5C31\u662F\u5728 Go \u7A0B\u5E8F\u4E2D\u6211\u4EEC\u4E0D\u80FD\u624B\u5DE5\u663E\u793A\u5730\u8C03\u7528 init\uFF0C\u5426\u5219\u4F1A\u6536\u5230\u7F16\u8BD1\u9519\u8BEF\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">init invoked</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go run main.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># command-line-arguments</span></span>
<span class="line"><span style="color:#A6ACCD;">./main.go:10:2: undefined: init</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Go \u5305\u53EF\u4EE5\u62E5\u6709\u591A\u4E2A init \u51FD\u6570\uFF0C\u6BCF\u4E2A\u7EC4\u6210 Go \u5305\u7684 Go \u6E90\u6587\u4EF6\u4E2D\uFF0C\u4E5F\u53EF\u4EE5\u5B9A\u4E49\u591A\u4E2A init \u51FD\u6570\u3002</p><p>\u5728\u521D\u59CB\u5316 Go \u5305\u65F6\uFF0CGo \u4F1A\u6309\u7167\u4E00\u5B9A\u7684\u6B21\u5E8F\uFF0C\u9010\u4E00\u3001\u987A\u5E8F\u5730\u8C03\u7528\u8FD9\u4E2A\u5305\u7684 init \u51FD\u6570\u3002\u4E00\u822C\u6765\u8BF4\uFF0C\u5148\u4F20\u9012\u7ED9 Go \u7F16\u8BD1\u5668\u7684\u6E90\u6587\u4EF6\u4E2D\u7684 init \u51FD\u6570\uFF0C\u4F1A\u5148\u88AB\u6267\u884C\uFF1B\u540C\u4E00\u4E2A\u6E90\u6587\u4EF6\u4E2D\u7684\u591A\u4E2A init \u51FD\u6570\uFF0C\u4F1A\u6309\u58F0\u660E\u987A\u5E8F\u4F9D\u6B21\u6267\u884C\u3002</p><p>\u6240\u4EE5\uFF0C\u5F53\u6211\u4EEC\u60F3\u8981\u5728 main.main \u51FD\u6570\u6267\u884C\u4E4B\u524D\uFF0C\u6267\u884C\u4E00\u4E9B\u51FD\u6570\u6216\u8BED\u53E5\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u5C06\u5B83\u653E\u5165 init \u51FD\u6570\u5C31\u53EF\u4EE5\u4E86\u3002</p><h3 id="go-\u5305\u7684\u521D\u59CB\u5316\u987A\u5E8F" tabindex="-1">Go \u5305\u7684\u521D\u59CB\u5316\u987A\u5E8F <a class="header-anchor" href="#go-\u5305\u7684\u521D\u59CB\u5316\u987A\u5E8F" aria-hidden="true">#</a></h3><p>\u4ECE\u7A0B\u5E8F\u903B\u8F91\u7ED3\u6784\u89D2\u5EA6\u6765\u770B\uFF0CGo \u5305\u662F\u7A0B\u5E8F\u903B\u8F91\u5C01\u88C5\u7684\u57FA\u672C\u5355\u5143\uFF0C\u6BCF\u4E2A\u5305\u90FD\u53EF\u4EE5\u7406\u89E3\u4E3A\u662F\u4E00\u4E2A \u201C\u81EA\u6CBB\u201D \u7684\u3001\u5C01\u88C5\u826F\u597D\u7684\u3001\u5BF9\u5916\u90E8\u66B4\u9732\u6709\u9650\u63A5\u53E3\u7684\u57FA\u672C\u5355\u5143\u3002\u4E00\u4E2A Go \u7A0B\u5E8F\u5C31\u662F\u7531\u4E00\u7EC4\u5305\u7EC4\u6210\uFF0C\u7A0B\u5E8F\u7684\u521D\u59CB\u5316\u5C31\u662F\u8FD9\u4E9B\u5305\u7684\u521D\u59CB\u5316\u3002\u6BCF\u4E2A Go \u5305\u8FD8\u4F1A\u6709\u81EA\u5DF1\u7684\u4F9D\u8D56\u5305\u3001\u5E38\u91CF\u3001\u53D8\u91CF\u3001init \u51FD\u6570\uFF08main \u5305\u6709main\u51FD\u6570\uFF09\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u8FD9\u5F20\u6D41\u7A0B\u56FE\uFF0C\u5B66\u4E60\u4E0B Go \u5305\u7684\u521D\u59CB\u5316\u6B21\u5E8F\uFF1A</p><img src="`+D+`"><p>\u9996\u5148\uFF0Cmain \u5305\u4F9D\u8D56 pkg1 \u548C pkg4 \u4E24\u4E2A\u5305\uFF0C\u7B2C\u4E00\u6B65\uFF0CGo \u4F1A\u6839\u636E\u5305\u5BFC\u5165\u7684\u987A\u5E8F\uFF0C\u5148\u521D\u59CB\u5316\u7B2C\u4E00\u4E2A\u4F9D\u8D56\u5305 pkg1\u3002</p><p>Go \u5728\u8FDB\u884C\u5305\u521D\u59CB\u5316\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u4F1A\u91C7\u7528 \u201C\u6DF1\u5EA6\u4F18\u5148\u201D \u7684\u539F\u5219\uFF0C\u9012\u5F52\u521D\u59CB\u5316\u5404\u4E2A\u5305\u7684\u4F9D\u8D56\u5305\u3002\u5728\u4E0A\u56FE\u4E2D\uFF0Cpkg1 \u5305\u4F9D\u8D56 pkg2 \u5305\uFF0Cpkg2 \u5305\u4F9D\u8D56 pkg3 \u5305\u3002\u56E0\u4E3A pkg3 \u6CA1\u6709\u4F9D\u8D56\u5305\uFF0C\u6240\u4EE5\u5728 pkg3 \u4E2D Go \u4F1A\u6309\u7167 \u201C\u5E38\u91CF -&gt; \u53D8\u91CF -&gt; init \u51FD\u6570\u201D \u7684\u987A\u5E8F\u5148\u5BF9 pkg3 \u5305\u8FDB\u884C\u521D\u59CB\u5316\u3002</p><p>\u7D27\u63A5\u7740\uFF0C\u5728 pkg3 \u5305\u521D\u59CB\u5316\u5B8C\u6BD5\u540E\uFF0CGo \u4F1A\u56DE\u5230 pkg2 \u5305\u5BF9 pkg2 \u5305\u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u7136\u540E\u518D\u56DE\u5230 pkg1 \u5305\u5BF9 pkg1 \u5305\u8FDB\u884C\u521D\u59CB\u5316\u3002\u5728\u8C03\u7528\u5B8C pkg1 \u5305\u7684 init \u51FD\u6570\u540E\uFF0CGo \u5C31\u5B8C\u6210\u4E86 main \u5305\u7684\u7B2C\u4E00\u4E2A\u4F9D\u8D56\u5305 pkg1 \u7684\u521D\u59CB\u5316\u3002</p><blockquote><p>\u6839\u636E Go \u8BED\u8A00\u89C4\u8303\uFF0C\u4E00\u4E2A\u88AB\u591A\u4E2A\u5305\u4F9D\u8D56\u7684\u5305\u8FDB\u4F1A\u521D\u59CB\u5316\u4E00\u6B21\u3002</p></blockquote><p>\u63A5\u4E0B\u6765\uFF0CGo \u4F1A\u521D\u59CB\u5316 main \u5305\u7684\u7B2C\u4E8C\u4E2A\u4F9D\u8D56\u5305 pkg4\uFF0Cpkg4 \u5305\u997F\u521D\u59CB\u5316\u8FC7\u7A0B\u4E0E pkg1 \u7C7B\u4F3C\uFF0C\u4E5F\u662F\u5148\u521D\u59CB\u5316\u4F9D\u8D56\u5305 pkg5\uFF0C\u7136\u540E\u518D\u521D\u59CB\u5316\u81EA\u8EAB\u3002</p><p>\u7136\u540E\uFF0C\u5F53 Go \u521D\u59CB\u5316\u5B8C pkg4 \u5305\u540E\u4E5F\u5C31\u5B8C\u6210\u4E86\u5BF9 main \u5305\u7684\u6240\u6709\u4F9D\u8D56\u5305\u7684\u521D\u59CB\u5316\uFF0C\u63A5\u4E0B\u6765\u521D\u59CB\u5316 main \u5305\u81EA\u8EAB\u3002</p><p>\u6700\u540E\uFF0C\u5728 main \u5305\u4E2D\uFF0CGo \u540C\u6837\u4F1A\u6309\u7167 \u201C\u5E38\u91CF -&gt; \u53D8\u91CF -&gt; init \u51FD\u6570\u201D \u7684\u987A\u5E8F\u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u6267\u884C\u5B8C\u8FD9\u4E9B\u521D\u59CB\u5316\u5DE5\u4F5C\u540E\u624D\u6B63\u5F0F\u8FDB\u5165\u7A0B\u5E8F\u7684\u5165\u53E3 main \u51FD\u6570\u3002</p><p>\u7B80\u800C\u8A00\u4E4B\uFF0CGo \u5305\u7684\u521D\u59CB\u5316\u6B21\u5E8F\u5E76\u4E0D\u96BE\uFF0C\u53EA\u9700\u8981\u8BB0\u4F4F\u4E0B\u9762\u8FD9\u4E09\u70B9\u5C31\u53EF\u4EE5\uFF1A</p><ul><li>\u4F9D\u8D56\u5305\u6309\u7167 \u201C\u6DF1\u5EA6\u4F18\u5148\u201D \u7684\u6B21\u5E8F\u8FDB\u884C\u521D\u59CB\u5316\uFF1B</li><li>\u6BCF\u4E2A\u5305\u5185\u4EE5 \u201C\u5E38\u91CF -&gt; \u53D8\u91CF -&gt; init \u51FD\u6570\u201D \u7684\u987A\u5E8F\u8FDB\u884C\u521D\u59CB\u5316\uFF1B</li><li>\u5305\u5185\u7684\u591A\u4E2A init \u51FD\u6570\u6309\u51FA\u73B0\u6B21\u6570\u8FDB\u884C\u8C03\u7528\u3002</li></ul><h3 id="init-\u51FD\u6570\u5E94\u7528\u573A\u666F" tabindex="-1">init \u51FD\u6570\u5E94\u7528\u573A\u666F <a class="header-anchor" href="#init-\u51FD\u6570\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a></h3><p>init \u7684\u5E94\u7528\u573A\u666F\u4E0E init \u51FD\u6570\u5728 Go \u5305\u521D\u59CB\u5316\u8FC7\u7A0B\u4E2D\u7684\u6B21\u5E8F\u5BC6\u4E0D\u53EF\u5206\u3002\u524D\u9762\u6211\u4EEC\u4E5F\u8BB2\u8FC7\uFF0CGo \u5305\u5728\u521D\u59CB\u5316\u65F6\uFF0Cinit \u51FD\u6570\u7684\u521D\u59CB\u5316\u6B21\u5E8F\u5728\u53D8\u91CF\u4E4B\u540E\uFF0C\u8FD9\u4E5F\u610F\u5473\u7740\u5F00\u53D1\u4EBA\u5458\u5728 init \u51FD\u6570\u4E2D\u5BF9\u5305\u7EA7\u53D8\u91CF\u8FDB\u884C\u8FDB\u4E00\u6B65\u68C0\u67E5\u548C\u64CD\u4F5C\u3002</p><h4 id="\u91CD\u7F6E\u5305\u7EA7\u53D8\u91CF" tabindex="-1">\u91CD\u7F6E\u5305\u7EA7\u53D8\u91CF <a class="header-anchor" href="#\u91CD\u7F6E\u5305\u7EA7\u53D8\u91CF" aria-hidden="true">#</a></h4><p>\u9996\u5148\u6211\u4EEC\u6765\u770B init \u51FD\u6570\u7684\u7B2C\u4E00\u4E2A\u5E38\u7528\u7528\u9014\uFF1A\u91CD\u7F6E\u5305\u7EA7\u53D8\u91CF\u503C\u3002</p><p>init \u51FD\u6570\u53EF\u4EE5\u5BF9\u5305\u5185\u90E8\u4EE5\u53CA\u66B4\u9732\u5230\u5916\u90E8\u7684\u5305\u7EA7\u6570\u636E\uFF08\u4E3B\u8981\u662F\u5305\u7EA7\u53D8\u91CF\uFF09\u7684\u521D\u59CB\u72B6\u6001\u8FDB\u884C\u68C0\u67E5\u3002\u5728 Go \u6807\u51C6\u5E93\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u5F88\u591A init \u51FD\u6570\u88AB\u7528\u4E8E\u68C0\u67E5\u5305\u7EA7\u53D8\u91CF\u521D\u59CB\u72B6\u6001\u7684\u4F8B\u5B50\uFF0C\u4F8B\u5982\u6807\u51C6\u5E93 flag \u5305\u5C31\u662F\u5176\u4E2D\u7684\u4E00\u4E2A\u3002</p><p>flag \u5305\u5B9A\u4E49\u4E86\u4E00\u4E2A\u5BFC\u51FA\u7684\u5305\u7EA7\u53D8\u91CF CommandLine\uFF0C\u5982\u679C\u7528\u6237\u6CA1\u6709\u901A\u8FC7 flag.newFlagSet \u521B\u5EFA\u65B0\u7684\u4EE3\u8868\u547D\u4EE4\u884C\u6807\u5FD7\u96C6\u5408\u7684\u5B9E\u4F8B\uFF0C\u90A3\u4E48 CommandLine \u5C31\u4F1A\u4F5C\u4E3A flag \u5BFC\u51FA\u51FD\u6570\u80CC\u540E\u7684\u9ED8\u8BA4\u503C\u3002</p><p>\u5728 flag \u5305\u521D\u59CB\u5316\u7684\u65F6\u5019\uFF0C\u7531\u4E8E init \u51FD\u6570\u521D\u59CB\u5316\u6B21\u5E8F\u5728\u5305\u7EA7\u53D8\u91CF\u4E4B\u540E\uFF0C\u56E0\u6B64\u5305\u7EA7\u53D8\u91CF CommandLine \u4F1A\u5728 init \u51FD\u6570\u4E4B\u524D\u88AB\u521D\u59CB\u5316\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> CommandLine </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">NewFlagSet</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">os</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Args</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> ExitOnError</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">NewFlagSet</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> errorHandling ErrorHandling</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">FlagSet </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    f </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">FlagSet</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          name</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        errorHandling</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> errorHandling</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    f</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Usage </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">defaultUsage</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> f</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">f </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">FlagSet</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defaultUsage</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fprintf</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Output</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Usage:</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fprintf</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Output</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Usage of %s:</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">PrintDefaults</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u901A\u8FC7 NewFlagSet \u521B\u5EFA CommandLine \u53D8\u91CF\u7ED1\u5B9A\u7684 FlagSet \u7C7B\u578B\u5B9E\u4F8B\u65F6\uFF0CCommandLine \u7684 Usage \u5B57\u6BB5\u88AB\u8D4B\u503C\u4E3A defaultUsage\u3002\u5982\u679C\u4FDD\u6301\u73B0\u72B6\uFF0C\u90A3\u4E48\u4F7F\u7528 flag \u5305\u9ED8\u8BA4 CommandLine \u7684\u7528\u6237\u5C31\u65E0\u6CD5\u81EA\u5B9A\u4E49 usage \u7684\u8F93\u51FA\u3002\u4E8E\u662F\uFF0Cflag \u5305\u5728 init \u51FD\u6570\u4E2D\u91CD\u7F6E\u4E86 CommandLine \u7684 Usage \u5B57\u6BB5\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    CommandLine</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Usage </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> commandLineUsage </span><span style="color:#676E95;">// \u91CD\u7F6ECommandLine\u7684Usage\u5B57\u6BB5</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">commandLineUsage</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">Usage</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> Usage </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">func()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fprintf</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">CommandLine</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Output</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Usage of %s:</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Args</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">PrintDefaults</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u901A\u8FC7\u4E0A\u9762\u4EE3\u7801\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\uFF0CCommandLine \u7684 Usage \u5B57\u6BB5\uFF0C\u8BBE\u7F6E\u4E86\u4E00\u4E2A flag \u5305\u5185\u7684\u672A\u5BFC\u51FA\u51FD\u6570 commandLineUsage\uFF0C\u540E\u8005\u4F7F\u7528 flag \u5305\u7684 Usage \u53D8\u91CF\u3002\u8FD9\u6837\uFF0C\u5C31\u901A\u8FC7 init \u51FD\u6570\uFF0C\u5C06 CommandLine \u4E0E\u5305\u53D8\u91CF Usage \u5173\u8054\u5728\u4E00\u8D77\u3002</p><p>\u7136\u540E\uFF0C\u5F53\u7528\u6237\u5C06\u81EA\u5B9A\u4E49\u7684 usage \u8D4B\u503C\u7ED9 flag.Usage \u540E\uFF0C\u5C31\u76F8\u5F53\u4E8E\u6539\u53D8\u4E86\u9ED8\u8BA4\u4EE3\u8868\u547D\u4EE4\u884C\u6807\u5FD7\u96C6\u5408\u7684 CommandLine \u53D8\u91CF\u7684 Usage\u3002\u8FD9\u6837\u5F53 flag \u5305\u5B8C\u6210\u521D\u59CB\u5316\u540E\uFF0CCommandLine \u53D8\u91CF\u5C31\u5904\u4E8E\u4E00\u4E2A\u5408\u7406\u53EF\u7528\u7684\u72B6\u6001\u3002</p><h4 id="\u5305\u7EA7\u53D8\u91CF\u521D\u59CB\u5316" tabindex="-1">\u5305\u7EA7\u53D8\u91CF\u521D\u59CB\u5316 <a class="header-anchor" href="#\u5305\u7EA7\u53D8\u91CF\u521D\u59CB\u5316" aria-hidden="true">#</a></h4><p>\u6709\u4E9B\u5305\u7EA7\u53D8\u91CF\u9700\u8981\u4E00\u4E2A\u6BD4\u8F83\u590D\u6742\u7684\u521D\u59CB\u5316\u8FC7\u7A0B\uFF0C\u6709\u4E9B\u65F6\u5019\uFF0C\u4F7F\u7528\u5B83\u7684\u7C7B\u578B\u96F6\u503C\uFF08\u6BCF\u4E2A Go \u7C7B\u578B\u90FD\u5177\u6709\u4E00\u4E2A\u96F6\u503C\u5B9A\u4E49\uFF09\u6216\u901A\u8FC7\u7B80\u5355\u521D\u59CB\u5316\u8868\u8FBE\u5F0F\u4E0D\u80FD\u6EE1\u8DB3\u4E1A\u52A1\u903B\u8F91\u8981\u6C42\uFF0C\u8FD9\u65F6\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 init \u51FD\u6570\u5BF9\u5305\u7EA7\u53D8\u91CF\u8FDB\u884C\u521D\u59CB\uFF0C\u5728 \u6807\u51C6\u5E93 http \u5305\u4E2D\u5C31\u6709\u8FD9\u6837\u4E00\u4E2A\u793A\u4F8B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    http2VerboseLogs    </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521D\u59CB\u5316\u65F6\u9ED8\u8BA4\u503C\u4E3A false</span></span>
<span class="line"><span style="color:#A6ACCD;">    http2logFrameWrites </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521D\u59CB\u5316\u65F6\u9ED8\u8BA4\u503C\u4E3A false</span></span>
<span class="line"><span style="color:#A6ACCD;">    http2logFrameReads  </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521D\u59CB\u5316\u65F6\u9ED8\u8BA4\u503C\u4E3A false</span></span>
<span class="line"><span style="color:#A6ACCD;">    http2inTests        </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521D\u59CB\u5316\u65F6\u9ED8\u8BA4\u503C\u4E3A false</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    e </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Getenv</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GODEBUG</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> strings</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Contains</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http2debug=1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        http2VerboseLogs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5728 init \u4E2D\u5BF9 http2VerboseLogs \u7684\u503C\u8FDB\u884C\u91CD\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> strings</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Contains</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http2debug=2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        http2VerboseLogs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5728 init\u4E2D \u5BF9 http2VerboseLogs \u7684\u503C\u8FDB\u884C\u91CD\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">        http2logFrameWrites </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5728 init \u4E2D\u5BF9 http2logFrameWrites \u7684\u503C\u8FDB\u884C\u91CD\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">        http2logFrameReads </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5728i nit\u4E2D \u5BF9 http2logFrameReads \u7684\u503C\u8FDB\u884C\u91CD\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u6807\u51C6\u5E93 http \u5305\u5B9A\u4E49\u4E86\u4E00\u7CFB\u5217\u5E03\u5C14\u7C7B\u578B\u7684\u7279\u6027\u5F00\u5173\u53D8\u91CF\uFF0C\u5B83\u4EEC\u9ED8\u8BA4\u5904\u4E8E\u5173\u95ED\u72B6\u6001\uFF08\u5373\u503C\u4E3A false\uFF09\uFF0C\u4F46\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 GODEBUG \u73AF\u5883\u53D8\u91CF\u503C\uFF0C\u5F00\u542F\u76F8\u5173\u7279\u6027\u5F00\u5173\u3002\u7136\u540E\u5728 init \u51FD\u6570\u4E2D\uFF0C\u6839\u636E\u73AF\u5883\u53D8\u91CF GODEBUG \u7684\u503C\uFF0C\u5BF9\u8FD9\u4E9B\u5305\u7EA7\u5F00\u5173\u53D8\u91CF\u8FDB\u884C\u521D\u59CB\u5316\u3002</p><h4 id="\u5B9E\u73B0-\u201C\u6CE8\u518C\u6A21\u5F0F\u201D" tabindex="-1">\u5B9E\u73B0 \u201C\u6CE8\u518C\u6A21\u5F0F\u201D <a class="header-anchor" href="#\u5B9E\u73B0-\u201C\u6CE8\u518C\u6A21\u5F0F\u201D" aria-hidden="true">#</a></h4><p>\u4E3A\u4E86\u4FBF\u4E8E\u6211\u4EEC\u66F4\u597D\u7406\u89E3\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E00\u6BB5\u4F7F\u7528 lib/pq \u5305\u8BBF\u95EE PostgreSQL \u6570\u636E\u5E93\u7684\u4EE3\u7801\u793A\u4F8B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">database/sql</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    _ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/lib/pq</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    db</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> sql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Open</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">postgres</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user=pqgotest dbname=pqgotest sslmode=verify-full</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    age </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">21</span></span>
<span class="line"><span style="color:#A6ACCD;">    rows</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SELECT name FROM users WHERE age = $1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> age</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u793A\u4F8B\u4EE3\u7801\u4E2D\u662F\u4EE5\u7A7A\u5BFC\u5165\u7684\u65B9\u5F0F\u5F15\u5165 lib/pq \u5305\uFF0Cmain \u51FD\u6570\u4E2D\u5E76\u6CA1\u6709\u4F7F\u7528 pq \u5305\u7684\u4EFB\u4F55\u53D8\u91CF\u3001\u51FD\u6570\u6216\u65B9\u6CD5\uFF0C\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u5BF9 PostgreSQL \u6570\u636E\u5E93\u7684\u8BBF\u95EE\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    sql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Register</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">postgres</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">Driver</span><span style="color:#89DDFF;">{})</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u8FF0\u6548\u679C\u5B9E\u73B0\u539F\u7406\u5176\u5B9E\u5C31\u662F init \u51FD\u6570\uFF0Cinit \u51FD\u6570\u4F1A\u5728 pq \u5305\u521D\u59CB\u5316\u7684\u65F6\u5019\u5F97\u4EE5\u6267\u884C\u3002\u5728 pq \u5305\u7684 init \u51FD\u6570\u4E2D\uFF0Cpq \u5305\u5C06\u81EA\u5DF1\u5B9E\u73B0\u7684 sql \u9A71\u52A8\u6CE8\u518C\u5230 sql \u5305\u4E2D\u3002\u8FD9\u6837\u4E3B\u8981\u5E94\u7528\u5C42\u4EE3\u7801\u5728 Open \u6570\u636E\u5E93\u7684\u65F6\u5019\uFF0C\u4F20\u5165\u9A71\u52A8\u7684\u540D\u79F0\uFF08\u8FD9\u91CC\u662F \u201Cpostgress\u201D\uFF09\uFF0C\u90A3\u4E48\u901A\u8FC7 sql.Open \u51FD\u6570\uFF0C\u8FD4\u56DE\u7684\u6570\u636E\u5E93\u5B9E\u4F8B\u53E5\u67C4\u5BF9\u6570\u636E\u5E93\u8FDB\u884C\u7684\u64CD\u4F5C\uFF0C\u5B9E\u9645\u4E0A\u8C03\u7528\u7684\u90FD\u662F pq \u5305\u4E2D\u76F8\u5E94\u7684\u9A71\u52A8\u5B9E\u73B0\u3002</p><p>\u8FD9\u79CD\u901A\u8FC7\u5728 init \u51FD\u6570\u4E2D\u6CE8\u518C\u81EA\u5DF1\u5B9E\u73B0\u7684\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u6709\u6548\u964D\u4F4E Go \u5305\u5BF9\u5916\u7684\u76F4\u63A5\u66B4\u9732\uFF0C\u5C24\u5176\u662F\u5305\u7EA7\u53D8\u91CF\u7684\u66B4\u9732\uFF0C\u4ECE\u800C\u907F\u514D\u5916\u90E8\u5F71\u54CD\u5185\u90E8\u72B6\u6001\u3002</p><p>\u53E6\u5916\uFF0C\u4ECE\u6807\u51C6\u5E93 database/sql \u5305\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u8FD9\u79CD \u201C\u6CE8\u518C\u6A21\u5F0F\u201D \u5B9E\u8D28\u4E0A\u662F\u4E00\u79CD\u5DE5\u5382\u8BBE\u8BA1\u6A21\u5F0F\u7684\u5B9E\u73B0\uFF0Csql.Open \u51FD\u6570\u5C31\u662F\u8FD9\u4E2A\u6A21\u5F0F\u4E2D\u7684\u5DE5\u5382\u65B9\u6CD5\uFF0C\u5B83\u6839\u636E\u5916\u90E8\u4F20\u5165\u7684\u9A71\u52A8\u540D\u79F0 \u201C\u751F\u4EA7\u201D \u51FA\u4E0D\u540C\u7C7B\u522B\u7684\u6570\u636E\u5E93\u5B9E\u4F8B\u53E5\u67C4\u3002</p><p>\u8FD9\u79CD \u201C\u6CE8\u518C\u6A21\u5F0F\u201D \u5728\u5176\u4ED6\u6807\u51C6\u5E93\u4E2D\u4E5F\u6709\u5E7F\u6CDB\u5E94\u7528\uFF0C\u4F8B\u5982\uFF0C\u4F7F\u7528\u6807\u51C6\u5E93 image \u5305\u83B7\u53D6\u5404\u79CD\u683C\u5F0F\u56FE\u7247\u7684\u5BBD\u548C\u9AD8\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">image</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    _ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">image/gif</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE5\u7A7A\u5BFC\u5165\u65B9\u5F0F\u6CE8\u5165 gif \u56FE\u7247\u683C\u5F0F\u9A71\u52A8</span></span>
<span class="line"><span style="color:#A6ACCD;">    _ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">image/jpeg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE5\u7A7A\u5BFC\u5165\u65B9\u5F0F\u6CE8\u5165 jpeg \u56FE\u7247\u683C\u5F0F\u9A71\u52A8</span></span>
<span class="line"><span style="color:#A6ACCD;">    _ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">image/png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE5\u7A7A\u5BFC\u5165\u65B9\u5F0F\u6CE8\u5165 png \u56FE\u7247\u683C\u5F0F\u9A71\u52A8</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">os</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u652F\u6301png, jpeg, gif</span></span>
<span class="line"><span style="color:#A6ACCD;">    width</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">imageSize</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">os</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Args</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">])</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u83B7\u53D6\u4F20\u5165\u7684\u56FE\u7247\u6587\u4EF6\u7684\u5BBD\u4E0E\u9AD8</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">get image size error:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">image size: [%d, %d]</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> width</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> height</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">imageSize</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">imageFile </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    f</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _ </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Open</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">imageFile</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u6253\u5F00\u56FE\u6587\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">defer</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    img</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> image</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Decode</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">f</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5BF9\u6587\u4EF6\u8FDB\u884C\u89E3\u7801\uFF0C\u5F97\u5230\u56FE\u7247\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    b </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> img</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Bounds</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u8FD4\u56DE\u56FE\u7247\u533A\u57DF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Max</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">X</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Max</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Y</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u9762\u8FD9\u4E2A\u793A\u4F8B\u7A0B\u5E8F\u652F\u6301 png\u3001jpeg\u3001gif \u4E09\u79CD\u683C\u5F0F\u7684\u56FE\u7247\u3002\u5B9E\u73B0\u8FD9\u4E00\u6548\u679C\u7684\u539F\u56E0\u662F\uFF0C\u5728 image/png\u3001image/jpeg \u548C image/gif \u5305\u5404\u81EA\u7684 init \u51FD\u6570\u4E2D\uFF0C\u90FD\u5C06\u81EA\u5DF1 \u201C\u6CE8\u518C\u201D \u5230 image \u7684\u652F\u6301\u683C\u5F0F\u5217\u8868\u4E2D\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// $GOROOT/src/image/png/reader.go</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    image</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RegisterFormat</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> pngHeader</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Decode</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> DecodeConfig</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// $GOROOT/src/image/jpeg/reader.go</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    image</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RegisterFormat</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jpeg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\\xff\\xd8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Decode</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> DecodeConfig</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// $GOROOT/src/image/gif/reader.go</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    image</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RegisterFormat</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gif</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GIF8?a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Decode</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> DecodeConfig</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"></span></code></pre></div><h3 id="\u603B\u7ED3-7" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-7" aria-hidden="true">#</a></h3><p>\u672C\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u4E00\u8D77\u4E86\u89E3\u4E86 Go \u5E94\u7528\u7684\u7528\u6237\u5C42\u5165\u53E3\u51FD\u6570 main.main\u3001\u5305\u521D\u59CB\u5316\u51FD\u6570 init\uFF0C\u8FD8\u6709 Go \u7A0B\u5E8F\u5305\u7684\u521D\u59CB\u5316\u6B21\u5E8F\u548C\u5305\u5185\u5404\u79CD\u8BED\u6CD5\u5143\u7D20\u7684\u521D\u59CB\u5316\u6B21\u5E8F\u3002</p><p>\u6211\u4EEC\u9700\u8981\u91CD\u70B9\u5173\u6CE8 init \u51FD\u6570\u5177\u5907\u7684\u51E0\u79CD\u884C\u4E3A\u7279\u5F81\uFF1A</p><ul><li>\u6267\u884C\u987A\u5E8F\u6392\u5E8F\u5305\u5185\u5176\u4ED6\u8BED\u6CD5\u5143\u7D20\u540E\u9762\uFF1B</li><li>\u6BCF\u4E2A init \u51FD\u6570\u5728\u6574\u4E2A Go \u7A0B\u5E8F\u751F\u547D\u5468\u671F\u5185\u4EC5\u4F1A\u88AB\u6267\u884C\u4E00\u6B21\uFF1B</li><li>init \u51FD\u6570\u662F\u987A\u5E8F\u6267\u884C\u7684\uFF0C\u53EA\u6709\u5F53 init \u51FD\u6570\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u624D\u4F1A\u53BB\u6267\u884C\u4E0B\u4E00\u4E2A init \u51FD\u6570\u3002</li></ul><p>\u57FA\u4E8E\u4E0A\u9762\u8FD9\u4E9B\u7279\u5F81\uFF0Cinit \u51FD\u6570\u5341\u5206\u9002\u5408\u505A\u4E00\u4E9B\u5305\u7EA7\u6570\u636E\u521D\u59CB\u5316\u5DE5\u4F5C\u4EE5\u53CA\u5305\u7EA7\u6570\u636E\u521D\u59CB\u72B6\u6001\u7684\u68C0\u67E5\u5DE5\u4F5C\u3002</p><p>\u6700\u540E\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u6CE8\u610F\u4E00\u70B9\uFF0C\u5927\u591A Go \u7A0B\u5E8F\u90FD\u662F\u5E76\u53D1\u7A0B\u5E8F\uFF0C\u7A0B\u5E8F\u4F1A\u542F\u52A8\u591A\u4E2A Goroutine \u5E76\u53D1\u6267\u884C\u7A0B\u5E8F\u903B\u8F91\uFF0C\u8FD9\u91CC\u4F60\u4E00\u5B9A\u8981\u6CE8\u610F\u4E3B Goroutine \u7684\u6267\u884C\u72B6\u6001\uFF0C\u9700\u8981\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u51B3\u5B9A\uFF0C\u662F\u5426\u9700\u8981\u7B49\u5F85\u5176\u4ED6\u5B50 goroutine \u505A\u5B8C\u6E05\u7406\u6536\u5C3E\u5DE5\u4F5C\u9000\u51FA\u540E\u518D\u6267\u884C\u9000\u51FA\u3002</p><h2 id="_09\u3001\u6784\u5EFA-web-\u670D\u52A1" tabindex="-1">09\u3001\u6784\u5EFA Web \u670D\u52A1 <a class="header-anchor" href="#_09\u3001\u6784\u5EFA-web-\u670D\u52A1" aria-hidden="true">#</a></h2><p>\u6839\u636E <a href="https://go.dev/blog/survey2021-results" target="_blank" rel="noreferrer">Go \u5B98\u65B9\u7528\u6237 2021 \u8C03\u67E5\u62A5\u544A</a> \uFF0C\u53EF\u4EE5\u5F97\u5230 Go \u5E94\u7528\u6700\u5E7F\u6CDB\u7684\u9886\u57DF\u8C03\u67E5\u7ED3\u679C\u56FE\u3002</p><img src="`+y+`"><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u5728 Go \u5E94\u7528\u7684\u524D 4 \u4E2A\u9886\u57DF\u4E2D\uFF0C\u6709\u4E24\u4E2A\u90FD\u662F Web \u670D\u52A1\u76F8\u5173\u7684\u3002\u4E00\u4E2A\u662F\u6392\u5728\u7B2C\u4E00\u4F4D\u7684 API/RPC \u670D\u52A1\uFF0C\u53E6\u4E00\u4E2A\u662F\u6392\u5728\u7B2C\u56DB\u4F4D\u7684 Web \u670D\u52A1\u3002</p><h3 id="\u7B80\u6613-web-\u670D\u52A1" tabindex="-1">\u7B80\u6613 Web \u670D\u52A1 <a class="header-anchor" href="#\u7B80\u6613-web-\u670D\u52A1" aria-hidden="true">#</a></h3><p>Go \u5177\u6709 \u201C\u9762\u5411\u5DE5\u7A0B\u201D \u7684\u7279\u6027\uFF0C\u5B83\u63D0\u4F9B\u4E86\u5B8C\u5584\u7684\u5DE5\u5177\u94FE\u548C\u6807\u51C6\u5E93\uFF0C\u4F7F\u5F97 Go \u7A0B\u5E8F\u5927\u5927\u51CF\u5C11\u5BF9\u7B2C\u4E09\u65B9\u5305\u7684\u4F9D\u8D56\u3002\u6211\u4EEC\u53EF\u4EE5\u57FA\u4E8E Go \u6807\u51C6\u5E93\u7684 net/http \u5305\uFF0C\u8F7B\u677E\u6784\u5EFA\u4E00\u4E2A\u627F\u8F7D Web \u5185\u5BB9\u4F20\u8F93\u7684 HTTP \u670D\u52A1\u3002</p><p>\u9996\u5148\u6211\u4EEC\u5EFA\u7ACB simple-http-server \u76EE\u5F55\uFF0C\u5E76\u521B\u5EFA Go Module\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir simple-http-server</span></span>
<span class="line"><span style="color:#A6ACCD;">cd simple-http-server</span></span>
<span class="line"><span style="color:#A6ACCD;">go mod init simple-http-server</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u56E0\u4E3A\u8FD9\u4E2A HTTP \u670D\u52A1\u6BD4\u8F83\u7B80\u5355\uFF0C\u6211\u4EEC\u53EF\u4EE5\u91C7\u7528\u6700\u7B80\u9879\u76EE\u5E03\u5C40\uFF0C\u76F4\u63A5\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA main.go \u6E90\u6587\u4EF6\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">net/http</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandleFunc</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">func(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> r </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		w</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Write</span><span style="color:#89DDFF;">([]</span><span style="color:#82AAFF;">byte</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, world</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">	http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ListenAndServe</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8080</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4EE5\u4E0A\u5C31\u662F\u4E00\u4E2A\u6700\u7B80\u5355\u7684 HTTP \u670D\u52A1\u5B9E\u73B0\u3002\u5728\u8FD9\u4E2A\u5B9E\u73B0\u4E2D\uFF0C\u6211\u4EEC\u53EA\u4F7F\u7528 Go \u6807\u51C6\u5E93\u7684 http \u5305\u3002</p><p>\u8FD9\u6BB5\u4EE3\u7801\u6709\u4E24\u4E2A\u91CD\u8981\u7684\u51FD\u6570\uFF0C\u4E00\u4E2A\u662F ListenAndServe\uFF0C\u53E6\u4E00\u4E2A\u662F HandleFunc\u3002</p><p>\u6211\u4EEC\u901A\u8FC7 http \u5305\u63D0\u4F9B\u7684 ListenAndServe \u51FD\u6570\uFF0C\u5EFA\u7ACB\u8D77 HTTP \u670D\u52A1\uFF0C\u8FD9\u4E2A\u670D\u52A1\u76D1\u542C\u672C\u5730 8080 \u7AEF\u53E3\u3002\u5BA2\u6237\u7AEF\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u7AEF\u53E3\u4E0E\u670D\u52A1\u5EFA\u7ACB\u94FE\u63A5\uFF0C\u53D1\u9001 HTTP \u8BF7\u6C42\u5373\u53EF\u5F97\u5230\u76F8\u5E94\u7684\u54CD\u5E94\u7ED3\u679C\u3002</p><p>\u5728\u4EE3\u7801\u4E2D\uFF0C\u6211\u4EEC\u8FD8\u4E3A web \u670D\u52A1\u8BBE\u7F6E\u4E86\u4E00\u4E2A\u5904\u7406\u51FD\u6570\u3002\u8FD9\u4E2A\u51FD\u6570\u7684\u51FD\u6570\u539F\u578B\u5982\u4E0B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> r </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u51FD\u6570\u91CC\u6709\u4E24\u4E2A\u53C2\u6570\uFF0Cw \u548C r\u3002r \u4EE3\u8868\u6765\u81EA\u5BA2\u6237\u7AEF\u7684 HTTP \u8BF7\u6C42\uFF0Cw \u4EE3\u8868\u8FD4\u56DE\u5BA2\u6237\u7AEF\u7684\u5E94\u7B54\uFF0C\u57FA\u4E8E http \u5305\u5B9E\u73B0\u7684 HTTP \u670D\u52A1\u90FD\u5E94\u8BE5\u7B26\u5408\u8FD9\u4E00\u539F\u578B\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u7F16\u8BD1\u8FD0\u884C\u8FD9\u4E2A\u7A0B\u5E8F\uFF0C\u5E76\u7528 curl \u547D\u4EE4\u884C\u5DE5\u5177\u6A21\u62DF\u5BA2\u6237\u7AEF\uFF0C\u5411\u4E0A\u8FF0\u670D\u52A1\u53D1\u9001 http \u8BF7\u6C42\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">./simple-htt-server</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl localhost:8080/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">hello, world</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u81F3\u6B64\uFF0C\u4E00\u4E2A\u7B80\u6613\u7684 HTTP \u670D\u52A1\u5C31\u6784\u5EFA\u6210\u529F\u4E86\u3002</p><h3 id="\u56FE\u4E66\u7BA1\u7406-api-\u670D\u52A1" tabindex="-1">\u56FE\u4E66\u7BA1\u7406 API \u670D\u52A1 <a class="header-anchor" href="#\u56FE\u4E66\u7BA1\u7406-api-\u670D\u52A1" aria-hidden="true">#</a></h3><p>\u5728\u524D\u9762\u6211\u4EEC\u5EFA\u7ACB\u8D77\u4E00\u4E2A\u7B80\u6613\u7684 HTTP \u670D\u52A1\uFF0C\u73B0\u5728\u6211\u4EEC\u518D\u6765\u6784\u5EFA\u4E00\u4E2A\u5B9E\u6218\u5C0F\u9879\u76EE\uFF0C\u4E00\u4E2A\u66F4\u63A5\u8FD1\u4E8E\u771F\u5B9E\u4E1A\u52A1\u7684\u56FE\u4E66\u7BA1\u7406 API \u670D\u52A1\u3002</p><p>\u5728\u8FD9\u4E2A\u9879\u76EE\u4E2D\uFF0C\u6211\u4EEC\u6A21\u62DF\u7684\u662F\u4E00\u4E2A\u4E66\u5E97\u7684\u56FE\u4E66\u7BA1\u7406\u540E\u7AEF\u670D\u52A1\u3002\u8FD9\u4E2A\u670D\u52A1\u4E3A\u5E73\u53F0\u524D\u7AEF\u4EE5\u53CA\u5176\u4ED6\u5BA2\u6237\u7AEF\uFF0C\u63D0\u4F9B\u9488\u5BF9\u56FE\u4E66\u7684 CRUD \u7684\u57FA\u4E8E HTTP \u534F\u8BAE\u7684 API\u3002</p><p>API \u91C7\u7528 RESTful \u98CE\u683C\u8BBE\u8BA1\uFF0C\u670D\u52A1\u63D0\u4F9B\u7684 API \u96C6\u5408\u5982\u4E0B\uFF1A</p><table><thead><tr><th>HTTP \u65B9\u6CD5</th><th>\u8BF7\u6C42\u8DEF\u5F84</th><th>API \u4F5C\u7528</th></tr></thead><tbody><tr><td>POST</td><td>/book</td><td>\u521B\u5EFA\u56FE\u4E66\u6761\u76EE</td></tr><tr><td>POST</td><td>/book/:id</td><td>\u66F4\u65B0\u56FE\u4E66\u6761\u76EE</td></tr><tr><td>GET</td><td>/book/:id</td><td>\u8FD4\u56DE\u56FE\u4E66\u6761\u76EE\u4FE1\u606F</td></tr><tr><td>GET</td><td>/book</td><td>\u8FD4\u56DE\u6240\u6709\u56FE\u4E66\u6761\u76EE\u4FE1\u606F</td></tr><tr><td>DELETE</td><td>/book/:id</td><td>\u5220\u9664\u56FE\u4E66\u6761\u76EE</td></tr></tbody></table><h4 id="\u5E03\u5C40\u8BBE\u8BA1" tabindex="-1">\u5E03\u5C40\u8BBE\u8BA1 <a class="header-anchor" href="#\u5E03\u5C40\u8BBE\u8BA1" aria-hidden="true">#</a></h4><p>\u9996\u5148\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A bookstore \u7684 Go \u9879\u76EE\u5E76\u521B\u5EFA\u5BF9\u5E94\u7684 Go Module\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir bookstore</span></span>
<span class="line"><span style="color:#A6ACCD;">cd bookstore</span></span>
<span class="line"><span style="color:#A6ACCD;">go mod init bookstore</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u628A\u8FD9\u4E2A\u670D\u52A1\u62C6\u5206\u4E3A\u4E24\u90E8\u5206\u3002</p><ul><li>\u4E00\u90E8\u5206\u662F HTTP \u670D\u52A1\u5668\uFF0C\u7528\u6765\u5BF9\u5916\u63D0\u4F9B API \u670D\u52A1</li><li>\u4E00\u90E8\u5206\u662F\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757\uFF0C\u5B58\u50A8\u56FE\u4E66\u6570\u636E\u3002</li></ul><p>\u540C\u65F6\uFF0C\u8FD9\u662F\u4E00\u4E2A\u6784\u5EFA\u53EF\u6267\u884C\u7A0B\u5E8F\u4E3A\u76EE\u7684\u7684 Go \u9879\u76EE\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A\u9879\u76EE\u7ED3\u6784\u5E03\u5C40\u8BBE\u8BA1\u6210\u8FD9\u6837\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 cmd/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 bookstore/         // \u653E\u7F6E bookstore main \u5305\u6E90\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502       \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.mod                 // module bookstore \u7684 go.mod</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 internal/              // \u5B58\u653E\u9879\u76EE\u5185\u90E8\u5305\u7684\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 store/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502       \u2514\u2500\u2500 memstore.go     </span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 server/                // HTTP \u670D\u52A1\u5668\u6A21\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u251C\u2500\u2500 middleware/</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2502   \u2514\u2500\u2500 middleware.go</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2502   \u2514\u2500\u2500 server.go          </span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 store/                 // \u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 factory/</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2514\u2500\u2500 factory.go</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 store.go</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="\u9879\u76EE-main-\u5305" tabindex="-1">\u9879\u76EE main \u5305 <a class="header-anchor" href="#\u9879\u76EE-main-\u5305" aria-hidden="true">#</a></h4><p>main \u5305\u662F\u4E3B\u5305\uFF0C\u4E0B\u9762\u662F main \u5305\u7684\u903B\u8F91\u5B9E\u73B0\u56FE\u3002</p><img src="`+F+`"><p>\u4E0B\u9762\u662F main \u5305 main.go \u7684\u6240\u6709\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	_ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">bookstore/internal/store</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">bookstore/server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">bookstore/store/factory</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">context</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">log</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">os</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">os/signal</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">syscall</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">time</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	s</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mem</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521B\u5EFA\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#82AAFF;">panic</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	srv </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewBookStoreServer</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8080</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521B\u5EFA http \u670D\u52A1\u5B9E\u4F8B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	errChan</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ListenAndServe</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u8FD0\u884C http \u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">web server start failed:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">web server start ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(chan</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Signal</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	signal</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Notify</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> syscall</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SIGINT</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> syscall</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SIGTERM</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u76D1\u89C6\u6765\u81EA errChan \u4EE5\u53CA c \u7684\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;-</span><span style="color:#A6ACCD;">errChan</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">web server run failed:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;-</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bookstore program is exiting...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cf </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">WithTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Second</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">defer</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cf</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">		err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Shutdown</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4F18\u96C5\u5173\u95ED http \u670D\u52A1\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bookstore program exit error:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bookstore program exit ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728 Go \u4E2D\uFF0Cmain \u5305\u4E0D\u4EC5\u5305\u542B\u6574\u4E2A\u7A0B\u5E8F\u5165\u53E3\uFF0C\u8FD8\u627F\u62C5\u7A0B\u5E8F\u4E2D\u4E3B\u8981\u6A21\u5757\u521D\u59CB\u5316\u4E0E\u7EC4\u5408\u7684\u529F\u80FD\u3002</p><p>\u5728\u6211\u4EEC\u8FD9\u4E2A\u7A0B\u5E8F\u4E2D\uFF0C\u4E3B\u8981\u6A21\u5757\u5C31\u662F\u7B2C 16 \u884C\u7684\u521B\u5EFA\u56FE\u4E66\u5B58\u50A8\u6A21\u5757\u5B9E\u4F8B\uFF0C\u4EE5\u53CA\u7B2C 21 \u884C\u521B\u5EFA HTTP \u670D\u52A1\u6A21\u5757\u5B9E\u4F8B\u3002\u5728\u521B\u5EFA HTTP \u670D\u52A1\u6A21\u5757\u5B9E\u4F8B\u65F6\uFF0C\u6211\u4EEC\u5C06\u56FE\u4E66\u5B58\u50A8\u5B9E\u4F8B s \u4F5C\u4E3A\u53C2\u6570\uFF0C\u4F20\u9012\u7ED9 NewBookStoreServer \u51FD\u6570\u3002</p><p>\u6211\u4EEC\u91CD\u70B9\u6765\u770B main \u51FD\u6570\u7684\u540E\u534A\u90E8\u5206\uFF0830\u884C \uFF5E 42 \u884C\uFF09\uFF0C\u5728\u8FD9\u91CC\u6211\u4EEC\u901A\u8FC7\u76D1\u89C6\u7CFB\u7EDF\u4FE1\u53F7\u5B9E\u73B0\u4E86 http \u670D\u52A1\u5B9E\u4F8B\u7684\u4F18\u96C5\u9000\u51FA\u3002</p><p>\u6240\u8C13\u4F18\u96C5\u9000\u51FA\uFF0C\u6307\u7684\u5C31\u662F\u7A0B\u5E8F\u6709\u673A\u4F1A\u7B49\u5F85\u5176\u4ED6\u4E8B\u60C5\u5904\u7406\u5B8C\u518D\u9000\u51FA\u3002\u6BD4\u5982\u5C1A\u672A\u5B8C\u6210\u7684\u4E8B\u52A1\u5904\u7406\u3001\u6E05\u7406\u8D44\u6E90\uFF08\u5173\u95ED\u6587\u4EF6\u63CF\u8FF0\u7B26\u3001\u5173\u95ED socket\uFF09\u3001\u4FDD\u5B58\u5FC5\u8981\u4E2D\u95F4\u72B6\u6001\u3001\u5185\u5B58\u6570\u636E\u6301\u4E45\u5316\u7B49\u7B49\u3002</p><p>\u6211\u4EEC\u901A\u8FC7 signal \u5305\u7684 Notify \u6355\u83B7\u4E86 SIGINT\u3001SIGTERM \u8FD9\u4E24\u4E2A\u7CFB\u7EDF\u4FE1\u53F7\u3002\u8FD9\u6837\uFF0C\u5F53\u8FD9\u4E24\u4E2A\u4FE1\u53F7\u4E2D\u7684\u4EFB\u4F55\u4E00\u4E2A\u89E6\u53D1\u65F6\uFF0C\u6211\u4EEC\u7684 http \u670D\u52A1\u5B9E\u4F8B\u90FD\u6709\u673A\u4F1A\u5728\u9000\u51FA\u524D\u505A\u4E00\u4E9B\u6E05\u7406\u5DE5\u4F5C\u3002</p><p>\u7136\u540E\uFF0C\u6211\u4EEC\u518D\u4F7F\u7528 http \u670D\u52A1\u5B9E\u4F8B\uFF08srv\uFF09\u81EA\u8EAB\u63D0\u4F9B\u7684 Shutdown \u65B9\u6CD5\uFF0C\u6765\u5B9E\u73B0 http \u670D\u52A1\u5185\u90E8\u7684\u9000\u51FA\u6E05\u7406\u5DE5\u4F5C\uFF0C\u5305\u62EC\uFF1A\u7ACB\u5373\u5173\u95ED\u6240\u6709 listener\u3001\u5173\u95ED\u6240\u6709\u7A7A\u95F2\u8FDE\u63A5\u3001\u7B49\u5F85\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u7684\u8FDE\u63A5\u5904\u7406\u5B8C\u6BD5\u7B49\u7B49\u3002\u5F53 http \u670D\u52A1\u5B9E\u4F8B\u7684\u6E05\u7406\u5DE5\u4F5C\u5B8C\u6210\u540E\uFF0C\u6211\u4EEC\u6574\u4E2A\u7A0B\u5E8F\u5C31\u53EF\u4EE5\u6B63\u5E38\u9000\u51FA\u4E86\u3002</p><h4 id="\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757" tabindex="-1">\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757 <a class="header-anchor" href="#\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757" aria-hidden="true">#</a></h4><p>\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6A21\u5757\u7684\u804C\u8D23\u5F88\u6E05\u6670\uFF0C\u5C31\u662F\u7528\u6765\u5B58\u50A8\u6574\u4E2A bookstore \u7684\u56FE\u4E66\u6570\u636E\u3002\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u6709\u591A\u79CD\u65B9\u5F0F\uFF0C\u6700\u7B80\u5355\u7684\u65B9\u5F0F\u5C31\u662F\u5728\u5185\u5B58\u4E2D\u521B\u5EFA\u4E00\u4E2A map\uFF0C\u4EE5\u56FE\u4E66 id \u4F5C\u4E3A key\uFF0C\u6765\u4FDD\u5B58\u56FE\u4E66\u4FE1\u606F\u3002\u4F46\u5982\u679C\u6211\u4EEC\u5728\u751F\u4EA7\u73AF\u5883\uFF0C\u6570\u636E\u8981\u8FDB\u884C\u6301\u4E45\u5316\uFF0C\u90A3\u4E48\u6700\u5B9E\u9645\u7684\u65B9\u5F0F\u5C31\u662F\u901A\u8FC7 Nosql \u6570\u636E\u5E93\u751A\u81F3\u662F\u5173\u7CFB\u578B\u6570\u636E\u5E93\uFF0C\u5B9E\u73B0\u5BF9\u56FE\u4E66\u6570\u636E\u7684\u5B58\u50A8\u4E0E\u7BA1\u7406\u3002</p><p>\u8003\u8651\u5230\u5BF9\u591A\u79CD\u5B58\u50A8\u5B9E\u73B0\u65B9\u5F0F\u652F\u6301\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u56FE\u4E66\u5B58\u50A8\u7684\u76F8\u5173\u64CD\u4F5C\uFF0C\u5B9A\u4E49\u5728\u4E00\u4E2A\u63A5\u53E3\u7C7B\u578B Store \u4E2D\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// store/store.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	Id      </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">json:&quot;id&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;">// \u56FE\u4E66 ISBN ID</span></span>
<span class="line"><span style="color:#A6ACCD;">	Name    </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">json:&quot;name&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u56FE\u4E66\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">	Authors </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">json:&quot;authors&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u56FE\u4E66\u4F5C\u8005</span></span>
<span class="line"><span style="color:#A6ACCD;">	Press   </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">json:&quot;press&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;">// \u51FA\u7248\u793E</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Store</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">Create</span><span style="color:#89DDFF;">(*</span><span style="color:#A6ACCD;">Book</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#A6ACCD;">       </span><span style="color:#676E95;">// \u521B\u5EFA\u4E00\u4E2A\u65B0\u56FE\u4E66\u6761\u76EE</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">Update</span><span style="color:#89DDFF;">(*</span><span style="color:#A6ACCD;">Book</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#A6ACCD;">       </span><span style="color:#676E95;">// \u66F4\u65B0\u67D0\u56FE\u4E66\u6761\u76EE</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">Get</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Book</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u83B7\u53D6\u67D0\u56FE\u4E66\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">GetAll</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">([]</span><span style="color:#A6ACCD;">Book</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">// \u83B7\u53D6\u6240\u6709\u56FE\u4E66\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;">// \u5220\u9664\u67D0\u56FE\u4E66\u6761\u76EE</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5EFA\u7ACB\u4E86\u4E00\u4E2A\u5BF9\u5E94\u56FE\u4E66\u6761\u76EE\u7684\u62BD\u8C61\u6570\u636E\u7C7B\u578B Book\uFF0C\u4EE5\u53CA\u9488\u5BF9 Book \u5B58\u50A8\u7684\u63A5\u53E3\u7C7B\u578B Store\u3002\u8FD9\u6837\uFF0C\u5BF9\u4E8E\u60F3\u8981\u8FDB\u884C\u56FE\u4E66\u6570\u636E\u64CD\u4F5C\u7684\u4E00\u65B9\u6765\u8BF4\uFF0C\u53EA\u9700\u8981\u5F97\u5230\u4E00\u4E2A\u6EE1\u8DB3 Store \u63A5\u53E3\u7684\u5B9E\u4F8B\uFF0C\u5C31\u53EF\u4EE5\u5B9E\u73B0\u5BF9\u56FE\u4E66\u6570\u636E\u7684\u5B58\u50A8\u64CD\u4F5C\uFF0C\u4E0D\u518D\u5173\u5FC3\u56FE\u4E66\u6570\u636E\u7A76\u7ADF\u91C7\u7528\u4F55\u79CD\u5B58\u50A8\u65B9\u5F0F\u3002\u8FD9\u5C31\u5B9E\u73B0\u4E86\u56FE\u4E66\u5B58\u50A8\u64CD\u4F5C\u4E0E\u5E95\u5C42\u56FE\u4E66\u6570\u636E\u5B58\u50A8\u65B9\u5F0F\u7684\u89E3\u8026\u3002\u8FD9\u4E5F\u662F Go \u7EC4\u5408\u8BBE\u8BA1\u54F2\u5B66\u4E2D\u9762\u5411\u63A5\u53E3\u7F16\u7A0B\u7684\u4E00\u4E2A\u91CD\u8981\u4F53\u73B0\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u53C2\u8003\u300A\u8BBE\u8BA1\u6A21\u5F0F\u300B\u63D0\u4F9B\u7684\u591A\u79CD\u521B\u5EFA\u578B\u6A21\u5F0F\uFF0C\u9009\u62E9\u4E00\u79CD Go \u98CE\u683C\u7684\u5DE5\u5382\u6A21\u5F0F\uFF08\u521B\u5EFA\u578B\u6A21\u5F0F\u7684\u4E00\u79CD\uFF09\u6765\u5B9E\u73B0\u6EE1\u8DB3 Store \u63A5\u53E3\u5B9E\u4F8B\u7684\u521B\u5EFA\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// store/factory/factory.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	providersMu sync</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">RWMutex</span></span>
<span class="line"><span style="color:#A6ACCD;">	providers   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Store</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Register</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Store</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	providersMu</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Lock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">defer</span><span style="color:#A6ACCD;"> providersMu</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Unlock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#82AAFF;">panic</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store: Register provider is nil</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> dup </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> providers</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">];</span><span style="color:#A6ACCD;"> dup </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#82AAFF;">panic</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store: Register called twice for provider </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	providers</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">providerName </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Store</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	providersMu</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RLock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	p</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ok </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> providers</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">providerName</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">	providersMu</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RUnlock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">ok </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil,</span><span style="color:#A6ACCD;"> fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Errorf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store: unknown provider %s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> providerName</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> p</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u6BB5\u4EE3\u7801\u6A21\u4EFF Go \u6807\u51C6\u5E93 database/sql \u7684\u5B9E\u73B0\u65B9\u5F0F\u3002factory \u5305\u91C7\u7528 map \u6570\u636E\u7C7B\u578B\uFF0C\u6EE1\u8DB3\u5BF9 Store \u63A5\u53E3\u7684\u5B9E\u4F8B\u7C7B\u578B\u8FDB\u884C\u7BA1\u7406\u3002factory \u8FD8\u63D0\u4F9B\u4E86 Register \u51FD\u6570\uFF0C\u8BA9\u5404\u4E2A\u5B9E\u73B0 Store \u63A5\u53E3\u7684\u7C7B\u578B\u53EF\u4EE5\u6CE8\u518C\u5230\u5DE5\u5382\u4E2D\u3002</p><p>\u4E00\u65E6\u6CE8\u518C\u6210\u529F\uFF0Cfactory \u5C31\u53EF\u4EE5\u751F\u4EA7\u51FA\u6EE1\u8DB3 Store \u63A5\u53E3\u7684\u7C7B\u578B\u5B9E\u4F8B\u3002\u4F9D\u8D56 Store \u63A5\u53E3\u7684\u4F7F\u7528\u65B9\uFF0C\u53EA\u9700\u8981\u8C03\u7528 factory \u5305\u7684 New \u51FD\u6570\uFF0C\u518D\u4F20\u5165\u671F\u671B\u4F7F\u7528\u7684\u56FE\u4E66\u5B58\u50A8\u5B9E\u73B0\u7684\u540D\u79F0\uFF0C\u5C31\u53EF\u4EE5\u5F97\u5230\u5BF9\u5E94\u7684\u7C7B\u578B\u5B9E\u4F8B\u3002</p><p>\u5728\u9879\u76EE interal/store \u76EE\u5F55\u4E0B\uFF0C\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u4E2A\u57FA\u4E8E\u5185\u5B58 map \u7684 Store \u63A5\u53E3\u7684\u5B9E\u73B0\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// internal/store/memstore.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">store</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	mystore </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">bookstore/store</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	factory </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">bookstore/store/factory</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">sync</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Register</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mem</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">MemStore</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		books</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]*</span><span style="color:#A6ACCD;">mystore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Book</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MemStore</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	sync</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">RWMutex</span></span>
<span class="line"><span style="color:#A6ACCD;">	books </span><span style="color:#89DDFF;">map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]*</span><span style="color:#A6ACCD;">mystore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Book</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4ECE\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u5728 init \u51FD\u6570\u4E2D\u6211\u4EEC\u8C03\u7528 factory \u5305\u63D0\u4F9B\u7684 Register \u51FD\u6570\uFF0C\u5C06\u81EA\u5DF1\u7684\u5B9E\u4F8B\u4EE5 \u201Cmem\u201D \u7684\u540D\u79F0\u6CE8\u518C\u5230 factory \u4E2D\u3002</p><p>\u8FD9\u6837\u505A\u8FD8\u6709\u4E00\u4E2A\u597D\u5904\uFF0C\u4F9D\u8D56 Store \u63A5\u53E3\u8FDB\u884C\u56FE\u4E66\u6570\u636E\u7BA1\u7406\u7684\u4E00\u65B9\uFF0C\u53EA\u9700\u8981\u5BFC\u5165 intenal/store \u8FD9\u4E2A\u5305\uFF0C\u5C31\u53EF\u4EE5\u5B8C\u6210\u81EA\u52A8\u6CE8\u518C\u3002</p><h4 id="http-\u670D\u52A1\u6A21\u5757" tabindex="-1">HTTP \u670D\u52A1\u6A21\u5757 <a class="header-anchor" href="#http-\u670D\u52A1\u6A21\u5757" aria-hidden="true">#</a></h4><p>HTTP \u670D\u52A1\u6A21\u5757\u7684\u804C\u8D23\u5C31\u662F\u5BF9\u5916\u63D0\u4F9B API \u670D\u52A1\uFF0C\u5904\u7406\u5BA2\u6237\u7AEF\u8BF7\u6C42\uFF0C\u5E76\u901A\u8FC7 Store \u63A5\u53E3\u5B9E\u4F8B\u6267\u884C\u5BF9\u56FE\u4E66\u6570\u636E\u7684\u76F8\u5173\u64CD\u4F5C\u3002</p><p>\u9996\u5148\uFF0C\u6211\u4EEC\u62BD\u8C61\u5904\u7406\u4E00\u4E2A server \u5305\uFF0C\u8FD9\u4E2A\u5305\u4E2D\u5B9A\u4E49\u4E86\u4E00\u4E2A BookStoreServer \u7C7B\u578B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// server/server.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookStoreServer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	s   store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Store</span></span>
<span class="line"><span style="color:#A6ACCD;">	srv </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Server</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u7C7B\u578B\u5B9E\u8D28\u4E0A\u5C31\u662F\u4E00\u4E2A\u6807\u51C6\u5E93\u7684 http.Server\uFF0C\u5E76\u4E14\u7EC4\u5408\u4E86 store.Store \u63A5\u53E3\u7684\u80FD\u529B\u3002server \u5305\u63D0\u4F9B NewBookStoreServer \u51FD\u6570\uFF0C\u7528\u6765\u521B\u5EFA BookStoreServer \u7C7B\u578B\u5B9E\u4F8B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// server/server.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">NewBookStoreServer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">addr </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> s store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Store</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">BookStoreServer </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	srv </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">BookStoreServer</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">		srv</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Server</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			Addr</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> addr</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	router </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> mux</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewRouter</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	router</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandleFunc</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">createBookHandler</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Methods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	router</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandleFunc</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book/{id}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">updateBookHandler</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Methods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	router</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandleFunc</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book/{id}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getBookHandler</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Methods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	router</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandleFunc</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getAllBooksHandler</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Methods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	router</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandleFunc</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book/{id}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">delBookHandler</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Methods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DELETE</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Handler </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> middleware</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Logging</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">middleware</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Validating</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">router</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> srv</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C \u51FD\u6570 NewBookStoreServer \u63A5\u53D7\u4E24\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u662F HTTP \u670D\u52A1\u76D1\u542C\u7684\u670D\u52A1\u5730\u5740\uFF0C\u53E6\u4E00\u4E2A\u662F\u5B9E\u73B0\u4E86 store.Store \u63A5\u53E3\u7684\u7C7B\u578B\u5B9E\u4F8B\u3002\u8FD9\u6837\u51FD\u6570\u539F\u578B\u8BBE\u8BA1\u662F Go \u8BED\u8A00\u5E38\u7528\u7684\u4E00\u79CD\u8BBE\u8BA1\u65B9\u6CD5\uFF0C\u5373\u63A5\u53D7\u4E00\u4E2A\u63A5\u53E3\u7C7B\u578B\u53C2\u6570\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5177\u4F53\u7C7B\u578B\u3002\u8FD4\u56DE\u7684\u5177\u4F53\u7C7B\u578B\u7EC4\u5408\u4F20\u5165\u63A5\u53E3\u7C7B\u578B\u7684\u80FD\u529B\u3002</p><p>\u9664\u6B64\u4E4B\u5916\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u4E3A HTTP \u670D\u52A1\u5668\u8BBE\u7F6E\u8BF7\u6C42\u5904\u7406\u51FD\u6570\u3002\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u501F\u52A9\u7B2C\u4E09\u65B9\u5305 <a href="http://github.com/gorilla/mux" target="_blank" rel="noreferrer">github.com/gorilla/mux</a> \u6765\u5B9E\u73B0\u6211\u4EEC\u7684\u9700\u6C42\u3002</p><p>\u5728\u4E0A\u9762\u4EE3\u7801\u7684\u7B2C 11 \u884C\u5230 16 \u884C\uFF0C\u6211\u4EEC\u9488\u5BF9\u4E0D\u540C URI \u8DEF\u5F84\u6A21\u5F0F\u8BBE\u7F6E\u4E86\u4E0D\u540C\u7684\u5904\u7406\u51FD\u6570\u3002\u6211\u4EEC\u4EE5 createBookHandler \u548C getBookHandler \u4E3A\u4F8B\u6765\u770B\u4E0B\u8FD9\u4E9B\u5904\u7406\u51FD\u6570\u7684\u5B9E\u73B0\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// server/server.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bs </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">BookStoreServer</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createBookHandler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	dec </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewDecoder</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Body</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> book store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Book</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> dec</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Decode</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">book</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusBadRequest</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> bs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Create</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">book</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusBadRequest</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bs </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">BookStoreServer</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBookHandler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ok </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> mux</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Vars</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">)[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">ok </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no id found in request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusBadRequest</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	book</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> bs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusBadRequest</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">response</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> book</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">response</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v </span><span style="color:#89DDFF;">interface{})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Marshal</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusInternalServerError</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	w</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Header</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">Set</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	w</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Write</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E9B\u5904\u7406\u51FD\u6570\u7684\u5B9E\u73B0\u90FD\u5927\u540C\u5C0F\u5F02\uFF0C\u9996\u5148\u83B7\u53D6 http \u8BF7\u6C42\u5305\u4F53\u6570\u636E\uFF0C\u7136\u540E\u901A\u8FC7\u6807\u51C6\u5E93 json \u5305\u5C06\u8FD9\u4E9B\u6570\u636E\uFF0C\u89E3\u7801\uFF08decode\uFF09\u4E3A\u6211\u4EEC\u9700\u8981\u7684 store.Book \u7ED3\u6784\u4F53\u5B9E\u4F8B\uFF0C\u518D\u901A\u8FC7 Store \u63A5\u53E3\u5BF9\u56FE\u4E66\u6570\u636E\u8FDB\u884C\u5B58\u50A8\u64CD\u4F5C\u3002\u5982\u679C\u6211\u4EEC\u662F\u83B7\u53D6\u56FE\u4E66\u6570\u636E\u7684\u8BF7\u6C42\uFF0C\u90A3\u4E48\u5904\u7406\u51FD\u6570\u53EF\u4EE5\u901A\u8FC7 response \u51FD\u6570\uFF0C\u5C06\u53D6\u51FA\u7684\u56FE\u4E66\u6570\u636E\u7F16\u7801\u5230 http \u54CD\u5E94\u5305\u4E2D\uFF0C\u5E76\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002</p><p>\u5728 NewBookStoreServer \u51FD\u6570\u5B9E\u73B0\u7684\u5C3E\u90E8\uFF0C\u6211\u95E8\u8FD8\u53EF\u4EE5\u770B\u5230\u8FD9\u6837\u4E00\u6BB5\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">srv</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Handler </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> middleware</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Logging</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">middleware</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Validating</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">router</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5728 router \u7684\u5916\u56F4\u5305\u88F9\u4E86 middleware\uFF0C\u5373\u4E2D\u95F4\u4EF6\u51FD\u6570\u3002\u4E0B\u9762\u6211\u4EEC\u518D\u6765\u770B\u4E0B\u8FD9\u4E24\u4E2A middleware\uFF0C\u5373 Logging \u4E0E Validating\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// server/middleware/middleware.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Logging</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">next http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Handler</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Handler </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandlerFunc</span><span style="color:#89DDFF;">(func(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">recv a %s request from %s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Method</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">RemoteAddr</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		next</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ServeHTTP</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Validating</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">next http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Handler</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Handler </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HandlerFunc</span><span style="color:#89DDFF;">(func(</span><span style="color:#A6ACCD;">w http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ResponseWriter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		contentType </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Header</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		mediatype</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> mime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ParseMediaType</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">contentType</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusBadRequest</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> mediatype </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid Content-Type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> http</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StatusUnsupportedMediaType</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		next</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ServeHTTP</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> req</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0CLoading \u51FD\u6570\u4E3B\u8981\u7528\u6765\u8F93\u51FA\u6BCF\u4E2A\u5230\u8FBE\u7684 HTTP \u8BF7\u6C42\u7684\u6982\u8981\u4FE1\u606F\uFF0CValidating \u5219\u4F1A\u5BF9\u6BCF\u4E2A http \u8BF7\u6C42\u5934\u90E8\u8FDB\u884C\u68C0\u67E5\uFF0C\u68C0\u67E5 Content-Type \u5934\u5B57\u6BB5\u6240\u8868\u793A\u7684\u5A92\u4F53\u7C7B\u578B\u662F\u5426\u4E3A application/json\u3002</p><p>\u521B\u5EFA\u5B8C BookStoreServer \u5B9E\u4F8B\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u8C03\u7528\u5176 ListenAndServe \u65B9\u6CD5\u8FD0\u884C\u8FD9\u4E2A\u670D\u52A1\u4E86\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// server/server.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bs </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">BookStoreServer</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ListenAndServe</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(&lt;-chan</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> err </span><span style="color:#C792EA;">error</span></span>
<span class="line"><span style="color:#A6ACCD;">	errChan </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(chan</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">go</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">func()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> bs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">srv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ListenAndServe</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">		errChan </span><span style="color:#89DDFF;">&lt;-</span><span style="color:#A6ACCD;"> err</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;-</span><span style="color:#A6ACCD;">errChan</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil,</span><span style="color:#A6ACCD;"> err</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;-</span><span style="color:#A6ACCD;">time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">After</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Second</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> errChan</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u4E2A\u51FD\u6570\u5C06 BookStore \u5185\u90E8\u7684 http.Serve \u653E\u7F6E\u5230\u4E00\u4E2A\u5355\u72EC\u7684\u8F7B\u91CF\u7EA7\u7EBF\u7A0B Goroutine \u4E2D\u8FD0\u884C\u3002\u8FD9\u662F\u56E0\u4E3A\uFF0ChttpServer.ListenAndServe \u4F1A\u963B\u585E\u4EE3\u7801\u7EE7\u7EED\u6267\u884C\uFF0C\u5982\u679C\u4E0D\u628A\u5B83\u653E\u5230\u5355\u72EC\u7684 Goroutine \u4E2D\uFF0C\u540E\u9762\u7684\u4EE3\u7801\u5C06\u65E0\u6CD5\u8FD0\u884C\u3002</p><p>\u4E3A\u4E86\u53EF\u4EE5\u68C0\u6D4B\u5230 http.Serve.ListenAndServe \u7684\u8FD0\u884C\u72B6\u6001\uFF0C\u6211\u4EEC\u518D\u901A\u8FC7\u4E00\u4E2A channel\uFF0C\u5728\u65B0\u521B\u5EFA\u7684 Goroutine \u4E0E\u4E3B Goroutine \u4E4B\u95F4\u5EFA\u7ACB\u8D77\u901A\u4FE1\u6E20\u9053\u3002\u901A\u8FC7\u8FD9\u4E2A\u6E20\u9053\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u53CA\u65F6\u5F97\u5230 http server \u7684\u8FD0\u884C\u72B6\u6001\u3002</p><h4 id="\u7F16\u8BD1\u3001\u8FD0\u884C" tabindex="-1">\u7F16\u8BD1\u3001\u8FD0\u884C <a class="header-anchor" href="#\u7F16\u8BD1\u3001\u8FD0\u884C" aria-hidden="true">#</a></h4><p>\u9996\u5148\u6267\u884C\u4E0B\u9762\u8FD9\u4E2A\u547D\u4EE4\uFF0C\u8BA9 Go \u547D\u4EE4\u81EA\u52A8\u5206\u6790\u4F9D\u8D56\u9879\u548C\u7248\u672C\uFF0C\u5E76\u66F4\u65B0 go.mod\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">go</span><span style="color:#A6ACCD;"> mod tidy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">go</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> finding module </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gorilla</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mux</span></span>
<span class="line"><span style="color:#89DDFF;">go</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> downloading github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gorilla</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mux v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">8.0</span></span>
<span class="line"><span style="color:#89DDFF;">go</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> found github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gorilla</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mux in github</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">com</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gorilla</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mux v1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">8.0</span></span>
<span class="line"></span></code></pre></div><p>\u5B8C\u6210\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u6309\u7167\u4E0B\u9762\u7684\u6B65\u9AA4\u6784\u5EFA\u5E76\u6267\u884C bookstore\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">go build bookstore/cmd/bookstore</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">heora@yueluodeMBP bookstore % ./bookstore  </span></span>
<span class="line"><span style="color:#A6ACCD;">2023/01/15 20:51:33 web server start ok</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u5982\u679C\u4F60\u4E5F\u53EF\u4EE5\u770B\u5230\u4E0A\u9762\u8FD9\u4E2A\u8F93\u51FA\u65E5\u5FD7\uFF0C\u8BF4\u660E\u6211\u4EEC\u7684\u7A0B\u5E8F\u5DF2\u7ECF\u542F\u52A8\u6210\u529F\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528 curl \u547D\u4EE4\u884C\u5DE5\u5177\uFF0C\u6A21\u62DF\u5BA2\u6237\u7AEF\u5411 bookstore \u670D\u52A1\u53D1\u9001\u8BF7\u6C42\u3002</p><p>\u521B\u5EFA\u65B0\u4E66\u6761\u76EE</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl -X POST -H &quot;Content-Type:application/json&quot; -d &#39;{&quot;id&quot;: &quot;978-7-111-55842-2&quot;, &quot;name&quot;: &quot;The Go Programming Language&quot;, &quot;authors&quot;:[&quot;Alan A.A.Donovan&quot;, &quot;Brian W. Kergnighan&quot;],&quot;press&quot;: &quot;Pearson Education&quot;}&#39; localhost:8080/book</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u6B64\u65F6\u670D\u52A1\u7AEF\u4F1A\u8F93\u51FA\u4EE5\u4E0B\u65E5\u5FD7\uFF0C\u8868\u660E\u6211\u4EEC\u7684 bookstore \u670D\u52A1\u6536\u5230\u4E86\u5BA2\u6237\u7AEF\u8BF7\u6C42\u3002</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">2023/01/15 20:53:26 recv a POST request from 127.0.0.1:49367</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u518D\u6765\u83B7\u53D6\u4E00\u4E0B\u8FD9\u672C\u4E66\u7684\u4FE1\u606F\uFF1A</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl -X GET -H &quot;Content-Type:application/json&quot; localhost:8080/book/978-7-111-55842-2</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">{&quot;id&quot;:&quot;978-7-111-55842-2&quot;,&quot;name&quot;:&quot;The Go Programming Language&quot;,&quot;authors&quot;:[&quot;Alan A.A.Donovan&quot;,&quot;Brian W. Kergnighan&quot;],&quot;press&quot;:&quot;Pearson Education&quot;}%   </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230 curl \u5F97\u5230\u7684\u54CD\u5E94\u4E0E\u6211\u4EEC\u7684\u9884\u671F\u662F\u4E00\u81F4\u7684\u3002</p><p><a href="https://github.com/yzqzy/notes/tree/master/go/base/bookstore" target="_blank" rel="noreferrer">\u6E90\u7801\u5730\u5740</a></p><h2 id="_10-\u53D8\u91CF\u58F0\u660E" tabindex="-1">10. \u53D8\u91CF\u58F0\u660E <a class="header-anchor" href="#_10-\u53D8\u91CF\u58F0\u660E" aria-hidden="true">#</a></h2><p>\u5728\u7F16\u7A0B\u8BED\u8A00\u4E2D\uFF0C\u4E3A\u4E86\u65B9\u4FBF\u64CD\u4F5C\u5185\u5B58\u7279\u5B9A\u4F4D\u7F6E\u7684\u6570\u636E\uFF0C\u6211\u4EEC\u4F7F\u7528\u4E00\u4E2A\u7279\u5B9A\u7684\u540D\u79F0\u4E0E\u7279\u5B9A\u4F4D\u7F6E\u7684\u5185\u5B58\u5757\u7ED1\u5B9A\u5728\u4E00\u8D77\uFF0C\u8FD9\u4E2A\u540D\u5B57\u88AB\u79F0\u4E3A\u53D8\u91CF\u3002\u4F46\u8FD9\u5E76\u4E0D\u4EE3\u8868\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u53D8\u91CF\u968F\u610F\u5F15\u7528\u6216\u4FEE\u6539\u5185\u5B58\uFF0C\u53D8\u91CF\u6240\u7ED1\u5B9A\u7684\u5185\u5B58\u533A\u57DF\u9700\u8981\u6709\u4E00\u4E2A\u660E\u786E\u7684\u8FB9\u754C\u3002</p><p>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u901A\u8FC7\u8FD9\u6837\u4E00\u4E2A\u53D8\u91CF\uFF0C\u6211\u4EEC\u7A76\u7ADF\u53EF\u4EE5\u64CD\u4F5C 4 \u4E2A\u5B57\u8282\u5185\u5B58\u8FD8\u662F 8 \u4E2A\u5B57\u8282\u5185\u5B58\uFF0C\u53C8\u6216\u662F 256 \u4E2A\u5B57\u8282\u5185\u5B58\uFF0C\u7F16\u7A0B\u8BED\u8A00\u7684\u7F16\u8BD1\u5668\u6216\u89E3\u91CA\u5668\u90FD\u9700\u8981\u660E\u786E\u77E5\u9053\u3002</p><p>\u90A3\u4E48\uFF0C\u7F16\u7A0B\u8BED\u8A00\u7684\u7F16\u8BD1\u5668\u6216\u89E3\u91CA\u5668\u65F6\u5982\u4F55\u77E5\u9053\u4E00\u4E2A\u53D8\u91CF\u6240\u80FD\u5F15\u7528\u7684\u5185\u5B58\u533A\u57DF\u8FB9\u754C\u5462\uFF1F</p><p>\u5BF9\u4E8E\u8FD9\u4E2A\u95EE\u9898\uFF0C\u52A8\u6001\u8BED\u8A00\u548C\u9759\u6001\u8BED\u8A00\u6709\u4E0D\u540C\u7684\u5904\u7406\u65B9\u5F0F\u3002\u52A8\u6001\u8BED\u8A00\uFF08\u4F8B\u5982 Python\u3001Ruby \u7B49\uFF09\u7684\u89E3\u91CA\u5668\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u901A\u8FC7\u5BF9\u53D8\u91CF\u8D4B\u503C\u7684\u5206\u6790\uFF0C\u81EA\u52A8\u786E\u5B9A\u53D8\u91CF\u7684\u8FB9\u754C\u3002\u5E76\u4E14\u5728\u52A8\u6001\u8BED\u8A00\u4E2D\uFF0C\u4E00\u4E2A\u53D8\u91CF\u53EF\u4EE5\u5728\u8FD0\u884C\u65F6\u88AB\u8D4B\u4E88\u5927\u5C0F\u4E0D\u540C\u7684\u8FB9\u754C\u3002</p><p>\u800C\u9759\u6001\u7F16\u7A0B\u8BED\u8A00\u7F16\u8BD1\u5668\u5FC5\u987B\u660E\u786E\u77E5\u9053\u4E00\u4E2A\u53D8\u91CF\u7684\u8FB9\u754C\u624D\u5141\u8BB8\u4F7F\u7528\u8FD9\u4E2A\u53D8\u91CF\uFF0C\u4F46\u9759\u6001\u8BED\u8A00\u7F16\u8BD1\u5668\u81EA\u8EAB\u4E5F\u6CA1\u529E\u6CD5\u63D0\u4F9B\u8FD9\u4E2A\u4FE1\u606F\uFF0C\u8FD9\u4E2A\u8FB9\u754C\u4FE1\u606F\u5FC5\u987B\u7531\u8FD9\u95E8\u8BED\u8A00\u7684\u4F7F\u7528\u8005\u63D0\u4F9B\uFF0C\u4E8E\u662F\u5C31\u53C8\u6709\u4E86 \u201D\u53D8\u91CF\u58F0\u660E\u201C\u3002\u901A\u8FC7\u53D8\u91CF\u58F0\u660E\uFF0C\u8BED\u8A00\u4F7F\u7528\u8005\u53EF\u4EE5\u663E\u5F0F\u544A\u77E5\u7F16\u8BD1\u5668\u4E00\u4E2A\u53D8\u91CF\u7684\u8FB9\u754C\u4FE1\u606F\u3002</p><p>\u4F5C\u4E3A\u8EAB\u5904\u9759\u6001\u7F16\u7A0B\u8BED\u8A00\u9635\u8425\u7684 Go \u8BED\u8A00\uFF0C\u5B83\u6CBF\u88AD\u4E86\u9759\u6001\u8BED\u8A00\u7684\u8FD9\u4E00\u8981\u6C42\uFF1A\u4F7F\u7528\u53D8\u91CF\u4E4B\u524D\u9700\u8981\u5148\u8FDB\u884C\u53D8\u91CF\u58F0\u660E\u3002</p><h3 id="\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5" tabindex="-1">\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5 <a class="header-anchor" href="#\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5" aria-hidden="true">#</a></h3><p>Go \u662F\u9759\u6001\u8BED\u8A00\uFF0C\u6240\u6709\u53D8\u91CF\u5728\u4F7F\u7528\u524D\u5FC5\u987B\u5148\u8FDB\u884C\u58F0\u660E\u3002\u58F0\u660E\u7684\u610F\u4E49\u5728\u4E8E\u544A\u8BC9\u7F16\u8BD1\u5668\u8BE5\u53D8\u91CF\u53EF\u4EE5\u64CD\u4F5C\u7684\u5185\u5B58\u8FB9\u754C\u4FE1\u606F\uFF0C\u800C\u8FD9\u79CD\u8FB9\u754C\u901A\u5E38\u53C8\u662F\u7531\u53D8\u91CF\u7684\u7C7B\u578B\u4FE1\u606F\u63D0\u4F9B\u7684\u3002</p><h4 id="\u901A\u7528\u53D8\u91CF\u58F0\u660E" tabindex="-1">\u901A\u7528\u53D8\u91CF\u58F0\u660E <a class="header-anchor" href="#\u901A\u7528\u53D8\u91CF\u58F0\u660E" aria-hidden="true">#</a></h4><p>\u5728 Go \u8BED\u8A00\u4E2D\uFF0C\u6709\u4E00\u4E2A\u901A\u7528\u7684\u53D8\u91CF\u58F0\u660E\u65B9\u6CD5\uFF1A</p><img src="`+A+`"><p>\u8FD9\u4E2A\u53D8\u91CF\u58F0\u660E\u5206\u4E3A\u56DB\u4E2A\u90E8\u5206\uFF1A</p><ul><li>var \u662F\u4FEE\u9970\u53D8\u91CF\u58F0\u660E\u7684\u5173\u952E\u5B57\uFF1B</li><li>a \u4E3A\u53D8\u91CF\u540D\uFF1B</li><li>int \u4E3A\u8BE5\u53D8\u91CF\u7684\u7C7B\u578B\uFF1B</li><li>10 \u662F\u53D8\u91CF\u7684\u521D\u59CB\u503C\u3002</li></ul><p>Go \u8BED\u8A00\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u4E0E\u5176\u4ED6\u4E3B\u6D41\u9759\u6001\u8BED\u8A00\u6709\u4E00\u4E2A\u663E\u8457\u5DEE\u5F02\uFF0C\u5C31\u662F\u5B83\u5C06\u53D8\u91CF\u540D\u653E\u5728\u4E86\u7C7B\u578B\u524D\u9762\u3002\u5982\u679C\u4F60\u6CA1\u6709\u663E\u5F0F\u4E3A\u53D8\u91CF\u8D4B\u503C\uFF0CGo \u7F16\u8BD1\u5668\u5C31\u4F1A\u4E3A\u53D8\u91CF\u8D4B\u4E88\u8FD9\u4E2A\u7C7B\u578B\u7684\u96F6\u503C\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// a \u7684\u521D\u503C\u4E3A int \u7C7B\u578B\u7684\u96F6\u503C\uFF1A0</span></span>
<span class="line"></span></code></pre></div><p>Go \u8BED\u8A00\u7684\u6BCF\u79CD\u539F\u751F\u7C7B\u578B\u90FD\u6709\u5B83\u7684\u9ED8\u8BA4\u503C\uFF0C\u8FD9\u4E2A\u9ED8\u8BA4\u503C\u5C31\u662F\u8FD9\u4E2A\u7C7B\u578B\u7684\u96F6\u503C\u3002\u4E0B\u9762\u662F Go \u89C4\u8303\u5B9A\u4E49\u7684\u5185\u7F6E\u539F\u751F\u7C7B\u578B\u7684\u9ED8\u8BA4\u503C\u3002</p><table><thead><tr><th>\u5185\u7F6E\u539F\u751F\u7C7B\u578B</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>\u6240\u6709\u6574\u578B\u7C7B\u578B</td><td>0</td></tr><tr><td>\u6D6E\u70B9\u7C7B\u578B</td><td>0.0</td></tr><tr><td>\u5E03\u5C14\u7C7B\u578B</td><td>false</td></tr><tr><td>\u5B57\u7B26\u4E32\u7C7B\u578B</td><td>\u201C\u201D</td></tr><tr><td>\u6307\u9488\u3001\u63A5\u53E3\u3001\u5207\u7247\u3001channel\u3001map \u548C\u51FD\u6570\u7C7B\u578B</td><td>nil</td></tr></tbody></table><p>\u53E6\u5916\uFF0C\u50CF\u6570\u7EC4\u3001\u7ED3\u6784\u4F53\u8FD9\u6837\u7684\u590D\u5408\u7C7B\u578B\u53D8\u91CF\u7684\u96F6\u503C\u5C31\u662F\u5B83\u4EEC\u7EC4\u6210\u5143\u7D20\u90FD\u4E3A\u96F6\u503C\u65F6\u7684\u7ED3\u679C\u3002</p><p>\u9664\u4E86\u5355\u72EC\u58F0\u660E\u6BCF\u4E2A\u53D8\u91CF\u5916\uFF0CGo \u8BED\u8A00\u8FD8\u63D0\u4F9B\u4E86\u53D8\u91CF\u58F0\u660E\u5757\uFF08block\uFF09\u7684\u8BED\u6CD5\u5F62\u5F0F\uFF0C\u53EF\u4EE5\u7528\u4E00\u4E2A var \u5173\u952E\u5B57\u5C06\u591A\u4E2A\u53D8\u91CF\u58F0\u660E\u653E\u5728\u4E00\u8D77\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	a </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">128</span></span>
<span class="line"><span style="color:#A6ACCD;">  b init8 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span></span>
<span class="line"><span style="color:#A6ACCD;">  s </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  c </span><span style="color:#C792EA;">rune</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  t </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u4E2A\u53D8\u91CF\u5757\u4E2D\uFF0C\u6211\u4EEC\u901A\u8FC7\u4E00\u4E2A var \u5173\u952E\u5B57\u58F0\u660E\u4E86 5 \u4E2A\u4E0D\u540C\u7C7B\u578B\u7684\u53D8\u91CF\u3002\u800C\u4E14\uFF0CGo \u8BED\u8A00\u652F\u6301\u5728\u4E00\u884C\u53D8\u91CF\u58F0\u660E\u4E2D\u540C\u65F6\u58F0\u660E\u591A\u4E2A\u53D8\u91CF\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u6837\u7684\u591A\u53D8\u91CF\u58F0\u660E\u540C\u6837\u4E5F\u53EF\u4EE5\u7528\u5728\u53D8\u91CF\u58F0\u660E\u5757\u4E2D\uFF0C\u50CF\u4E0B\u9762\u8FD9\u6837\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span></span>
<span class="line"><span style="color:#A6ACCD;">  c</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> d</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> e </span><span style="color:#C792EA;">rune</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">C</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">D</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">E</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u4E0A\u9762\u5199\u7684\u591A\u53D8\u91CF\u58F0\u660E\u90FD\u662F\u5728\u58F0\u660E\u540C\u4E00\u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u4E5F\u9002\u7528\u4E8E\u4E0D\u540C\u7C7B\u578B\u7684\u53D8\u91CF\u3002</p><p>\u9664\u4E86\u4E0A\u9762\u8FD9\u79CD\u901A\u5E38\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF0CGo \u8BED\u8A00\u8FD8\u63D0\u4F9B\u4E86\u4E24\u79CD\u53D8\u91CF\u58F0\u660E\u7684 \u201C\u8BED\u6CD5\u7CD6\u201D\u3002</p><h4 id="\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u58F0\u660E" tabindex="-1">\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u58F0\u660E <a class="header-anchor" href="#\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u58F0\u660E" aria-hidden="true">#</a></h4><p>\u5728\u901A\u7528\u7684\u53D8\u91CF\u58F0\u660E\u7684\u57FA\u7840\u4E0A\uFF0CGo \u7F16\u8BD1\u5668\u5141\u8BB8\u6211\u4EEC\u7701\u7565\u53D8\u91CF\u58F0\u660E\u4E2D\u7684\u7C7B\u578B\u4FE1\u606F\uFF0C\u5B83\u7684\u6807\u51C6\u8303\u5F0F\u662F \u201Cvar varName = initExpression\u201D\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u79CD\u5199\u6CD5\u5176\u5B9E\u6709\u70B9\u7C7B\u4F3C\u4E8E\u52A8\u6001\u8BED\u8A00\u7684\u58F0\u660E\u65B9\u5F0F\uFF0C\u4F8B\u5982 JavaScript\u3002\u90A3\u4E48 Go \u7F16\u8BD1\u5668\u5728\u9047\u5230\u8FD9\u6837\u7684\u53D8\u91CF\u58F0\u660E\u540E\u662F\u5982\u4F55\u786E\u5B9A\u53D8\u91CF\u7684\u7C7B\u578B\u4FE1\u606F\u7684\uFF1F</p><p>\u5176\u5B9E\u4E5F\u5F88\u7B80\u5355\uFF0CGo \u7F16\u8BD1\u5668\u4F1A\u6839\u636E\u53F3\u4FA7\u53D8\u91CF\u521D\u503C\u81EA\u52A8\u63A8\u5BFC\u51FA\u53D8\u91CF\u7C7B\u578B\uFF0C\u5E76\u7ED9\u8FD9\u4E2A\u53D8\u91CF\u8D4B\u4E88\u521D\u503C\u6240\u5BF9\u5E94\u7684\u9ED8\u8BA4\u7C7B\u578B\u3002\u6BD4\u5982\uFF0C\u6574\u578B\u503C\u7684\u9ED8\u8BA4\u7C7B\u578B int\uFF0C\u6D6E\u70B9\u503C\u7684\u9ED8\u8BA4\u7C7B\u578B\u4E3A float64\uFF0C\u590D\u6570\u503C\u7684\u9ED8\u8BA4\u503C\u4E3A complex128\uFF0C\u5E03\u5C14\u503C\u7684\u9ED8\u8BA4\u7C7B\u578B\u4E3A bool\uFF0C\u5B57\u7B26\u503C\u9ED8\u8BA4\u7C7B\u578B\u4E3A rune\uFF0C\u5B57\u7B26\u4E32\u503C\u7684\u9ED8\u8BA4\u7C7B\u578B\u4E3A string \u7B49\u3002</p><p>\u5982\u679C\u6211\u4EEC\u4E0D\u63A5\u53D7\u9ED8\u8BA4\u7C7B\u578B\uFF0C\u9700\u8981\u663E\u5F0F\u5730\u4E3A\u53D8\u91CF\u6307\u5B9A\u7C7B\u578B\uFF0C\u9664\u4E86\u901A\u7528\u7684\u58F0\u660E\u5F62\u5F0F\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u901A\u8FC7\u663E\u5F0F\u7C7B\u578B\u8F6C\u578B\u8FBE\u5230\u6211\u4EEC\u7684\u76EE\u5F55\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">int32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">13</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u9762\u8FD9\u79CD\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u58F0\u660E\u7684 \u201C\u8BED\u6CD5\u7CD6\u201D \u4EC5\u9002\u7528\u4E8E\u53D8\u91CF\u58F0\u660E\u7684\u540C\u65F6\u8D4B\u4E88\u53D8\u91CF\u521D\u503C\u7684\u60C5\u51B5\uFF0C\u5982\u679C\u6CA1\u6709\u521D\u503C\u7684\u58F0\u660E\u5F62\u5F0F\u662F\u4E0D\u88AB\u5141\u8BB8\u7684\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b</span></span>
<span class="line"></span></code></pre></div><p>\u7ED3\u5408\u591A\u53D8\u91CF\u58F0\u660E\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u4F7F\u7528\u8FD9\u79CD\u53D8\u91CF\u58F0\u660E \u201C\u8BED\u6CD5\u7CD6\u201D \u58F0\u660E\u591A\u4E2A\u4E0D\u540C\u7C7B\u578B\u7684\u53D8\u91CF\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u4E2A\u53D8\u91CF\u4E2D\uFF0C\u6211\u4EEC\u58F0\u660E\u4E09\u4E2A\u53D8\u91CF a\u3001b\u3001c\uFF0C\u4F46\u5B83\u4EEC\u5206\u522B\u5177\u6709\u4E0D\u540C\u7684\u7C7B\u578B\uFF0C\u5206\u522B\u4E3A int\u3001rune \u548C string\u3002</p><p>\u5728\u8FD9\u79CD\u53D8\u91CF\u58F0\u660E\u8BED\u6CD5\u7CD6\u4E2D\uFF0C\u6211\u4EEC\u7701\u53BB\u53D8\u91CF\u7C7B\u578B\u4FE1\u606F\uFF0CGo \u7F16\u8BD1\u5668\u4F1A\u4E3A\u6211\u4EEC\u81EA\u52A8\u63A8\u5BFC\u51FA\u7C7B\u578B\u4FE1\u606F\u3002\u9664\u4E86\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u5176\u5B9E\u8FD8\u6709\u4E00\u79CD\u66F4\u7B80\u5316\u7684\u53D8\u91CF\u58F0\u660E\u65B9\u5F0F\u3002</p><h4 id="\u77ED\u53D8\u91CF\u58F0\u660E" tabindex="-1">\u77ED\u53D8\u91CF\u58F0\u660E <a class="header-anchor" href="#\u77ED\u53D8\u91CF\u58F0\u660E" aria-hidden="true">#</a></h4><p>Go \u8BED\u8A00\u8FD8\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u6700\u7B80\u5316\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF1A\u77ED\u53D8\u91CF\u58F0\u660E\u3002\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u65F6\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u7701\u53BB var \u5173\u952E\u5B57\u4EE5\u53CA\u7C7B\u578B\u4FE1\u606F\uFF0C\u5B83\u7684\u6807\u51C6\u65B9\u5F0F\u662F \u201CvarName:=initExpression\u201D\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12</span></span>
<span class="line"><span style="color:#A6ACCD;">b </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u77ED\u53D8\u91CF\u58F0\u660E\u6CA1\u6709\u4F7F\u7528\u8D4B\u503C\u64CD\u4F5C\u7B26 \u201C=\u201D\uFF0C\u800C\u662F\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u4E13\u7528\u7684 \u201C:=\u201D\u3002\u539F\u7406\u548C\u4E0A\u9762\u7684\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u7684\u58F0\u660E\u8BED\u6CD5\u7CD6\u4E00\u6837\uFF0C\u77ED\u53D8\u91CF\u58F0\u660E\u4E2D\u7684\u53D8\u91CF\u7C7B\u578B\u4E5F\u662F\u7531 Go \u7F16\u8BD1\u5668\u81EA\u52A8\u63A8\u5BFC\u51FA\u6765\u7684\u3002</p><p>\u800C\u4E14\uFF0C\u77ED\u53D8\u91CF\u58F0\u660E\u4E5F\u652F\u6301\u4E00\u6B21\u58F0\u660E\u591A\u4E2A\u53D8\u91CF\uFF0C\u5E76\u4E14\u5F62\u5F0F\u66F4\u52A0\u7B80\u6D01\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u4E0D\u8FC7\uFF0C\u77ED\u53D8\u91CF\u58F0\u660E\u4F7F\u7528\u4E5F\u6709\u6709\u7EA6\u675F\u7684\uFF0C\u5E76\u4E0D\u662F\u6240\u6709\u53D8\u91CF\u90FD\u53EF\u4EE5\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u7684\u65B9\u5F0F\u6765\u5904\u7406\uFF0C\u6211\u4EEC\u4F1A\u5728\u540E\u9762\u8FDB\u884C\u8BB2\u89E3\u3002</p><p>\u5230\u73B0\u5728\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u5B66\u4E60\u4E86\u4E09\u79CD\u53D8\u91CF\u58F0\u660E\u65B9\u5F0F\u3002\u8FD9\u4E9B\u53D8\u91CF\u58F0\u660E\u65B9\u5F0F\u662F\u5426\u9002\u5408\u6240\u6709\u53D8\u91CF\uFF1F\u7ED9\u51FA\u6700\u7EC8\u7ED3\u679C\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u6765\u5B66\u4E60\u4E0B Go \u8BED\u8A00\u7684\u4E24\u7C7B\u53D8\u91CF\u3002</p><p>Go \u8BED\u8A00\u7684\u53D8\u91CF\u53EF\u4EE5\u5206\u4E3A\u4E24\u7C7B\uFF1A\u4E00\u7C7B\u79F0\u4E3A\u5305\u7EA7\u53D8\u91CF\uFF08package varible\uFF09\uFF0C\u5373\u5305\u7EA7\u522B\u53EF\u89C1\u7684\u53D8\u91CF\u3002\u5982\u679C\u662F\u5BFC\u51FA\u53D8\u91CF\uFF08\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF09\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u5305\u7EA7\u53D8\u91CF\u4E5F\u53EF\u4EE5\u88AB\u89C6\u4E3A\u5168\u5C40\u53D8\u91CF\u3002\u53E6\u4E00\u7C7B\u662F\u5C40\u90E8\u53D8\u91CF\uFF08local varible\uFF09\uFF0C\u5373 Go \u51FD\u6570\u6216\u65B9\u6CD5\u4F53\u5185\u58F0\u660E\u7684\u53D8\u91CF\uFF0C\u4EC5\u5728\u51FD\u6570\u6216\u65B9\u6CD5\u4F53\u5185\u53EF\u89C1\u3002</p><p>\u4E0B\u9762\u6211\u4EEC\u5C31\u6765\u5206\u522B\u8BF4\u660E\u4E00\u4E0B\u8FD9\u4E24\u7C7B\u53D8\u91CF\u5728\u58F0\u660E\u5F62\u5F0F\u9009\u62E9\u4E0A\u7684\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u4E00\u4E9B\u6700\u4F73\u5B9E\u8DF5\u3002</p><h3 id="\u5305\u7EA7\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F" tabindex="-1">\u5305\u7EA7\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F <a class="header-anchor" href="#\u5305\u7EA7\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F" aria-hidden="true">#</a></h3><p>\u5305\u7EA7\u53D8\u91CF\u53EA\u80FD\u4F7F\u7528\u5E26\u6709 var \u5173\u952E\u5B57\u7684\u53D8\u91CF\u58F0\u660E\u65B9\u5F0F\uFF0C\u4E0D\u80FD\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF0C\u4E0D\u8FC7\u5728\u5F62\u5F0F\u7EC6\u8282\u4E0A\u53EF\u4EE5\u5B58\u5728\u4E00\u5B9A\u7075\u6D3B\u5EA6\u3002</p><h4 id="\u58F0\u660E\u5E76\u540C\u65F6\u663E\u793A\u521D\u59CB\u5316" tabindex="-1">\u58F0\u660E\u5E76\u540C\u65F6\u663E\u793A\u521D\u59CB\u5316 <a class="header-anchor" href="#\u58F0\u660E\u5E76\u540C\u65F6\u663E\u793A\u521D\u59CB\u5316" aria-hidden="true">#</a></h4><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> ErrShortWrite </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">short write</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> ErrShortBuffer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">short buffer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> EOF </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EOF</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u4E2A\u4EE3\u7801\u5757\u4E2D\u58F0\u660E\u7684\u53D8\u91CF\u90FD\u662F io \u5305\u7684\u5305\u7EA7\u53D8\u91CF\u3002\u5728 Go \u6807\u51C6\u5E93\u4E2D\uFF0C\u5BF9\u4E8E\u53D8\u91CF\u58F0\u660E\u7684\u540C\u65F6\u8FDB\u884C\u663E\u793A\u521D\u59CB\u5316\u7684\u8FD9\u7C7B\u5305\u7EA7\u53D8\u91CF\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8FD9\u79CD\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u7684 \u201C\u8BED\u6CD5\u7CD6\u201D \u683C\u5F0F\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> varName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> initExpression</span></span>
<span class="line"></span></code></pre></div><p>Go \u7F16\u8BD1\u5668\u4F1A\u81EA\u52A8\u6839\u636E\u7B49\u53F7\u53F3\u4FA7 InitExpression \u7ED3\u679C\u503C\u7684\u7C7B\u578B\uFF0C\u6765\u786E\u5B9A\u5DE6\u4FA7\u58F0\u660E\u7684\u53D8\u91CF\u7C7B\u578B\uFF0C\u8FD9\u4E2A\u7C7B\u578B\u4F1A\u662F\u7ED3\u679C\u503C\u5BF9\u5E94\u7C7B\u578B\u7684\u9ED8\u8BA4\u503C\u3002</p><p>\u5F53\u7136\uFF0C\u5982\u679C\u6211\u4EEC\u4E0D\u63A5\u53D7\u9ED8\u8BA4\u7C7B\u578B\uFF0C\u800C\u662F\u663E\u5F0F\u5730\u4E3A\u5305\u7EA7\u53D8\u91CF\u6307\u5B9A\u7C7B\u578B\uFF0C\u4E0B\u9762\u7ED9\u51FA\u4E24\u79CD\u5305\u7EA7\u53D8\u91CF\u7684\u58F0\u660E\u5F62\u5F0F\u5BF9\u6BD4\u793A\u4F8B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// \u7B2C\u4E00\u79CD</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4F7F\u7528\u9ED8\u8BA4\u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#C792EA;">int32</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u663E\u5F0F\u6307\u5B9A\u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> f </span><span style="color:#C792EA;">float32</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.14</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u663E\u5F0F\u6307\u5B9A\u7C7B\u578B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B2C\u4E8C\u79CD</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4F7F\u7528\u9ED8\u8BA4\u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">int32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">17</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u663E\u793A\u6307\u5B9A\u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">float32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3.14</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u663E\u793A\u6307\u5B9A\u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u867D\u7136\u8FD9\u4E24\u79CD\u65B9\u5F0F\u90FD\u662F\u53EF\u4EE5\u4F7F\u7528\u7684\uFF0C\u4F46\u4ECE\u58F0\u660E\u4E00\u81F4\u6027\u7684\u89D2\u5EA6\u51FA\u53D1\uFF0CGo \u66F4\u63A8\u8350\u6211\u4EEC\u4F7F\u7528\u540E\u8005\uFF0C\u8FD9\u6837\u53EF\u4EE5\u7EDF\u4E00\u63A5\u53D7\u9ED8\u8BA4\u7C7B\u578B\u548C\u663E\u793A\u6307\u5B9A\u7C7B\u578B\u3002\u5C24\u5176\u5C06\u8FD9\u4E9B\u53D8\u91CF\u653E\u5728\u4E00\u4E2A var \u5757\u4E2D\u58F0\u660E\u65F6\uFF0C\u53EF\u4EE5\u66F4\u660E\u663E\u5730\u770B\u5230\u8FD9\u4E00\u70B9\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"><span style="color:#A6ACCD;">  b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">int32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">17</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">float32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3.14</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="\u58F0\u660E\u4F46\u5EF6\u8FDF\u521D\u59CB\u5316" tabindex="-1">\u58F0\u660E\u4F46\u5EF6\u8FDF\u521D\u59CB\u5316 <a class="header-anchor" href="#\u58F0\u660E\u4F46\u5EF6\u8FDF\u521D\u59CB\u5316" aria-hidden="true">#</a></h4><p>\u5BF9\u4E8E\u58F0\u660E\u65F6\u5E76\u4E0D\u663E\u793A\u521D\u59CB\u5316\u7684\u5305\u7EA7\u53D8\u91CF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u8FD9\u79CD\u901A\u7528\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#C792EA;">int32</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> f </span><span style="color:#C792EA;">float64</span></span>
<span class="line"></span></code></pre></div><p>\u867D\u7136\u53D8\u91CF\u6CA1\u6709\u521D\u59CB\u5316\uFF0C\u4F46\u662F Go \u4E5F\u4F1A\u8BA9\u8FD9\u4E9B\u53D8\u91CF\u62E5\u6709\u521D\u59CB \u201C\u96F6\u503C\u201D\u3002\u5982\u679C\u662F\u81EA\u5B9A\u4E49\u7C7B\u578B\uFF0C\u5EFA\u8BAE\u5C3D\u91CF\u4FDD\u8BC1\u5B83\u7684\u96F6\u503C\u662F\u53EF\u7528\u7684\u3002</p><p>\u8FD8\u6709\u4E00\u4E2A\u6CE8\u610F\u4E8B\u9879\uFF0C\u5C31\u662F\u58F0\u660E\u805A\u7C7B\u4E0E\u5C31\u8FD1\u539F\u5219\u3002</p><p>Go \u8BED\u8A00\u63D0\u4F9B\u4E86\u53D8\u91CF\u751F\u547D\u5757\u7528\u6765\u628A\u591A\u4E2A\u53D8\u91CF\u58F0\u660E\u653E\u5728\u4E00\u8D77\uFF0C\u5E76\u4E14\u5728\u8BED\u6CD5\u4E0A\u4E5F\u4E0D\u4F1A\u9650\u5236\u653E\u7F6E\u5728 var \u5757\u4E2D\u7684\u58F0\u660E\u7C7B\u578B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5145\u5206\u5229\u7528 var \u53D8\u91CF\u751F\u547D\u5757\uFF0C\u8BA9\u6211\u4EEC\u7684\u53D8\u91CF\u58F0\u660E\u66F4\u89C4\u6574\uFF0C\u66F4\u5177\u53EF\u8BFB\u6027\u3002</p><p>\u901A\u5E38\uFF0C\u6211\u4EEC\u4F1A\u5C06\u7528\u4E00\u7C7B\u7684\u53D8\u91CF\u58F0\u660E\u653E\u5728\u4E00\u4E2A var \u53D8\u91CF\u58F0\u660E\u5757\u4E2D\uFF0C\u4E0D\u540C\u7C7B\u7684\u58F0\u660E\u653E\u5728\u4E0D\u540C\u7684 var \u58F0\u660E\u5757\u4E2D\u3002\u4E0B\u9762\u662F\u6807\u51C6\u5E93 net \u5305\u4E2D\u6458\u53D6\u7684\u4E24\u6BB5\u53D8\u91CF\u58F0\u660E\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  netGo  </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  netCgo </span><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  aLongTimeAgo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Unix</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  noDeadline </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Time</span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#A6ACCD;">  noCancel   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(chan</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct{})(nil)</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u4E0A\u9762\u8FD9\u4E24\u4E2A var \u58F0\u660E\u5757\u5404\u81EA\u58F0\u660E\u4E86\u4E00\u7C7B\u7279\u5B9A\u7528\u9014\u7684\u5305\u7EA7\u53D8\u91CF\u3002</p><p>\u6211\u4EEC\u5C06\u5EF6\u8FDF\u521D\u59CB\u5316\u7684\u53D8\u91CF\u58F0\u660E\u653E\u5728\u4E00\u4E2A var \u58F0\u660E\u5757\uFF0C\u7136\u540E\u5C06\u58F0\u660E\u4E14\u663E\u5F0F\u521D\u59CB\u5316\u7684\u53D8\u91CF\u653E\u5728\u53E6\u4E00\u4E2A var \u5757\u4E2D\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u79F0\u4E4B\u4E3A \u201C\u58F0\u660E\u805A\u7C7B\u201D\uFF0C\u58F0\u660E\u805A\u7C7B\u53EF\u4EE5\u63D0\u5347\u4EE3\u7801\u53EF\u8BFB\u6027\u3002</p><p>\u90A3\u4E48\u6211\u4EEC\u662F\u5426\u5E94\u8BE5\u5C06\u5305\u7EA7\u53D8\u91CF\u7684\u58F0\u660E\u5168\u90E8\u96C6\u4E2D\u653E\u5728\u6E90\u6587\u4EF6\u5934\u90E8\u5462\uFF1F\u7B54\u6848\u5176\u5B9E\u5E76\u4E0D\u552F\u4E00\u3002</p><p>\u4F7F\u7528\u8FC7\u9759\u6001\u8BED\u8A00\u7F16\u7A0B\u7684\u5F00\u53D1\u4EBA\u5458\u90FD\u77E5\u9053\uFF0C\u53D8\u91CF\u58F0\u660E\u6700\u4F73\u5B9E\u8DF5\u4E2D\u6709\u4E00\u6761\u51C6\u5219\uFF1A\u5C31\u8FD1\u539F\u5219\u3002\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u5C3D\u53EF\u80FD\u5728\u9760\u8FD1\u7B2C\u4E00\u6B21\u4F7F\u7528\u53D8\u91CF\u7684\u4F4D\u7F6E\u58F0\u660E\u8FD9\u4E2A\u53D8\u91CF\u3002\u5C31\u8FD1\u539F\u5219\u5B9E\u9645\u4E0A\u4E5F\u662F\u5BF9\u53D8\u91CF\u7684\u4F5C\u7528\u57DF\u6700\u5C0F\u5316\u7684\u4E00\u79CD\u5B9E\u73B0\u624B\u6BB5\u3002\u5728 Go \u6807\u51C6\u5E93\u4E2D\u6211\u4EEC\u4E5F\u5F88\u5BB9\u6613\u627E\u5230\u7B26\u5408\u5C31\u8FD1\u539F\u5219\u53D8\u91CF\u58F0\u660E\u7684\u4F8B\u5B50\uFF0C\u4F8B\u5982\u4E0B\u9762\u8FD9\u6BB5\u6807\u51C6\u5E93 http \u5305\u4E2D\u7684\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> ErrNoCookie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http: named cookie not present</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">r </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">Request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cookie</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(*</span><span style="color:#A6ACCD;">Cookie</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">range</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">readCookies</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">r</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Header</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil,</span><span style="color:#A6ACCD;"> ErrNoCookie</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u4E2A\u4EE3\u7801\u5757\u91CC\uFF0CErrNoCookie \u8FD9\u4E2A\u53D8\u91CF\u4EC5\u5728 Cookie \u65B9\u6CD5\u4E2D\u4F7F\u7528\u8FC7\u4E00\u6B21\uFF0C\u56E0\u6B64\u5B83\u88AB\u58F0\u660E\u5728\u7D27\u90BB Cookie \u65B9\u6CD5\u5B9A\u4E49\u7684\u5730\u65B9\u3002\u5F53\u7136\uFF0C\u5982\u679C\u4E00\u4E2A\u5305\u7EA7\u53D8\u91CF\u5728\u5305\u5185\u90E8\u88AB\u591A\u6B21\u4F7F\u7528\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u53D8\u91CF\u8FD8\u662F\u653E\u5728\u6E90\u6587\u4EF6\u5934\u90E8\u6BD4\u8F83\u5408\u9002\u3002</p><h3 id="\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F" tabindex="-1">\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F <a class="header-anchor" href="#\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F" aria-hidden="true">#</a></h3><p>\u548C\u5305\u7EA7\u53D8\u91CF\u76F8\u6BD4\uFF0C\u5C40\u90E8\u53D8\u91CF\u591A\u4E86\u4E00\u79CD\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF0C\u8FD9\u662F\u5C40\u90E8\u53D8\u91CF\u7279\u6709\u7684\u4E00\u79CD\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF0C\u4E5F\u662F\u5C40\u90E8\u53D8\u91CF\u91C7\u7528\u6700\u591A\u7684\u4E00\u79CD\u58F0\u660E\u5F62\u5F0F\u3002</p><h4 id="\u5EF6\u8FDF\u521D\u59CB\u5316\u53D8\u91CF\u58F0\u660E" tabindex="-1">\u5EF6\u8FDF\u521D\u59CB\u5316\u53D8\u91CF\u58F0\u660E <a class="header-anchor" href="#\u5EF6\u8FDF\u521D\u59CB\u5316\u53D8\u91CF\u58F0\u660E" aria-hidden="true">#</a></h4><p>\u5BF9\u4E8E\u5EF6\u8FDF\u521D\u59CB\u5316\u7684\u5C40\u90E8\u53D8\u91CF\u58F0\u660E\uFF0C\u6211\u4EEC\u91C7\u7528\u901A\u7528\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u3002</p><p>\u6211\u4EEC\u4E4B\u524D\u8BF4\u8FC7\u7684\u7701\u7565\u7C7B\u578B\u4FE1\u606F\u7684\u58F0\u660E\u548C\u77ED\u53D8\u91CF\u58F0\u660E\u8FD9\u4E24\u79CD \u201C\u8BED\u6CD5\u7CD6\u201D \u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u90FD\u4E0D\u652F\u6301\u53D8\u91CF\u5EF6\u8FDF\u521D\u59CB\u5316\uFF0C\u56E0\u6B64\u5BF9\u4E8E\u8FD9\u7C7B\u5C40\u90E8\u53D8\u91CF\uFF0C\u548C\u5305\u7EA7\u53D8\u91CF\u4E00\u6837\uFF0C\u6211\u4EEC\u53EA\u80FD\u91C7\u7528\u901A\u7528\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> err </span><span style="color:#C792EA;">error</span></span>
<span class="line"></span></code></pre></div><h4 id="\u663E\u5F0F\u521D\u59CB\u5316\u53D8\u91CF\u58F0\u660E" tabindex="-1">\u663E\u5F0F\u521D\u59CB\u5316\u53D8\u91CF\u58F0\u660E <a class="header-anchor" href="#\u663E\u5F0F\u521D\u59CB\u5316\u53D8\u91CF\u58F0\u660E" aria-hidden="true">#</a></h4><p>\u5BF9\u4E8E\u58F0\u660E\u4E14\u663E\u5F0F\u521D\u59CB\u5316\u7684\u5C40\u90E8\u53D8\u91CF\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u3002</p><p>\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u662F\u5C40\u90E8\u53D8\u91CF\u6700\u5E38\u7528\u7684\u58F0\u660E\u5F62\u5F0F\u3002\u5BF9\u4E8E\u63A5\u53D7\u9ED8\u8BA4\u53C2\u6570\u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u6211\u4EEC\u4F7F\u7528\u4E0B\u9762\u8FD9\u79CD\u5F62\u5F0F\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span></span>
<span class="line"><span style="color:#A6ACCD;">f </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.14</span></span>
<span class="line"><span style="color:#A6ACCD;">s </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, gopher!</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u5BF9\u4E8E\u4E0D\u63A5\u53D7\u9ED8\u8BA4\u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u6211\u4EEC\u4F9D\u7136\u53EF\u4EE5\u91C7\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\uFF0C\u4E0D\u8FC7\u6211\u4EEC\u9700\u8981\u5728 \u201C:=\u201D \u53F3\u4FA7\u8FDB\u884C\u663E\u5F0F\u8F6C\u578B\uFF0C\u4FDD\u6301\u58F0\u660E\u4E00\u81F4\u6027\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">int32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">17</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">f </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">float32</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3.14</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">s </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#82AAFF;">byte</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello, gopher!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>\u9664\u6B64\u4E4B\u5916\uFF0C\u6211\u4EEC\u9700\u8981\u6CE8\u610F\uFF0C\u5C3D\u91CF\u5728\u5206\u652F\u63A7\u5236\u65F6\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u3002</p><p>\u5206\u652F\u63A7\u5236\u5E94\u8BE5\u662F Go \u4E2D\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u5E94\u7528\u6700\u5E7F\u6CDB\u7684\u573A\u666F\u3002\u5728\u7F16\u5199 Go \u4EE3\u7801\u65F6\uFF0C\u6211\u4EEC\u5F88\u5C11\u5355\u72EC\u58F0\u660E\u7528\u4E8E\u5206\u652F\u63A7\u5236\u8BED\u53E5\u4E2D\u7684\u53D8\u91CF\uFF0C\u800C\u662F\u5C06\u5B83\u4E0E if\u3001for \u7B49\u63A7\u5236\u8BED\u53E5\u901A\u8FC7\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u878D\u5408\u5728\u4E00\u8D77\uFF0C\u5373\u5728\u63A7\u5236\u8BED\u53E5\u4E2D\u76F4\u63A5\u58F0\u660E\u7528\u4E8E\u63A7\u5236\u8BED\u53E5\u4EE3\u7801\u5757\u4E2D\u7684\u53D8\u91CF\u3002</p><p>\u4E0B\u9762\u662F\u6458\u81EA Go \u6807\u51C6\u5E93\u4E2D\u7684\u4EE3\u7801\uFF0Cstrings \u5305\u7684 LastIndexAny \u65B9\u6CD5\u4E3A\u6211\u4EEC\u5F88\u597D\u5730\u8BE0\u91CA\u4E86\u5982\u4F55\u5C06\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u4E0E\u5206\u652F\u63A7\u5236\u8BED\u53E5\u878D\u5408\u5728\u4E00\u8D77\u4F7F\u7528\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LastIndexAny</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> chars </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> chars </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;">// Avoid scanning all of s.</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;">// \u5728if\u6761\u4EF6\u63A7\u5236\u8BED\u53E5\u4E2D\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u58F0\u660E\u4E86if\u4EE3\u7801\u5757\u4E2D\u8981\u4F7F\u7528\u7684\u53D8\u91CFas\u548CisASCII</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> as</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> isASCII </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">makeASCIISet</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">chars</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> isASCII </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> as</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">contains</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">])</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> i</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;">// \u5728for\u5FAA\u73AF\u63A7\u5236\u8BED\u53E5\u4E2D\u4F7F\u7528\u77ED\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u58F0\u660E\u4E86for\u4EE3\u7801\u5757\u4E2D\u8981\u4F7F\u7528\u7684\u53D8\u91CFc</span></span>
<span class="line"><span style="color:#A6ACCD;">		r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> size </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> utf8</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">DecodeLastRuneInString</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">[:</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#A6ACCD;">		i </span><span style="color:#89DDFF;">-=</span><span style="color:#A6ACCD;"> size</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">range</span><span style="color:#A6ACCD;"> chars </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> r </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> i</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u79CD\u77ED\u53D8\u91CF\u58F0\u660E\u878D\u5408\u7684\u4F7F\u7528\u65B9\u5F0F\u4E5F\u4F53\u73B0\u51FA \u201C\u5C31\u8FD1\u539F\u5219\u201D\uFF0C\u8BA9\u53D8\u91CF\u7684\u4F5C\u7528\u57DF\u6700\u5C0F\u5316\u3002</p><p>\u53E6\u5916\uFF0C\u867D\u7136\u7406\u8BBA\u4E0A\u826F\u597D\u7684\u51FD\u6570/\u65B9\u6CD5\u8BBE\u8BA1\u9700\u8981\u8003\u8651 \u201C\u5355\u4E00\u804C\u8D23\u201D\uFF0C\u6BCF\u4E2A\u51FD\u6570/\u65B9\u6CD5\u89C4\u6A21\u90FD\u4E0D\u5927\uFF0C\u5F88\u5C11\u9700\u8981\u5E94\u7528 var \u5757\u6765\u805A\u7C7B\u58F0\u660E\u5C40\u90E8\u53D8\u91CF\u3002\u4F46\u662F\u5982\u679C\u4F60\u5728\u58F0\u660E\u5C40\u90E8\u53D8\u91CF\u65F6\u9047\u5230\u9002\u5408\u805A\u7C7B\u7684\u5E94\u7528\u573A\u666F\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u8003\u8651\u4F7F\u7528 var \u58F0\u660E\u5757\u6765\u58F0\u660E\u591A\u4E2A\u5C40\u90E8\u53D8\u91CF\u3002\u6211\u4EEC\u53EF\u4EE5\u53C2\u8003 Go \u6807\u51C6\u5E93 net \u5305\u4E2D\u7684 resolveAddrList \u65B9\u6CD5\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">r </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">Resolver</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">resolveAddrList</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ctx context</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Context</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> op</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> network</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                          addr </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> hint Addr</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">addrList</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">      tcp      </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">TCPAddr</span></span>
<span class="line"><span style="color:#A6ACCD;">      udp      </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">UDPAddr</span></span>
<span class="line"><span style="color:#A6ACCD;">      ip       </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">IPAddr</span></span>
<span class="line"><span style="color:#A6ACCD;">      wildcard </span><span style="color:#C792EA;">bool</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u603B\u7ED3-8" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3-8" aria-hidden="true">#</a></h3><p>\u672C\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u5B66\u4E60\u4E86\u591A\u79CD Go \u53D8\u91CF\u58F0\u660E\u7684\u65B9\u6CD5\uFF0C\u8FD8\u5B66\u4E60\u4E86\u4E0D\u540C\u7C7B\u578B Go \u53D8\u91CF\u53EF\u4EE5\u91C7\u7528\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u548C\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u4E00\u4E9B\u53D8\u91CF\u58F0\u660E\u7684\u6700\u4F73\u5B9E\u8DF5\u539F\u5219\u3002</p><p>\u5177\u4F53\u6765\u8BF4\uFF0CGo \u8BED\u8A00\u63D0\u4F9B\u4E86\u4E00\u79CD\u901A\u7528\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u4EE5\u53CA\u4E24\u79CD\u53D8\u91CF\u58F0\u660E \u201C\u8BED\u6CD5\u7CD6\u201D \u5F62\u5F0F\uFF0C\u6211\u4EEC\u9700\u8981\u6839\u636E\u5177\u4F53\u60C5\u51B5\u9009\u62E9\u4E0D\u540C\u7684\u53D8\u91CF\u58F0\u660E\u5F62\u5F0F\u3002</p><img src="`+C+`"><p>\u826F\u597D\u7684\u53D8\u91CF\u58F0\u660E\u5B9E\u8DF5\u9700\u8981\u6211\u4EEC\u8003\u8651\u591A\u65B9\u9762\u56E0\u7D20\uFF0C\u5305\u62EC\u660E\u786E\u8981\u58F0\u660E\u7684\u53D8\u91CF\u662F\u5305\u7EA7\u53D8\u91CF\u8FD8\u662F\u5C40\u90E8\u53D8\u91CF\u3001\u662F\u5426\u9700\u8981\u5EF6\u8FDF\u521D\u59CB\u5316\u3001\u662F\u5426\u63A5\u53D7\u9ED8\u8BA4\u7C7B\u578B\u3001\u662F\u5426\u662F\u5206\u652F\u63A7\u5236\u53D8\u91CF\u5E76\u7ED3\u5408\u805A\u7C7B\u548C\u5C31\u8FD1\u539F\u5219\u7B49\u3002</p><h3 id="\u6280\u672F\u62D3\u5C55-2" tabindex="-1">\u6280\u672F\u62D3\u5C55 <a class="header-anchor" href="#\u6280\u672F\u62D3\u5C55-2" aria-hidden="true">#</a></h3><p><strong>\u4E0E\u4E3B\u6D41\u9759\u6001\u8BED\u8A00\u4E0D\u540C\uFF0C\u5728 Go \u8BED\u8A00\u53D8\u91CF\u58F0\u660E\u4E2D\uFF0C\u7C7B\u578B\u662F\u653E\u5728\u53D8\u91CF\u540D\u540E\u9762\u7684\uFF0C\u4F60\u8BA4\u4E3A\u8FD9\u6837\u6709\u4EC0\u4E48\u597D\u5904\uFF1F</strong></p><p><a href="https://blog.go-zh.org/gos-declaration-syntax" target="_blank" rel="noreferrer">https://blog.go-zh.org/gos-declaration-syntax</a></p><p>\u5176\u5B9E\u5B98\u65B9\u5DF2\u7ECF\u7ED9\u51FA\u89E3\u91CA\uFF0C\u7B80\u5355\u6765\u8BF4\u5C31\u662F\u548C C \u76F8\u6BD4\uFF0C\u5728\u5F53\u53C2\u6570\u662F\u6307\u9488\u7684\u590D\u6742\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u79CD\u58F0\u660E\u683C\u5F0F\u4F1A\u76F8\u5BF9\u597D\u7406\u89E3\u4E00\u70B9\u3002</p><h2 id="_11-\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF" tabindex="-1">11. \u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF <a class="header-anchor" href="#_11-\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF" aria-hidden="true">#</a></h2><p>\u8FD9\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u6211\u4EEC\u4ECE Go \u53D8\u91CF\u906E\u853D\uFF08Variable Shadowing\uFF09\u95EE\u9898\u8BF4\u8D77\u3002\u6211\u4EEC\u5148\u6765\u770B\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">11</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">n </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  a </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> n</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 11</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">after calling foo, a =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 11</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u51FD\u6570 foo \u8C03\u7528\u524D\u540E\uFF0C\u5305\u7EA7\u53D8\u91CF a \u7684\u503C\u90FD\u6CA1\u6709\u53D1\u751F\u53D8\u5316\u3002\u8FD9\u662F\u56E0\u4E3A\uFF0C\u867D\u7136 foo \u51FD\u6570\u4E2D\u4E5F\u4F7F\u7528\u5230\u53D8\u91CF a\uFF0C\u4F46\u662F foo \u51FD\u6570\u4E2D\u7684\u53D8\u91CF a \u906E\u853D\u4E86\u5916\u9762\u7684\u5305\u7EA7\u53D8\u91CF a\uFF0C\u8FD9\u4F7F\u5F97\u5305\u7EA7\u53D8\u91CF a \u6CA1\u6709\u53C2\u4E0E\u5230 foo \u51FD\u6570\u7684\u903B\u8F91\u4E2D\uFF0C\u6240\u4EE5\u8F93\u51FA\u7ED3\u679C\u5C31\u4E0D\u4F1A\u6709\u53D8\u5316\u4E86\u3002</p><p>\u53D8\u91CF\u906E\u853D\u53EA\u662F\u4E00\u4E2A\u5F15\u5B50\uFF0C\u5176\u5B9E\u771F\u6B63\u60F3\u8BF4\u7684\u662F\u4EE3\u7801\u5757\uFF08Block\uFF0C\u5373\u8BCD\u6CD5\u5757\uFF09\u548C\u4F5C\u7528\u57DF\uFF08Scope\uFF09\u8FD9\u4E24\u4E2A\u6982\u5FF5\uFF0C\u60F3\u8981\u5F7B\u5E95\u4FDD\u8BC1\u4E0D\u51FA\u73B0\u53D8\u91CF\u906E\u853D\u95EE\u9898\uFF0C\u6211\u4EEC\u9700\u8981\u6DF1\u5165\u4E86\u89E3\u8FD9\u4E24\u4E2A\u6982\u5FF5\u53CA\u5176\u80CC\u540E\u7684\u89C4\u5219\u3002</p><h3 id="\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF" tabindex="-1">\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF <a class="header-anchor" href="#\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF" aria-hidden="true">#</a></h3><p>Go \u8BED\u8A00\u4E2D\u7684\u4EE3\u7801\u5757\u662F\u5305\u88F9\u5728\u4E00\u5BF9\u5927\u62EC\u53F7\u5185\u90E8\u7684\u58F0\u660E\u548C\u8BED\u53E5\u5E8F\u5217\uFF0C\u5982\u679C\u4E00\u5BF9\u5927\u62EC\u53F7\u5185\u90E8\u6CA1\u6709\u4EFB\u4F55\u58F0\u660E\u6216\u5176\u4ED6\u8BED\u53E5\uFF0C\u6211\u4EEC\u5C31\u628A\u5B83\u53EB\u505A\u7A7A\u4EE3\u7801\u5757\u3002Go \u4EE3\u7801\u5757\u652F\u6301\u5D4C\u5957\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u4E00\u4E2A\u4EE3\u7801\u5757\u4E2D\u5D4C\u5165\u591A\u4E2A\u5C42\u6B21\u7684\u4EE3\u7801\u5757\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">//\u4EE3\u7801\u57571</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE3\u7801\u57572</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE3\u7801\u57573</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE3\u7801\u57574</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4E0A\u9762\u8FD9\u4E2A\u793A\u4F8B\u4E2D\uFF0C\u51FD\u6570 foo \u7684\u51FD\u6570\u4F53\u662F\u6700\u5916\u5C42\u7684\u4EE3\u7801\u5757\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5C06\u5B83\u7F16\u53F7\u4E3A \u201C\u4EE3\u7801\u5757 1\u201D\u3002\u5728\u5B83\u7684\u51FD\u6570\u4F53\u5185\u90E8\uFF0C\u53C8\u5D4C\u5957\u4E86\u4E09\u5C42\u4EE3\u7801\u5757\uFF0C\u5206\u522B\u662F\u4EE3\u7801\u5757 2\u30013 \u30014\u3002</p><p>\u50CF\u4EE3\u7801\u5757\u4E2D 1 \u5230 4 \u8FD9\u6837\u7684\u4EE3\u7801\u5757\uFF0C\u5B83\u4EEC\u90FD\u662F\u7531\u4E24\u4E2A\u8089\u773C\u53EF\u89C1\u4E14\u914D\u5BF9\u7684\u5927\u62EC\u53F7\u5305\u88F9\u8D77\u6765\u7684\uFF0C\u6211\u4EEC\u79F0\u8FD9\u6837\u7684\u4EE3\u7801\u5757\u4E3A\u663E\u5F0F\u4EE3\u7801\u5757\uFF08Explicit Blocks\uFF09\u3002\u65E2\u7136\u63D0\u5230\u663E\u793A\u4EE3\u7801\u5757\uFF0C\u90A3\u5FC5\u7136\u8FD8\u5B58\u5728\u9690\u5F0F\u4EE3\u7801\u5757\uFF08Implict Block\uFF09\u3002\u987E\u540D\u601D\u4E49\uFF0C\u9690\u5F0F\u4EE3\u7801\u5757\u6CA1\u6709\u663E\u5F0F\u4EE3\u7801\u5757\u90A3\u6837\u7684\u8089\u773C\u53EF\u89C1\u7684\u914D\u5BF9\u5927\u62EC\u53F7\u5305\u88F9\uFF0C\u6211\u4EEC\u65E0\u6CD5\u901A\u8FC7\u5927\u62EC\u53F7\u6765\u8BC6\u522B\u9690\u5F0F\u4EE3\u7801\u5757\u3002</p><p>Go \u8BED\u8A00\u89C4\u8303\u5BF9\u73B0\u5B58\u7684\u51E0\u7C7B\u9690\u5F0F\u4EE3\u7801\u5757\u505A\u4E86\u660E\u786E\u5B9A\u4E49\uFF0C\u6211\u4EEC\u5148\u6765\u770B\u4E0B\u9762\u8FD9\u5F20\u56FE\uFF1A</p><img src="`+i+'"><p>\u9996\u5148\u662F\u4F4D\u4E8E\u6700\u5916\u5C42\u7684\u5B87\u5B99\u4EE3\u7801\u5757\uFF08Universe Block\uFF09\uFF0C\u5B83\u7684\u8303\u56F4\u6700\u5927\uFF0C\u6240\u6709 Go \u6E90\u7801\u90FD\u5728\u8FD9\u4E2A\u9690\u5F0F\u4EE3\u7801\u5757\u4E2D\u3002</p><p>\u5728\u5B87\u5B99\u4EE3\u7801\u5757\u5185\u90E8\u5D4C\u5957\u4E86\u5305\u4EE3\u7801\u5757\uFF08Package Block\uFF09\uFF0C\u6BCF\u4E2A Go \u5305\u90FD\u5BF9\u5E94\u4E00\u4E2A\u9690\u5F0F\u4EE3\u7801\u5757\uFF0C\u6BCF\u4E2A\u5305\u4EE3\u7801\u5757\u5305\u542B\u4E86\u8BE5\u5305\u4E2D\u7684\u6240\u6709 Go \u6E90\u7801\uFF0C\u4E0D\u7BA1\u8FD9\u4E9B\u4EE3\u7801\u5206\u5E03\u5728\u8FD9\u4E2A\u5305\u91CC\u591A\u5C11\u4E2A\u6E90\u6587\u4EF6\u4E2D\u3002</p><p>\u5728\u5305\u4EE3\u7801\u5757\u4E2D\u5185\u90E8\u5D4C\u5957\u82E5\u5E72\u6587\u4EF6\u4EE3\u7801\u5757\uFF08File Block\uFF09\uFF0C\u6BCF\u4E2A Go \u6E90\u6587\u4EF6\u90FD\u5BF9\u5E94\u4E00\u4E2A\u6587\u4EF6\u4EE3\u7801\u5757\uFF0C\u5373\u4E00\u4E2A Go \u5305\u5982\u679C\u6709\u591A\u4E2A\u6E90\u6587\u4EF6\uFF0C\u90A3\u4E48\u5C31\u4F1A\u6709\u591A\u4E2A\u5BF9\u5E94\u7684\u6587\u4EF6\u4EE3\u7801\u5757\u3002</p><p>\u7136\u540E\u5C31\u662F\u63A7\u5236\u8BED\u53E5\u4E2D\u7684\u9690\u5F0F\u4EE3\u7801\u5757\uFF0C\u5305\u62EC if\u3001for \u548C switch\u3002\u6211\u4EEC\u53EF\u4EE5\u628A\u6BCF\u4E2A\u63A7\u5236\u8BED\u53E5\u90FD\u89C6\u4E3A\u5B83\u5728\u81EA\u5DF1\u7684\u9690\u5F0F\u4EE3\u7801\u5757\u4E2D\u3002\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u8FD9\u91CC\u7684\u63A7\u5236\u8BED\u53E5\u9690\u5F0F\u4EE3\u7801\u5757\u4E0E\u63A7\u5236\u8BED\u53E5\u4F7F\u7528\u5927\u62EC\u53F7\u5305\u88F9\u7684\u663E\u5F0F\u4EE3\u7801\u5757\u5E76\u4E0D\u662F\u4E00\u4E2A\u4EE3\u7801\u5757\u3002switch \u63A7\u5236\u8BED\u53E5\u7684\u9690\u5F0F\u4EE3\u7801\u5757\u7684\u4F4D\u7F6E\u662F\u5728\u5B83\u663E\u793A\u4EE3\u7801\u5916\u9762\u7684\u3002</p><p>\u6700\u540E\uFF0C\u4F4D\u4E8E\u6700\u5185\u5C42\u7684\u9690\u5F0F\u4EE3\u7801\u5757\u4F4D\u4E8E switch \u6216 select \u8BED\u53E5\u7684\u6BCF\u4E2A case/default \u5B50\u53E5\u4E2D\uFF0C\u867D\u7136\u6CA1\u6709\u5927\u62EC\u53F7\u5305\u88F9\uFF0C\u4F46\u5B9E\u9645\u4E0A\uFF0C\u6BCF\u4E2A\u5B50\u53E5\u90FD\u53EF\u4EE5\u89C6\u4F5C\u4E00\u4E2A\u4EE3\u7801\u5757\u3002</p><p>\u6709\u4E86\u4EE3\u7801\u5757\u7684\u6982\u5FF5\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u66F4\u597D\u7684\u7406\u89E3\u4F5C\u7528\u57DF\u7684\u6982\u5FF5\u3002\u4F5C\u7528\u57DF\u7684\u6982\u5FF5\u662F\u9488\u5BF9\u6807\u8BC6\u7B26\u7684\uFF0C\u4E0D\u5C40\u9650\u4E8E\u53D8\u91CF\u3002\u6BCF\u4E2A\u6807\u8BC6\u7B26\u90FD\u6709\u81EA\u5DF1\u7684\u4F5C\u7528\u57DF\uFF0C\u4E00\u4E2A\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u5C31\u662F\u6307\u8FD9\u4E2A\u6807\u8BC6\u7B26\u5728\u88AB\u58F0\u660E\u540E\u53EF\u4EE5\u88AB\u6709\u6548\u4F7F\u7528\u7684\u6E90\u7801\u533A\u57DF\u3002</p><p>\u4F5C\u7528\u57DF\u662F\u4E00\u4E2A\u7F16\u8BD1\u5668\u7684\u6982\u5FF5\uFF0C\u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u8FC7\u7A0B\u4E2D\u4F1A\u5BF9\u6BCF\u4E2A\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u8FDB\u884C\u68C0\u67E5\uFF0C\u5BF9\u4E8E\u5728\u6807\u8BC6\u7B26\u4F5C\u7528\u57DF\u5916\u4F7F\u7528\u8BE5\u6807\u8BC6\u7B26\u7684\u884C\u4E3A\u4F1A\u7ED9\u51FA\u7F16\u8BD1\u9519\u8BEF\u3002</p><p>\u4E0D\u8FC7\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u4F7F\u7528\u4EE3\u7801\u5757\u7684\u6982\u5FF5\u6765\u5212\u5B9A\u6BCF\u4E2A\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u3002</p><p>\u58F0\u660E\u4E8E\u5916\u5C42\u4EE3\u7801\u5757\u4E2D\u7684\u6807\u8BC6\u7B26\uFF0C\u5176\u4F5C\u7528\u57DF\u5305\u62EC\u6240\u6709\u5185\u5C42\u4EE3\u7801\u5757\uFF0C\u8FD9\u4E00\u539F\u5219\u540C\u6837\u9002\u7528\u4E8E\u663E\u5F0F\u4EE3\u7801\u5757\u548C\u9690\u5F0F\u4EE3\u7801\u5757\u3002</p><p>\u4E0B\u9762\uFF0C\u6211\u4EEC\u5BF9\u7167\u4E0A\u9762\u7684\u793A\u610F\u56FE\uFF0C\u518D\u4E3E\u4E00\u4E9B\u4F8B\u5B50\uFF0C\u5BF9\u4F5C\u7528\u57DF\u8FDB\u4E00\u6B65\u7684\u7406\u89E3\u3002</p><p>\u9996\u5148\uFF0C\u6211\u4EEC\u6765\u770B\u770B\u4F4D\u4E8E\u6700\u5916\u5C42\u7684\u5B87\u5B99\u9690\u5F0F\u4EE3\u7801\u5757\u7684\u6807\u8BC6\u7B26\u3002\u6211\u4EEC\u5148\u6765\u770B\u7B2C\u4E00\u4E2A\u95EE\u9898\uFF0C\u5982\u4F55\u58F0\u660E\u8FD9\u4E00\u533A\u57DF\u7684\u6807\u8BC6\u7B26\u3002</p><p>\u5176\u5B9E\u6211\u4EEC\u5E76\u4E0D\u80FD\u58F0\u660E\u8FD9\u4E00\u5757\u7684\u6807\u8BC6\u7B26\uFF0C\u8FD9\u4E00\u533A\u57DF\u662F Go \u8BED\u8A00\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26\u7684\u81EA\u7559\u5730\u3002\u4E0B\u9762\u662F Go \u8BED\u8A00\u5F53\u524D\u7248\u672C\u5B9A\u4E49\u91CC\u7684\u6240\u6709\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26\u3002</p><img src="'+d+`"><p>\u7531\u4E8E\u8FD9\u4E9B\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26\u4F4D\u4E8E\u5305\u4EE3\u7801\u5757\u7684\u5916\u5C42\uFF0C\u5B83\u4EEC\u7684\u4F5C\u7528\u57DF\u4E5F\u662F\u8303\u56F4\u6700\u5927\u7684\u3002\u503C\u5F97\u6CE8\u610F\u7684\u662F\uFF0C\u8FD9\u4E9B\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26\u4E0D\u662F\u5173\u952E\u5B57\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u518D\u5185\u5C42\u4EE3\u7801\u5757\u4E2D\u58F0\u660E\u540C\u540D\u7684\u6807\u8BC6\u7B26\u3002</p><p>\u5B87\u5B99\u4EE3\u7801\u5757\u91CC\u5B58\u5728\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26\uFF0C\u5728\u5B87\u5B99\u4EE3\u7801\u5757\u7684\u4E0B\u4E00\u5C42\u662F\u5305\u4EE3\u7801\u5757\u3002\u5305\u9876\u5C42\u58F0\u660E\u4E2D\u7684\u5E38\u91CF\u3001\u7C7B\u578B\u3001\u53D8\u91CF\u6216\u51FD\u6570\u5BF9\u5E94\u7684\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u5C31\u662F\u5305\u4EE3\u7801\u5757\u3002</p><p>\u5BF9\u4E8E\u4F5C\u7528\u57DF\u4E3A\u5305\u4EE3\u7801\u5757\u7684\u6807\u8BC6\u7B26\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u77E5\u9053\u4E00\u4E2A\u7279\u6B8A\u60C5\u51B5\u3002\u90A3\u5C31\u662F\u5F53\u4E00\u4E2A\u5305 A \u5BFC\u5165\u53E6\u5916\u4E00\u4E2A\u5305 B \u540E\uFF0C\u5305 A \u4EC5\u53EF\u4EE5\u4F7F\u7528\u88AB\u5BFC\u5165\u5305\u5305 B \u4E2D\u7684\u5BFC\u51FA\u6807\u8BC6\u7B26\uFF08Exported Identifier\uFF09\u3002</p><p>\u6309\u7167 Go \u8BED\u8A00\u5B9A\u4E49\uFF0C\u4E00\u4E2A\u6807\u8BC6\u7B26\u8981\u6210\u4E3A\u5BFC\u51FA\u6807\u8BC6\u7B26\u9700\u8981\u540C\u65F6\u5177\u5907\u4E24\u4E2A\u6761\u4EF6\uFF1A\u4E00\u662F\u8FD9\u4E2A\u6807\u8BC6\u7B26\u5728\u5305\u4EE3\u7801\u5757\u4E2D\uFF0C\u6216\u8005\u5B83\u662F\u4E00\u4E2A\u5B57\u6BB5\u540D\u6216\u65B9\u6CD5\u540D\uFF1B\u4E8C\u662F\u5B83\u540D\u5B57\u7B2C\u4E00\u4E2A\u5B57\u7B26\u662F\u4E00\u4E2A\u5927\u5199\u7684 Unicode \u5B57\u7B26\u3002\u8FD9\u4E24\u4E2A\u6761\u4EF6\u7F3A\u4E00\u4E0D\u53EF\u3002</p><p>\u5927\u90E8\u5206\u5728\u5305\u9876\u5C42\u58F0\u660E\u7684\u6807\u8BC6\u7B26\u90FD\u5177\u6709\u5305\u4EE3\u7801\u5757\u8303\u56F4\u7684\u4F5C\u7528\u57DF\uFF0C\u5BFC\u5165\u7684\u5305\u540D\u4E5F\u5177\u6709\u5305\u4EE3\u7801\u5757\u8303\u56F4\u7684\u4F5C\u7528\u57DF\u3002\u5982\u679C\u4E00\u4E2A\u5305 A \u6709\u4E24\u4E2A\u6E90\u6587\u4EF6\u8981\u5B9E\u73B0\uFF0C\u800C\u4E14\u8FD9\u4E24\u4E2A\u6E90\u6587\u4EF6\u4E2D\u7684\u4EE3\u7801\u90FD\u4F9D\u8D56\u5305 B \u4E2D\u7684\u4EE3\u7801\uFF0C\u90A3\u4E48\u8FD9\u4E24\u4E2A\u6E90\u6587\u4EF6\u90FD\u9700\u8981\u5BFC\u5165 B\u3002</p><p>\u5728\u6E90\u6587\u4EF6\u5C42\u9762\uFF0C\u53BB\u6389\u62E5\u6709\u5305\u4EE3\u7801\u5757\u4F5C\u7528\u57DF\u7684\u6807\u8BC6\u7B26\u540E\uFF0C\u5269\u4F59\u7684\u5C31\u662F\u4E00\u4E2A\u4E2A\u51FD\u6570/\u65B9\u6CD5\u7684\u5B9E\u73B0\u3002\u5728\u8FD9\u4E9B\u51FD\u6570/\u65B9\u6CD5\u4F53\u4E2D\uFF0C\u6807\u8BC6\u7B26\u4F5C\u7528\u57DF\u5212\u5206\u539F\u5219\u66F4\u52A0\u7B80\u5355\uFF0C\u6211\u4EEC\u53EF\u4EE5\u51ED\u501F\u8089\u773C\u53EF\u89C1\u7684\u3001\u914D\u5BF9\u7684\u5927\u62EC\u53F7\u6765\u660E\u786E\u754C\u5B9A\u4E00\u4E2A\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u8303\u56F4\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">t T</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">M1</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">// \u4EE3\u7801\u57571</span></span>
<span class="line"><span style="color:#A6ACCD;">	m </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">// \u4EE3\u7801\u57571\u662F\u5305\u542Bm\u3001t\u3001x\u548Cerr\u4E09\u4E2A\u6807\u8BC6\u7B26\u7684\u6700\u5185\u90E8\u4EE3\u7801\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EE3\u7801\u57572</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;">// &quot;\u4EE3\u7801\u57572&quot;\u662F\u5305\u542B\u7C7B\u578Bbar\u6807\u8BC6\u7B26\u7684\u6700\u5185\u90E8\u7684\u90A3\u4E2A\u5305\u542B\u4EE3\u7801\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct{}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u7C7B\u578B\u6807\u8BC6\u7B26bar\u7684\u4F5C\u7528\u57DF\u59CB\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;">// \u4EE3\u7801\u57573</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#676E95;">// &quot;\u4EE3\u7801\u57573&quot;\u662F\u5305\u542B\u53D8\u91CFa\u6807\u8BC6\u7B26\u7684\u6700\u5185\u90E8\u7684\u90A3\u4E2A\u5305\u542B\u4EE3\u7801\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">			a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// a\u4F5C\u7528\u57DF\u5F00\u59CB\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;">// \u4EE3\u7801\u57574</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#676E95;">//... ...</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#676E95;">// a\u4F5C\u7528\u57DF\u7EC8\u6B62\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;">// \u7C7B\u578B\u6807\u8BC6\u7B26bar\u7684\u4F5C\u7528\u57DF\u7EC8\u6B62\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">// m\u3001t\u3001x\u548Cerr\u7684\u4F5C\u7528\u57DF\u7EC8\u6B62\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u4E0A\u9762\u793A\u4F8B\u4E2D\u5B9A\u4E49\u4E86\u7C7B\u578B T \u7684\u4E00\u4E2A\u65B9\u6CD5 M1\uFF0C\u65B9\u6CD5\u63A5\u6536\u5668\uFF08receiver\uFF09\u53D8\u91CF t\u3001\u51FD\u6570\u53C2\u6570 x\uFF0C\u4EE5\u53CA\u8FD4\u56DE\u503C\u53D8\u91CF err \u5BF9\u5E94\u7684\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u8303\u56F4 M1 \u51FD\u6570\u4F53\u5BF9\u5E94\u7684\u663E\u5F0F\u4EE3\u7801\u5757 1\u3002\u867D\u7136 t\u3001x \u548C err \u5E76\u6CA1\u6709\u88AB\u51FD\u6570\u4F53\u7684\u5927\u62EC\u53F7\u663E\u5F0F\u5305\u88F9\uFF0C\u4F46\u5B83\u4EEC\u4E5F\u5C5E\u4E8E\u51FD\u6570\u5B9A\u4E49\u7684\u4E00\u90E8\u5206\uFF0C\u4F5C\u7528\u57DF\u4ECD\u7136\u662F\u4EE3\u7801\u5757 1\u3002</p><p>\u8BF4\u5B8C\u51FD\u6570\u4F53\u5916\u90E8\u7684\u51FD\u6570\u53C2\u6570\u3001\u8FD4\u56DE\u503C\u7B49\u5143\u7D20\u7684\u4F5C\u7528\u57DF\u540E\uFF0C\u4E0B\u9762\u6211\u4EEC\u6765\u5206\u6790\u51FD\u6570\u4F53\u5185\u90E8\u7684\u90A3\u4E9B\u8BED\u6CD5\u5143\u7D20\u3002</p><p>\u51FD\u6570\u5185\u90E8\u58F0\u660E\u7684\u5E38\u91CF\u6216\u53D8\u91CF\u5BF9\u5E94\u7684\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u8303\u56F4\u5F00\u59CB\u4E8E\u5E38\u91CF\u6216\u53D8\u91CF\u58F0\u660E\u8BED\u53E5\u7684\u672B\u5C3E\uFF0C\u5E76\u7EC8\u6B62\u4E8E\u5176\u6700\u5185\u90E8\u7684\u90A3\u4E2A\u5305\u542B\u5757\u7684\u672B\u5C3E\u3002\u5728\u4E0A\u8FF0\u4F8B\u5B50\u4E2D\uFF0C\u53D8\u91CF m\u3001\u81EA\u5B9A\u4E49\u7C7B\u578B bar \u4EE5\u53CA\u5728\u4EE3\u7801\u5757 3 \u4E2D\u58F0\u660E\u7684\u53D8\u91CF a \u5747\u7B26\u5408\u8FD9\u4E2A\u5212\u5206\u89C4\u5219\u3002</p><p>\u4E0B\u9762\uFF0C\u6211\u4EEC\u518D\u6765\u770B\u770B\u4F4D\u4E8E\u63A7\u5236\u8BED\u53E5\u9690\u5F0F\u4EE3\u7801\u5757\u4E2D\u7684\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u5212\u5206\u3002\u6211\u4EEC\u4EE5 if \u6761\u4EF6\u5206\u652F\u8BED\u53E5\u4E3A\u4F8B\u6765\u5206\u6790\u4E00\u4E0B\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">bar</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u4E00\u4E2A \u201Cif - else - if -else&quot; \u6761\u4EF6\u5206\u652F\u8BED\u53E5\uFF0C\u6839\u636E\u6211\u4EEC\u524D\u9762\u8BB2\u8FC7\u7684\u9690\u5F0F\u4EE3\u7801\u5757\u89C4\u5219\uFF0C\u6211\u4EEC\u5C06\u4E0A\u9762\u793A\u4F8B\u4E2D\u9690\u5F0F\u4EE3\u7801\u5757\u8F6C\u6362\u4E3A\u663E\u5F0F\u4EE3\u7801\u5757\uFF0C\u53EF\u4EE5\u5F97\u5230\u4E0B\u9762\u8FD9\u6BB5\u7B49\u4EF7\u4EE3\u7801\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">bar</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u7B49\u4EF7\u4E8E\u7B2C\u4E00\u4E2Aif\u7684\u9690\u5F0F\u4EE3\u7801\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">		a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u53D8\u91CFa\u4F5C\u7528\u57DF\u59CB\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u7B49\u4EF7\u4E8E\u7B2C\u4E00\u4E2Aelse if\u7684\u9690\u5F0F\u4EE3\u7801\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">				b </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u53D8\u91CFb\u7684\u4F5C\u7528\u57DF\u59CB\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u7B49\u4EF7\u4E8E\u7B2C\u4E8C\u4E2Aelse if\u7684\u9690\u5F0F\u4EE3\u7801\u5757</span></span>
<span class="line"><span style="color:#A6ACCD;">						c </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u53D8\u91CFc\u4F5C\u7528\u57DF\u59CB\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">							</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#676E95;">// \u53D8\u91CFc\u7684\u4F5C\u7528\u57DF\u7EC8\u6B62\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#676E95;">// \u53D8\u91CFb\u7684\u4F5C\u7528\u57DF\u7EC8\u6B62\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;">// \u53D8\u91CFa\u4F5C\u7528\u57DF\u7EC8\u6B62\u4E8E\u6B64</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u7ECF\u8FC7\u8F6C\u6362\uFF0C\u5404\u4E2A\u58F0\u660E\u5728 if \u8868\u8FBE\u5F0F\u4E2D\u7684\u53D8\u91CF\u7684\u4F5C\u7528\u57DF\u5C31\u53D8\u5F97\u4E00\u76EE\u4E86\u7136\u4E86\u3002\u58F0\u660E\u4E8E\u4E0D\u540C\u5C42\u6B21\u7684\u9690\u5F0F\u4EE3\u7801\u5757\u4E2D\u7684\u53D8\u91CF a\u3001b \u548C c \u7684\u5B9E\u9645\u4F5C\u7528\u57DF\u90FD\u4F4D\u4E8E\u6700\u5185\u5C42\u7684 else \u663E\u5F0F\u4EE3\u7801\u5757\u4E4B\u5916\uFF0C\u6240\u4EE5\u5728 println \u7684\u663E\u793A\u4EE3\u7801\u5757\u4E2D\uFF0C\u53D8\u91CF a\u3001b\u3001c \u90FD\u662F\u5408\u6CD5\u7684\uFF0C\u5E76\u4E14\u8FD8\u4FDD\u6301\u521D\u59CB\u503C\u3002</p><p>\u5230\u8FD9\u91CC\u6211\u4EEC\u5DF2\u7ECF\u4E86\u89E3\u4EE3\u7801\u5757\u4E0E\u4F5C\u7528\u57DF\u7684\u6982\u5FF5\u548C\u89C4\u5219\uFF0C\u90A3\u4E48\u6211\u4EEC\u5E94\u8BE5\u5982\u4F55\u5229\u7528\u8FD9\u4E9B\u77E5\u8BC6\u907F\u514D\u5728\u5B9E\u9645\u7F16\u7801\u4E2D\u7684\u53D8\u91CF\u906E\u853D\u95EE\u9898\u5462\uFF1F</p><h3 id="\u907F\u514D\u53D8\u91CF\u906E\u853D\u7684\u539F\u5219" tabindex="-1">\u907F\u514D\u53D8\u91CF\u906E\u853D\u7684\u539F\u5219 <a class="header-anchor" href="#\u907F\u514D\u53D8\u91CF\u906E\u853D\u7684\u539F\u5219" aria-hidden="true">#</a></h3><p>\u53D8\u91CF\u662F\u6807\u8BC6\u7B26\u7684\u4E00\u79CD\uFF0C\u6211\u4EEC\u524D\u9762\u8BF4\u7684\u6807\u8BC6\u7B26\u7684\u4F5C\u7528\u57DF\u89C4\u5219\u540C\u6837\u9002\u7528\u4E8E\u53D8\u91CF\u3002</p><p>\u53D8\u91CF\u906E\u853D\u95EE\u9898\u7684\u6839\u672C\u539F\u56E0\uFF0C\u5C31\u662F\u5185\u5C42\u4EE3\u7801\u5757\u4E2D\u58F0\u660E\u4E86\u4E00\u4E2A\u4E0E\u5916\u5C42\u4EE3\u7801\u5757\u540C\u540D\u4E14\u540C\u7C7B\u578B\u7684\u53D8\u91CF\u3002\u8FD9\u6837\uFF0C\u5185\u5C42\u4EE3\u7801\u5757\u4E2D\u7684\u540C\u540D\u53D8\u91CF\u5C31\u4F1A\u66FF\u4EE3\u90A3\u4E2A\u5916\u5C42\u53D8\u91CF\uFF0C\u53C2\u4E0E\u6B64\u5C42\u4EE3\u7801\u5757\u5185\u7684\u8BA1\u7B97\uFF0C\u4E5F\u5C31\u662F\u5185\u5C42\u53D8\u91CF\u906E\u853D\u4E86\u5916\u5C42\u540C\u540D\u53D8\u91CF\u3002</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">errors</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2020</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">checkYear</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wrong year</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">switch</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getYear</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2020</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">		fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">it is</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2021</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">		fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">it is</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		err </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">after check, it is</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> err</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getYear</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">new</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#C792EA;">int16</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2021</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">checkYear</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">call checkYear error:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">call checkYear ok</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u8FD0\u884C\u4E0B\u8FD9\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">$</span><span style="color:#89DDFF;">go</span><span style="color:#A6ACCD;"> run complex</span><span style="color:#89DDFF;">.</span><span style="color:#89DDFF;">go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">it is </span><span style="color:#F78C6C;">2021</span></span>
<span class="line"><span style="color:#A6ACCD;">after check</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> it is </span><span style="color:#F78C6C;">2020</span></span>
<span class="line"><span style="color:#A6ACCD;">call checkYear </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> wrong year</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0C\u7B2C 26 \u884C\u5B9A\u4E49\u7684 getYear \u51FD\u6570\u8FD4\u56DE\u4E86\u6B63\u786E\u7684\u6708\u4EFD\uFF0C\u4F46\u662F checkYear \u5728\u7ED3\u5C3E\u8F93\u51FA \u201Dafter check, it is 2020\u201C\uFF0C\u5E76\u4E14\u8FD4\u56DE\u7684 err \u5E76\u4E0D\u662F nil\u3002</p><h4 id="\u906E\u853D\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26" tabindex="-1">\u906E\u853D\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26 <a class="header-anchor" href="#\u906E\u853D\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26" aria-hidden="true">#</a></h4><p>\u4F4D\u4E8E\u7B2C 18 \u884C\u7684 new\uFF0C\u662F Go \u8BED\u8A00\u91CC\u7684\u4E00\u4E2A\u9884\u5B9A\u4E49\u6807\u8BC6\u7B26\u3002\u4F46\u662F\u5728\u4E0A\u9762\u7684\u793A\u4F8B\u4EE3\u7801\u4E2D\uFF0C\u6211\u4EEC\u4F7F\u7528 new \u8FD9\u4E2A\u540D\u5B57\u5B9A\u4E49\u4E86\u4E00\u4E2A\u65B0\u7C7B\u578B\uFF0C\u4E8E\u662F new \u8FD9\u4E2A\u6807\u8BC6\u7B26\u5C31\u88AB\u906E\u853D\u4E86\u3002\u5982\u679C\u8FD9\u65F6\u6211\u4EEC\u5728 main \u51FD\u6570\u4E0B\u65B9\u653E\u4E0A\u4E0B\u9762\u4EE3\u7801\uFF1A</p><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"></span>
<span class="line"></span></code></pre></div>`,810),h=[u];function m(v,G,b,f,q,E){return a(),n("div",null,h)}const x=s(g,[["render",m]]);export{B as __pageData,x as default};
